[33mtag v0.2.1[m
Tagger: cy-opcmvp <cy.sss.amz@gmail.com>
Date:   Tue Jan 13 18:31:43 2026 +0800

v0.2.1: ä¸–ç•Œæ—¶é’Ÿæ’ä»¶å®žçŽ°ä¸Žæ’ä»¶IDéªŒè¯ä¿®å¤

æ–°åŠŸèƒ½ï¼š
 ä¸–ç•Œæ—¶é’Ÿæ’ä»¶ - æ”¯æŒå¤šæ—¶åŒºæ˜¾ç¤ºå’Œå€’è®¡æ—¶æé†’
 å®Œæ•´çš„å›½é™…åŒ–æ”¯æŒï¼ˆä¸­è‹±æ–‡ï¼‰
 å“åº”å¼UIè®¾è®¡å’Œæµç•…åŠ¨ç”»

ä¿®å¤ï¼š
 æ’ä»¶IDéªŒè¯è§„åˆ™ä¸ä¸€è‡´é—®é¢˜
 æ–‡æ¡£ç¤ºä¾‹ä¸Žå®žçŽ°ä¸åŒ¹é…é—®é¢˜

æ”¹è¿›ï¼š
 å¢žå¼ºå†…éƒ¨æ’ä»¶å¼€å‘æŒ‡å—
 æ·»åŠ è¯¦ç»†çš„æ’ä»¶IDå‘½åè§„èŒƒ
 æä¾›é”™è¯¯é¢„é˜²æŒ‡å¯¼
 å®Œæ•´çš„å•å…ƒæµ‹è¯•è¦†ç›–

æŠ€æœ¯ç»†èŠ‚ï¼š
- åŸºäºŽIPluginæŽ¥å£çš„æ ‡å‡†æ’ä»¶å®žçŽ°
- æ•°æ®æŒä¹…åŒ–å’ŒçŠ¶æ€ç®¡ç†
- å®šæ—¶å™¨ç®¡ç†å’Œèµ„æºæ¸…ç†
- Material Design 3è®¾è®¡è§„èŒƒ

[33mcommit c70e454cd223e6ea0ff9c2763ab1a661cee4cb4e[m[33m ([m[1;36mHEAD[m[33m -> [m[1;32mmain[m[33m, [m[1;33mtag: [m[1;33mv0.2.1[m[33m)[m
Author: cy-opcmvp <cy.sss.amz@gmail.com>
Date:   Tue Jan 13 18:31:21 2026 +0800

    feat: å®žçŽ°ä¸–ç•Œæ—¶é’Ÿæ’ä»¶å¹¶ä¿®å¤æ’ä»¶IDéªŒè¯é—®é¢˜
    
    - æ–°å¢žä¸–ç•Œæ—¶é’Ÿæ’ä»¶ï¼Œæ”¯æŒå¤šæ—¶åŒºæ˜¾ç¤ºå’Œå€’è®¡æ—¶æé†’åŠŸèƒ½
    - ä¿®å¤æ’ä»¶IDéªŒè¯è§„åˆ™ä¸ä¸€è‡´é—®é¢˜ï¼Œç»Ÿä¸€ä½¿ç”¨å°å†™å­—æ¯å’Œæ•°å­—
    - æ›´æ–°å†…éƒ¨æ’ä»¶å¼€å‘æŒ‡å—ï¼Œæ·»åŠ è¯¦ç»†çš„æ’ä»¶IDå‘½åè§„èŒƒ
    - æ·»åŠ å®Œæ•´çš„å›½é™…åŒ–æ”¯æŒï¼ˆä¸­è‹±æ–‡ï¼‰
    - åŒ…å«å…¨é¢çš„å•å…ƒæµ‹è¯•å’Œæ–‡æ¡£
    
    ä¸»è¦åŠŸèƒ½ï¼š
    - å¤šæ—¶åŒºä¸–ç•Œæ—¶é’Ÿæ˜¾ç¤ºï¼Œé»˜è®¤åŒ—äº¬æ—¶é—´
    - çµæ´»çš„å€’è®¡æ—¶æé†’åŠŸèƒ½
    - å®žæ—¶æ—¶é—´æ›´æ–°å’Œå®Œæˆé€šçŸ¥
    - æ•°æ®æŒä¹…åŒ–å’ŒçŠ¶æ€ç®¡ç†
    - å“åº”å¼UIè®¾è®¡å’ŒåŠ¨ç”»æ•ˆæžœ
    
    æŠ€æœ¯æ”¹è¿›ï¼š
    - ä¿®æ­£æ’ä»¶IDéªŒè¯è§„åˆ™ä¸Žæ–‡æ¡£ç¤ºä¾‹çš„ä¸ä¸€è‡´æ€§
    - å¢žå¼ºå¼€å‘æŒ‡å—çš„å®Œæ•´æ€§å’Œå‡†ç¡®æ€§
    - æä¾›æ¸…æ™°çš„é”™è¯¯é¢„é˜²æŒ‡å¯¼

[1mdiff --git a/PLUGIN_ID_FIX_SUMMARY.md b/PLUGIN_ID_FIX_SUMMARY.md[m
[1mnew file mode 100644[m
[1mindex 0000000..80ae3d9[m
[1m--- /dev/null[m
[1m+++ b/PLUGIN_ID_FIX_SUMMARY.md[m
[36m@@ -0,0 +1,136 @@[m
[32m+[m[32m# æ’ä»¶IDéªŒè¯é—®é¢˜ä¿®å¤æ€»ç»“[m[41m[m
[32m+[m[41m[m
[32m+[m[32m## é—®é¢˜æè¿°[m[41m[m
[32m+[m[41m[m
[32m+[m[32mç”¨æˆ·åœ¨ç‚¹å‡»ä¸–ç•Œæ—¶é’Ÿæ’ä»¶æ—¶é‡åˆ°äº† "Invalid plugin descriptor" é”™è¯¯ã€‚ç»è¿‡è°ƒæŸ¥å‘çŽ°ï¼Œè¿™æ˜¯ç”±äºŽæ’ä»¶IDå‘½åä¸ç¬¦åˆç³»ç»ŸéªŒè¯è§„åˆ™å¯¼è‡´çš„ã€‚[m[41m[m
[32m+[m[41m[m
[32m+[m[32m## æ ¹æœ¬åŽŸå› [m[41m[m
[32m+[m[41m[m
[32m+[m[32m### 1. æ’ä»¶IDéªŒè¯è§„åˆ™[m[41m[m
[32m+[m[32mç³»ç»Ÿä¸­çš„æ’ä»¶IDéªŒè¯ä½¿ç”¨ä»¥ä¸‹æ­£åˆ™è¡¨è¾¾å¼ï¼š[m[41m[m
[32m+[m[32m```regex[m[41m[m
[32m+[m[32m^[a-z0-9]+(\.[a-z0-9]+)*$[m[41m[m
[32m+[m[32m```[m[41m[m
[32m+[m[41m[m
[32m+[m[32mè¿™ä¸ªè§„åˆ™è¦æ±‚ï¼š[m[41m[m
[32m+[m[32m- åªèƒ½åŒ…å«å°å†™å­—æ¯ (a-z) å’Œæ•°å­— (0-9)[m[41m[m
[32m+[m[32m- ä½¿ç”¨ç‚¹å· (.) ä½œä¸ºåˆ†éš”ç¬¦[m[41m[m
[32m+[m[32m- **ä¸å…è®¸ä¸‹åˆ’çº¿ (_)**[m[41m[m
[32m+[m[41m[m
[32m+[m[32m### 2. åŽŸå§‹æ’ä»¶IDé—®é¢˜[m[41m[m
[32m+[m[32mä¸–ç•Œæ—¶é’Ÿæ’ä»¶æœ€åˆä½¿ç”¨çš„IDæ˜¯ï¼š[m[41m[m
[32m+[m[32m```[m[41m[m
[32m+[m[32mcom.example.world_clock  // âŒ åŒ…å«ä¸‹åˆ’çº¿ï¼Œä¸ç¬¦åˆéªŒè¯è§„åˆ™[m[41m[m
[32m+[m[32m```[m[41m[m
[32m+[m[41m[m
[32m+[m[32m### 3. æ–‡æ¡£ä¸Žå®žçŽ°ä¸ä¸€è‡´[m[41m[m
[32m+[m[32m`docs/guides/internal-plugin-development.md` ä¸­çš„ç¤ºä¾‹ä¹Ÿä½¿ç”¨äº†åŒ…å«ä¸‹åˆ’çº¿çš„æ’ä»¶IDï¼š[m[41m[m
[32m+[m[32m```[m[41m[m
[32m+[m[32mcom.mycompany.my_awesome_plugin  // âŒ æ–‡æ¡£ç¤ºä¾‹ä¹Ÿä¸ç¬¦åˆè§„åˆ™[m[41m[m
[32m+[m[32m```[m[41m[m
[32m+[m[41m[m
[32m+[m[32m## ä¿®å¤æŽªæ–½[m[41m[m
[32m+[m[41m[m
[32m+[m[32m### 1. ä¿®å¤ä¸–ç•Œæ—¶é’Ÿæ’ä»¶ID[m[41m[m
[32m+[m[32må°†æ’ä»¶IDä»Ž `com.example.world_clock` æ›´æ”¹ä¸º `com.example.worldclock`[m[41m[m
[32m+[m[41m[m
[32m+[m[32m**ä¿®æ”¹çš„æ–‡ä»¶ï¼š**[m[41m[m
[32m+[m[32m- `lib/plugins/world_clock/world_clock_plugin.dart`[m[41m[m
[32m+[m[32m- `lib/plugins/world_clock/world_clock_plugin_factory.dart`[m[41m[m
[32m+[m[32m- `lib/plugins/plugin_registry.dart`[m[41m[m
[32m+[m[32m- `test/plugins/world_clock_test.dart`[m[41m[m
[32m+[m[41m[m
[32m+[m[32m### 2. ä¿®å¤æ–‡æ¡£ç¤ºä¾‹[m[41m[m
[32m+[m[32må°†æ–‡æ¡£ä¸­çš„ç¤ºä¾‹æ’ä»¶IDä»Ž `com.mycompany.my_awesome_plugin` æ›´æ”¹ä¸º `com.mycompany.myawesomeplugin`[m[41m[m
[32m+[m[41m[m
[32m+[m[32m**ä¿®æ”¹çš„æ–‡ä»¶ï¼š**[m[41m[m
[32m+[m[32m- `docs/guides/internal-plugin-development.md` (å¤šå¤„)[m[41m[m
[32m+[m[41m[m
[32m+[m[32m### 3. å¢žå¼ºæ–‡æ¡£è¯´æ˜Ž[m[41m[m
[32m+[m[32måœ¨å†…éƒ¨æ’ä»¶å¼€å‘æŒ‡å—ä¸­æ·»åŠ äº†ä¸“é—¨çš„ç« èŠ‚ "é‡è¦ï¼šæ’ä»¶IDå‘½åè§„èŒƒ"ï¼ŒåŒ…å«ï¼š[m[41m[m
[32m+[m[41m[m
[32m+[m[32m#### è¯¦ç»†çš„æ ¼å¼è¦æ±‚[m[41m[m
[32m+[m[32m- åå‘åŸŸåè®°æ³•[m[41m[m
[32m+[m[32m- å­—ç¬¦é™åˆ¶è¯´æ˜Ž[m[41m[m
[32m+[m[32m- ç¦æ­¢å­—ç¬¦åˆ—è¡¨[m[41m[m
[32m+[m[41m[m
[32m+[m[32m#### æ­£ç¡®å’Œé”™è¯¯ç¤ºä¾‹å¯¹æ¯”[m[41m[m
[32m+[m[32m```[m[41m[m
[32m+[m[32mâœ… æ­£ç¡®ç¤ºä¾‹:[m[41m[m
[32m+[m[32m- com.example.calculator[m[41m[m
[32m+[m[32m- com.mycompany.texteditor[m[41m  [m
[32m+[m[32m- org.opensource.musicplayer[m[41m[m
[32m+[m[41m[m
[32m+[m[32mâŒ é”™è¯¯ç¤ºä¾‹:[m[41m[m
[32m+[m[32m- com.example.my_plugin        // åŒ…å«ä¸‹åˆ’çº¿[m[41m[m
[32m+[m[32m- com.example.My-Plugin        // åŒ…å«å¤§å†™å­—æ¯å’Œè¿žå­—ç¬¦[m[41m[m
[32m+[m[32m- com.example.plugin-name      // åŒ…å«è¿žå­—ç¬¦[m[41m[m
[32m+[m[32m```[m[41m[m
[32m+[m[41m[m
[32m+[m[32m#### æŽ¨èçš„å‘½åçº¦å®š[m[41m[m
[32m+[m[32m- å…¬å¸/ç»„ç»‡åŸŸåä½¿ç”¨æŒ‡å¯¼[m[41m[m
[32m+[m[32m- æ’ä»¶åç§°æœ€ä½³å®žè·µ[m[41m[m
[32m+[m[32m- ç‰ˆæœ¬æŽ§åˆ¶è¯´æ˜Ž[m[41m[m
[32m+[m[41m[m
[32m+[m[32m#### éªŒè¯è§„åˆ™è¯´æ˜Ž[m[41m[m
[32m+[m[32m- æä¾›äº†å…·ä½“çš„æ­£åˆ™è¡¨è¾¾å¼[m[41m[m
[32m+[m[32m- è§£é‡Šäº†éªŒè¯å¤±è´¥çš„é”™è¯¯ä¿¡æ¯[m[41m[m
[32m+[m[41m[m
[32m+[m[32m## éªŒè¯ç»“æžœ[m[41m[m
[32m+[m[41m[m
[32m+[m[32m### 1. æµ‹è¯•é€šè¿‡[m[41m[m
[32m+[m[32m```bash[m[41m[m
[32m+[m[32mflutter test test/plugins/world_clock_test.dart[m[41m[m
[32m+[m[32m# ç»“æžœ: All tests passed! âœ…[m[41m[m
[32m+[m[32m```[m[41m[m
[32m+[m[41m[m
[32m+[m[32m### 2. ç¼–è¯‘æ£€æŸ¥[m[41m[m
[32m+[m[32m```bash[m[41m[m
[32m+[m[32mflutter analyze lib/plugins/world_clock/[m[41m[m
[32m+[m[32m# ç»“æžœ: æ— é”™è¯¯ï¼Œåªæœ‰ä¸€äº›å¯é€‰çš„ä»£ç é£Žæ ¼å»ºè®®[m[41m[m
[32m+[m[32m```[m[41m[m
[32m+[m[41m[m
[32m+[m[32m### 3. æ’ä»¶æè¿°ç¬¦éªŒè¯[m[41m[m
[32m+[m[32mä¿®å¤åŽçš„æ’ä»¶ID `com.example.worldclock` ç¬¦åˆéªŒè¯è§„åˆ™ï¼Œä¸å†å‡ºçŽ° "Invalid plugin descriptor" é”™è¯¯ã€‚[m[41m[m
[32m+[m[41m[m
[32m+[m[32m## é¢„é˜²æŽªæ–½[m[41m[m
[32m+[m[41m[m
[32m+[m[32m### 1. æ–‡æ¡£æ”¹è¿›[m[41m[m
[32m+[m[32m- åœ¨åˆ›å»ºæ’ä»¶çš„ç¬¬ä¸€æ­¥ä¹‹å‰å°±æ˜Žç¡®è¯´æ˜ŽIDå‘½åè§„èŒƒ[m[41m[m
[32m+[m[32m- æä¾›äº†è¯¦ç»†çš„æ­£ç¡®å’Œé”™è¯¯ç¤ºä¾‹[m[41m[m
[32m+[m[32m- è§£é‡Šäº†éªŒè¯è§„åˆ™å’Œé”™è¯¯ä¿¡æ¯[m[41m[m
[32m+[m[41m[m
[32m+[m[32m### 2. å¼€å‘æŒ‡å¯¼[m[41m[m
[32m+[m[32m- å¼ºè°ƒäº†æ’ä»¶IDåœ¨æ•´ä¸ªç”Ÿå‘½å‘¨æœŸä¸­çš„ä¸å˜æ€§[m[41m[m
[32m+[m[32m- æä¾›äº†é’ˆå¯¹ä¸åŒæƒ…å†µçš„å‘½åå»ºè®®[m[41m[m
[32m+[m[32m- è¯´æ˜Žäº†å¦‚ä½•é¿å…å¸¸è§çš„å‘½åé”™è¯¯[m[41m[m
[32m+[m[41m[m
[32m+[m[32m### 3. æœ€ä½³å®žè·µ[m[41m[m
[32m+[m[32m- æŽ¨èä½¿ç”¨æè¿°æ€§ä½†ç®€æ´çš„åç§°[m[41m[m
[32m+[m[32m- å»ºè®®éµå¾ªåå‘åŸŸåçº¦å®š[m[41m[m
[32m+[m[32m- å¼ºè°ƒäº†ä¸€è‡´æ€§çš„é‡è¦æ€§[m[41m[m
[32m+[m[41m[m
[32m+[m[32m## å¯¹å†…éƒ¨æ’ä»¶å¼€å‘æŒ‡å—çš„æ”¹è¿›[m[41m[m
[32m+[m[41m[m
[32m+[m[32m### æ–°å¢žå†…å®¹[m[41m[m
[32m+[m[32m1. **æ’ä»¶IDå‘½åè§„èŒƒç« èŠ‚** - è¯¦ç»†è¯´æ˜Žäº†æ‰€æœ‰å‘½åè¦æ±‚[m[41m[m
[32m+[m[32m2. **éªŒè¯è§„åˆ™è¯´æ˜Ž** - æä¾›äº†æŠ€æœ¯ç»†èŠ‚å’Œé”™è¯¯æŽ’æŸ¥æŒ‡å¯¼[m[41m[m
[32m+[m[32m3. **ç¤ºä¾‹å¯¹æ¯”** - é€šè¿‡æ­£ç¡®å’Œé”™è¯¯ç¤ºä¾‹å¸®åŠ©ç†è§£[m[41m[m
[32m+[m[41m[m
[32m+[m[32m### ä¿®æ­£å†…å®¹[m[41m[m
[32m+[m[32m1. **ç¤ºä¾‹æ’ä»¶ID** - æ‰€æœ‰ç¤ºä¾‹éƒ½ç¬¦åˆéªŒè¯è§„åˆ™[m[41m[m
[32m+[m[32m2. **ä»£ç ç¤ºä¾‹** - ç¡®ä¿æ–‡æ¡£ä¸­çš„ä»£ç å¯ä»¥ç›´æŽ¥ä½¿ç”¨[m[41m[m
[32m+[m[32m3. **ä¸€è‡´æ€§** - æ–‡æ¡£ä¸Žå®žé™…å®žçŽ°ä¿æŒä¸€è‡´[m[41m[m
[32m+[m[41m[m
[32m+[m[32m## æ€»ç»“[m[41m[m
[32m+[m[41m[m
[32m+[m[32mè¿™æ¬¡ä¿®å¤ä¸ä»…è§£å†³äº†ä¸–ç•Œæ—¶é’Ÿæ’ä»¶çš„å…·ä½“é—®é¢˜ï¼Œè¿˜å‘çŽ°å¹¶ä¿®æ­£äº†æ–‡æ¡£ä¸Žå®žçŽ°ä¹‹é—´çš„ä¸ä¸€è‡´æ€§ã€‚é€šè¿‡å¢žå¼ºæ–‡æ¡£è¯´æ˜Žï¼Œå¯ä»¥å¸®åŠ©æœªæ¥çš„å¼€å‘è€…é¿å…ç±»ä¼¼çš„é—®é¢˜ã€‚[m[41m[m
[32m+[m[41m[m
[32m+[m[32m**å…³é”®æ”¹è¿›ï¼š**[m[41m[m
[32m+[m[32m- âœ… ä¿®å¤äº†æ’ä»¶IDéªŒè¯é—®é¢˜[m[41m[m
[32m+[m[32m- âœ… ç»Ÿä¸€äº†æ–‡æ¡£ä¸Žå®žçŽ°[m[41m[m
[32m+[m[32m- âœ… å¢žå¼ºäº†å¼€å‘æŒ‡å—çš„å®Œæ•´æ€§[m[41m[m
[32m+[m[32m- âœ… æä¾›äº†æ¸…æ™°çš„å‘½åè§„èŒƒ[m[41m[m
[32m+[m[32m- âœ… åŒ…å«äº†é”™è¯¯é¢„é˜²æŽªæ–½[m[41m[m
[32m+[m[41m[m
[32m+[m[32mçŽ°åœ¨å¼€å‘è€…å¯ä»¥æ ¹æ®æ›´æ–°åŽçš„æŒ‡å—åˆ›å»ºç¬¦åˆè§„èŒƒçš„æ’ä»¶ï¼Œé¿å…é‡åˆ° "Invalid plugin descriptor" é”™è¯¯ã€‚[m
\ No newline at end of file[m
[1mdiff --git a/WORLD_CLOCK_IMPLEMENTATION.md b/WORLD_CLOCK_IMPLEMENTATION.md[m
[1mnew file mode 100644[m
[1mindex 0000000..28c384a[m
[1m--- /dev/null[m
[1m+++ b/WORLD_CLOCK_IMPLEMENTATION.md[m
[36m@@ -0,0 +1,166 @@[m
[32m+[m[32m# ä¸–ç•Œæ—¶é’Ÿæ’ä»¶å®žçŽ°æ€»ç»“[m[41m[m
[32m+[m[41m[m
[32m+[m[32m## å®žçŽ°æ¦‚è¿°[m[41m[m
[32m+[m[41m[m
[32m+[m[32måŸºäºŽ `docs/guides/internal-plugin-development.md` æŒ‡å—ï¼Œæˆ‘æˆåŠŸå®žçŽ°äº†ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„ä¸–ç•Œæ—¶é’Ÿæ’ä»¶ï¼Œå…·å¤‡ä»¥ä¸‹ç‰¹æ€§ï¼š[m[41m[m
[32m+[m[41m[m
[32m+[m[32m### âœ… å·²å®žçŽ°åŠŸèƒ½[m[41m[m
[32m+[m[41m[m
[32m+[m[32m#### ðŸŒ ä¸–ç•Œæ—¶é’Ÿæ ¸å¿ƒåŠŸèƒ½[m[41m[m
[32m+[m[32m- **å¤šæ—¶åŒºæ˜¾ç¤º**: æ”¯æŒåŒæ—¶æ˜¾ç¤ºå¤šä¸ªåŸŽå¸‚çš„æ—¶é—´[m[41m[m
[32m+[m[32m- **é»˜è®¤åŒ—äº¬æ—¶é—´**: é¢„è®¾åŒ—äº¬æ—¶é—´ä½œä¸ºé»˜è®¤æ—¶é’Ÿï¼Œä¸å¯åˆ é™¤[m[41m[m
[32m+[m[32m- **å®žæ—¶æ›´æ–°**: æ¯ç§’è‡ªåŠ¨æ›´æ–°æ—¶é—´æ˜¾ç¤º[m[41m[m
[32m+[m[32m- **é¢„å®šä¹‰æ—¶åŒº**: å†…ç½®10ä¸ªå¸¸ç”¨æ—¶åŒºï¼ˆåŒ—äº¬ã€ä¸œäº¬ã€é¦–å°”ã€æ–°åŠ å¡ã€æ‚‰å°¼ã€ä¼¦æ•¦ã€å·´é»Žã€çº½çº¦ã€æ´›æ‰çŸ¶ã€èŠåŠ å“¥ï¼‰[m[41m[m
[32m+[m[32m- **è‡ªå®šä¹‰æ·»åŠ **: æ”¯æŒç”¨æˆ·æ·»åŠ è‡ªå®šä¹‰åŸŽå¸‚å’Œæ—¶åŒº[m[41m[m
[32m+[m[32m- **åˆ é™¤ç®¡ç†**: æ”¯æŒåˆ é™¤éžé»˜è®¤æ—¶é’Ÿ[m[41m[m
[32m+[m[41m[m
[32m+[m[32m#### â° å€’è®¡æ—¶æé†’åŠŸèƒ½[m[41m[m
[32m+[m[32m- **çµæ´»æ—¶é—´è®¾ç½®**: æ”¯æŒå°æ—¶ã€åˆ†é’Ÿã€ç§’çš„ä»»æ„ç»„åˆ[m[41m[m
[32m+[m[32m- **è‡ªå®šä¹‰æ ‡é¢˜**: ä¸ºæ¯ä¸ªå€’è®¡æ—¶è®¾ç½®ä¸ªæ€§åŒ–æé†’å†…å®¹[m[41m[m
[32m+[m[32m- **è§†è§‰åé¦ˆ**:[m[41m [m
[32m+[m[32m  - åœ†å½¢è¿›åº¦æŒ‡ç¤ºå™¨æ˜¾ç¤ºå‰©ä½™æ—¶é—´[m[41m[m
[32m+[m[32m  - å³å°†å®Œæˆæ—¶çš„è„‰å†²åŠ¨ç”»æ•ˆæžœ[m[41m[m
[32m+[m[32m  - ä¸åŒçŠ¶æ€çš„é¢œè‰²åŒºåˆ†ï¼ˆæ­£å¸¸/å³å°†å®Œæˆ/å·²å®Œæˆï¼‰[m[41m[m
[32m+[m[32m- **å®Œæˆé€šçŸ¥**: å€’è®¡æ—¶ç»“æŸæ—¶è‡ªåŠ¨å‘é€ç³»ç»Ÿé€šçŸ¥[m[41m[m
[32m+[m[32m- **çŠ¶æ€ç®¡ç†**: è‡ªåŠ¨æ ‡è®°å’Œæ˜¾ç¤ºå·²å®Œæˆçš„å€’è®¡æ—¶[m[41m[m
[32m+[m[41m[m
[32m+[m[32m#### ðŸŽ¨ ç”¨æˆ·ç•Œé¢è®¾è®¡[m[41m[m
[32m+[m[32m- **Material Design**: éµå¾ªMaterial Design 3è®¾è®¡è§„èŒƒ[m[41m[m
[32m+[m[32m- **å“åº”å¼å¸ƒå±€**: é€‚é…ä¸åŒå±å¹•å°ºå¯¸[m[41m[m
[32m+[m[32m- **åŠ¨ç”»æ•ˆæžœ**: æµç•…çš„è¿‡æ¸¡åŠ¨ç”»å’ŒçŠ¶æ€å˜åŒ–[m[41m[m
[32m+[m[32m- **ç›´è§‚æ“ä½œ**: ç®€å•æ˜“ç”¨çš„æ·»åŠ å’Œåˆ é™¤åŠŸèƒ½[m[41m[m
[32m+[m[32m- **å¤šç§æ˜¾ç¤ºæ¨¡å¼**: æ ‡å‡†å¡ç‰‡ã€ç´§å‡‘åˆ—è¡¨ã€å¤§åž‹æ—¶é’Ÿæ˜¾ç¤º[m[41m[m
[32m+[m[41m[m
[32m+[m[32m#### ðŸŒ å›½é™…åŒ–æ”¯æŒ[m[41m[m
[32m+[m[32m- **ä¸­æ–‡ (zh_CN)**: é»˜è®¤è¯­è¨€ï¼Œå®Œæ•´ç¿»è¯‘[m[41m[m
[32m+[m[32m- **è‹±æ–‡ (en_US)**: å®Œæ•´è‹±æ–‡ç¿»è¯‘æ”¯æŒ[m[41m[m
[32m+[m[32m- **æœ¬åœ°åŒ–æ–‡æœ¬**: æ‰€æœ‰ç”¨æˆ·ç•Œé¢æ–‡æœ¬éƒ½æ”¯æŒå›½é™…åŒ–[m[41m[m
[32m+[m[41m[m
[32m+[m[32m#### ðŸ’¾ æ•°æ®æŒä¹…åŒ–[m[41m[m
[32m+[m[32m- **çŠ¶æ€ä¿å­˜**: è‡ªåŠ¨ä¿å­˜ç”¨æˆ·æ·»åŠ çš„æ—¶é’Ÿå’Œå€’è®¡æ—¶[m[41m[m
[32m+[m[32m- **çŠ¶æ€æ¢å¤**: åº”ç”¨é‡å¯åŽè‡ªåŠ¨æ¢å¤ä¹‹å‰çš„è®¾ç½®[m[41m[m
[32m+[m[32m- **æ’ä»¶ç”Ÿå‘½å‘¨æœŸ**: å®Œæ•´çš„åˆå§‹åŒ–ã€æš‚åœã€æ¢å¤ã€æ¸…ç†æµç¨‹[m[41m[m
[32m+[m[41m[m
[32m+[m[32m## æŠ€æœ¯æž¶æž„[m[41m[m
[32m+[m[41m[m
[32m+[m[32m### ðŸ“ æ–‡ä»¶ç»“æž„[m[41m[m
[32m+[m[32m```[m[41m[m
[32m+[m[32mlib/plugins/world_clock/[m[41m[m
[32m+[m[32mâ”œâ”€â”€ world_clock_plugin.dart          # ä¸»æ’ä»¶ç±»ï¼Œå®žçŽ°IPluginæŽ¥å£[m[41m[m
[32m+[m[32mâ”œâ”€â”€ world_clock_plugin_factory.dart  # æ’ä»¶å·¥åŽ‚ï¼Œè´Ÿè´£åˆ›å»ºå®žä¾‹å’Œæè¿°ç¬¦[m[41m[m
[32m+[m[32mâ”œâ”€â”€ models/[m[41m[m
[32m+[m[32mâ”‚   â””â”€â”€ world_clock_models.dart      # æ•°æ®æ¨¡åž‹ï¼ˆWorldClockItem, CountdownTimer, TimeZoneInfoï¼‰[m[41m[m
[32m+[m[32mâ”œâ”€â”€ widgets/[m[41m[m
[32m+[m[32mâ”‚   â”œâ”€â”€ world_clock_widget.dart      # æ—¶é’Ÿæ˜¾ç¤ºç»„ä»¶ï¼ˆæ ‡å‡†ã€ç´§å‡‘ã€å¤§åž‹ï¼‰[m[41m[m
[32m+[m[32mâ”‚   â””â”€â”€ countdown_timer_widget.dart  # å€’è®¡æ—¶ç»„ä»¶ï¼ˆæ ‡å‡†ã€ç´§å‡‘ï¼‰[m[41m[m
[32m+[m[32mâ””â”€â”€ README.md                        # æ’ä»¶æ–‡æ¡£[m[41m[m
[32m+[m[32m```[m[41m[m
[32m+[m[41m[m
[32m+[m[32m### ðŸ”§ æ ¸å¿ƒç»„ä»¶[m[41m[m
[32m+[m[41m[m
[32m+[m[32m#### 1. WorldClockPlugin (ä¸»æ’ä»¶ç±»)[m[41m[m
[32m+[m[32m- å®žçŽ° `IPlugin` æŽ¥å£çš„æ‰€æœ‰æ–¹æ³•[m[41m[m
[32m+[m[32m- ç®¡ç†æ’ä»¶ç”Ÿå‘½å‘¨æœŸï¼ˆåˆå§‹åŒ–ã€çŠ¶æ€å˜åŒ–ã€æ¸…ç†ï¼‰[m[41m[m
[32m+[m[32m- å¤„ç†å®šæ—¶å™¨æ›´æ–°å’Œæ•°æ®æŒä¹…åŒ–[m[41m[m
[32m+[m[32m- æä¾›å®Œæ•´çš„ç”¨æˆ·ç•Œé¢[m[41m[m
[32m+[m[41m[m
[32m+[m[32m#### 2. æ•°æ®æ¨¡åž‹[m[41m[m
[32m+[m[32m- **WorldClockItem**: ä¸–ç•Œæ—¶é’Ÿæ•°æ®æ¨¡åž‹ï¼ŒåŒ…å«åŸŽå¸‚åã€æ—¶åŒºã€æ ¼å¼åŒ–æ—¶é—´ç­‰[m[41m[m
[32m+[m[32m- **CountdownTimer**: å€’è®¡æ—¶å®šæ—¶å™¨æ¨¡åž‹ï¼ŒåŒ…å«æ ‡é¢˜ã€ç»“æŸæ—¶é—´ã€å®ŒæˆçŠ¶æ€ç­‰[m[41m[m
[32m+[m[32m- **TimeZoneInfo**: æ—¶åŒºä¿¡æ¯æ¨¡åž‹ï¼Œé¢„å®šä¹‰å¸¸ç”¨æ—¶åŒºæ•°æ®[m[41m[m
[32m+[m[41m[m
[32m+[m[32m#### 3. UIç»„ä»¶[m[41m[m
[32m+[m[32m- **WorldClockWidget**: æ—¶é’Ÿæ˜¾ç¤ºç»„ä»¶ï¼Œæ”¯æŒå¤šç§æ˜¾ç¤ºæ¨¡å¼[m[41m[m
[32m+[m[32m- **CountdownTimerWidget**: å€’è®¡æ—¶æ˜¾ç¤ºç»„ä»¶ï¼ŒåŒ…å«åŠ¨ç”»å’Œè¿›åº¦æŒ‡ç¤º[m[41m[m
[32m+[m[41m[m
[32m+[m[32m### ðŸ”Œ æ’ä»¶æ³¨å†Œ[m[41m[m
[32m+[m[32må·²æˆåŠŸæ³¨å†Œåˆ° `ExamplePluginRegistry`ï¼š[m[41m[m
[32m+[m[32m```dart[m[41m[m
[32m+[m[32m'com.example.world_clock': PluginFactory([m[41m[m
[32m+[m[32m  createPlugin: WorldClockPluginFactory.createPlugin,[m[41m[m
[32m+[m[32m  getDescriptor: WorldClockPluginFactory.getDescriptor,[m[41m[m
[32m+[m[32m),[m[41m[m
[32m+[m[32m```[m[41m[m
[32m+[m[41m[m
[32m+[m[32m### ðŸ§ª æµ‹è¯•è¦†ç›–[m[41m[m
[32m+[m[32måˆ›å»ºäº†å®Œæ•´çš„å•å…ƒæµ‹è¯• `test/plugins/world_clock_test.dart`ï¼š[m[41m[m
[32m+[m[32m- æ’ä»¶åŸºæœ¬å±žæ€§æµ‹è¯•[m[41m[m
[32m+[m[32m- æ’ä»¶ç”Ÿå‘½å‘¨æœŸæµ‹è¯•[m[41m[m
[32m+[m[32m- æ•°æ®æ¨¡åž‹åºåˆ—åŒ–/ååºåˆ—åŒ–æµ‹è¯•[m[41m[m
[32m+[m[32m- æ—¶é—´è®¡ç®—å’Œæ ¼å¼åŒ–æµ‹è¯•[m[41m[m
[32m+[m[32m- æ—¶åŒºä¿¡æ¯æŸ¥æ‰¾æµ‹è¯•[m[41m[m
[32m+[m[41m[m
[32m+[m[32m## æƒé™è¦æ±‚[m[41m[m
[32m+[m[41m[m
[32m+[m[32mæ’ä»¶è¯·æ±‚ä»¥ä¸‹æƒé™ï¼š[m[41m[m
[32m+[m[32m- **platformStorage**: ç”¨äºŽä¿å­˜æ—¶é’Ÿå’Œå€’è®¡æ—¶è®¾ç½®[m[41m[m
[32m+[m[32m- **systemNotifications**: ç”¨äºŽå€’è®¡æ—¶å®Œæˆæé†’[m[41m[m
[32m+[m[32m- **platformServices**: ç”¨äºŽè®¿é—®å¹³å°æœåŠ¡[m[41m[m
[32m+[m[41m[m
[32m+[m[32m## ä½¿ç”¨æ–¹æ³•[m[41m[m
[32m+[m[41m[m
[32m+[m[32m### å¯åŠ¨æ’ä»¶[m[41m[m
[32m+[m[32m1. åœ¨æ’ä»¶ç®¡ç†ç•Œé¢æ‰¾åˆ°"ä¸–ç•Œæ—¶é’Ÿ"[m[41m[m
[32m+[m[32m2. ç‚¹å‡»"å¯åŠ¨"æŒ‰é’®[m[41m[m
[32m+[m[32m3. æ’ä»¶å°†æ˜¾ç¤ºé»˜è®¤çš„åŒ—äº¬æ—¶é—´[m[41m[m
[32m+[m[41m[m
[32m+[m[32m### æ·»åŠ ä¸–ç•Œæ—¶é’Ÿ[m[41m[m
[32m+[m[32m1. ç‚¹å‡»å³ä¸Šè§’çš„"+"æŒ‰é’®[m[41m[m
[32m+[m[32m2. é€‰æ‹©"æ·»åŠ æ—¶é’Ÿ"[m[41m[m
[32m+[m[32m3. è¾“å…¥åŸŽå¸‚åç§°å¹¶é€‰æ‹©æ—¶åŒº[m[41m[m
[32m+[m[32m4. ç‚¹å‡»"æ·»åŠ "å®Œæˆ[m[41m[m
[32m+[m[41m[m
[32m+[m[32m### æ·»åŠ å€’è®¡æ—¶[m[41m[m
[32m+[m[32m1. ç‚¹å‡»å³ä¸Šè§’çš„é—¹é’Ÿå›¾æ ‡[m[41m[m
[32m+[m[32m2. è¾“å…¥å€’è®¡æ—¶æ ‡é¢˜[m[41m[m
[32m+[m[32m3. è®¾ç½®å°æ—¶ã€åˆ†é’Ÿã€ç§’[m[41m[m
[32m+[m[32m4. ç‚¹å‡»"æ·»åŠ "å¼€å§‹å€’è®¡æ—¶[m[41m[m
[32m+[m[41m[m
[32m+[m[32m## æŠ€æœ¯ç‰¹ç‚¹[m[41m[m
[32m+[m[41m[m
[32m+[m[32m### âœ… ç¬¦åˆæ’ä»¶å¼€å‘æŒ‡å—[m[41m[m
[32m+[m[32m- å®Œå…¨æŒ‰ç…§ `internal-plugin-development.md` æŒ‡å—å®žçŽ°[m[41m[m
[32m+[m[32m- éµå¾ªæ ‡å‡†çš„æ’ä»¶æž¶æž„å’Œå‘½åè§„èŒƒ[m[41m[m
[32m+[m[32m- å®žçŽ°äº†æ‰€æœ‰å¿…éœ€çš„æŽ¥å£æ–¹æ³•[m[41m[m
[32m+[m[32m- åŒ…å«å®Œæ•´çš„é”™è¯¯å¤„ç†å’Œèµ„æºç®¡ç†[m[41m[m
[32m+[m[41m[m
[32m+[m[32m### âœ… é«˜è´¨é‡ä»£ç [m[41m[m
[32m+[m[32m- æ¸…æ™°çš„ä»£ç ç»“æž„å’Œæ³¨é‡Š[m[41m[m
[32m+[m[32m- å®Œæ•´çš„ç±»åž‹å®‰å…¨[m[41m[m
[32m+[m[32m- é€‚å½“çš„å¼‚å¸¸å¤„ç†[m[41m[m
[32m+[m[32m- å†…å­˜æ³„æ¼é˜²æŠ¤[m[41m[m
[32m+[m[41m[m
[32m+[m[32m### âœ… ç”¨æˆ·ä½“éªŒä¼˜åŒ–[m[41m[m
[32m+[m[32m- ç›´è§‚çš„ç”¨æˆ·ç•Œé¢[m[41m[m
[32m+[m[32m- æµç•…çš„åŠ¨ç”»æ•ˆæžœ[m[41m[m
[32m+[m[32m- åŠæ—¶çš„çŠ¶æ€åé¦ˆ[m[41m[m
[32m+[m[32m- å®Œæ•´çš„å›½é™…åŒ–æ”¯æŒ[m[41m[m
[32m+[m[41m[m
[32m+[m[32m## æŠ€æœ¯é™åˆ¶è¯´æ˜Ž[m[41m[m
[32m+[m[41m[m
[32m+[m[32m1. **æ—¶åŒºå¤„ç†**: å½“å‰ä½¿ç”¨ç®€åŒ–çš„UTCåç§»è®¡ç®—ï¼Œæœªé›†æˆä¸“ä¸šçš„æ—¶åŒºåº“ï¼ˆå¦‚timezoneåŒ…ï¼‰[m[41m[m
[32m+[m[32m2. **å¤ä»¤æ—¶**: æœªå¤„ç†å¤ä»¤æ—¶å˜åŒ–ï¼Œä½¿ç”¨å›ºå®šåç§»é‡[m[41m[m
[32m+[m[32m3. **æœ€å¤§æ•°é‡**: å»ºè®®ä¸è¶…è¿‡10ä¸ªæ—¶é’Ÿå’Œ20ä¸ªå€’è®¡æ—¶ä»¥ä¿è¯æ€§èƒ½[m[41m[m
[32m+[m[41m[m
[32m+[m[32m## æœªæ¥æ”¹è¿›è®¡åˆ’[m[41m[m
[32m+[m[41m[m
[32m+[m[32m1. **ç²¾ç¡®æ—¶åŒºå¤„ç†**: é›†æˆtimezoneåŒ…å¤„ç†å¤ä»¤æ—¶[m[41m[m
[32m+[m[32m2. **æ›´å¤šæ—¶åŒº**: æ‰©å±•é¢„å®šä¹‰æ—¶åŒºåˆ—è¡¨[m[41m[m
[32m+[m[32m3. **ä¸»é¢˜è‡ªå®šä¹‰**: æ”¯æŒæ—¶é’Ÿå¤–è§‚è‡ªå®šä¹‰[m[41m[m
[32m+[m[32m4. **å£°éŸ³æé†’**: ä¸ºå€’è®¡æ—¶æ·»åŠ å£°éŸ³æé†’é€‰é¡¹[m[41m[m
[32m+[m[32m5. **æ¡Œé¢å°éƒ¨ä»¶**: æ”¯æŒæ¡Œé¢å°éƒ¨ä»¶æ˜¾ç¤º[m[41m[m
[32m+[m[41m[m
[32m+[m[32m## æ€»ç»“[m[41m[m
[32m+[m[41m[m
[32m+[m[32mä¸–ç•Œæ—¶é’Ÿæ’ä»¶çš„å®žçŽ°å®Œå…¨åŸºäºŽå†…éƒ¨æ’ä»¶å¼€å‘æŒ‡å—ï¼Œå±•ç¤ºäº†å¦‚ä½•ï¼š[m[41m[m
[32m+[m[41m[m
[32m+[m[32m1. **æ­£ç¡®å®žçŽ°IPluginæŽ¥å£**: åŒ…å«æ‰€æœ‰å¿…éœ€æ–¹æ³•å’Œç”Ÿå‘½å‘¨æœŸç®¡ç†[m[41m[m
[32m+[m[32m2. **åˆ›å»ºæ’ä»¶å·¥åŽ‚**: æä¾›æ ‡å‡†çš„æ’ä»¶åˆ›å»ºå’Œæè¿°ç¬¦[m[41m[m
[32m+[m[32m3. **è®¾è®¡æ•°æ®æ¨¡åž‹**: åˆ›å»ºå¯åºåˆ—åŒ–çš„æ•°æ®ç»“æž„[m[41m[m
[32m+[m[32m4. **æž„å»ºç”¨æˆ·ç•Œé¢**: ä½¿ç”¨Flutterç»„ä»¶åˆ›å»ºç¾Žè§‚çš„UI[m[41m[m
[32m+[m[32m5. **å¤„ç†çŠ¶æ€ç®¡ç†**: å®žçŽ°æ•°æ®æŒä¹…åŒ–å’ŒçŠ¶æ€æ¢å¤[m[41m[m
[32m+[m[32m6. **æ·»åŠ å›½é™…åŒ–**: æ”¯æŒå¤šè¯­è¨€ç•Œé¢[m[41m[m
[32m+[m[32m7. **ç¼–å†™æµ‹è¯•**: åˆ›å»ºå…¨é¢çš„å•å…ƒæµ‹è¯•[m[41m[m
[32m+[m[32m8. **æ³¨å†Œæ’ä»¶**: æ­£ç¡®æ³¨å†Œåˆ°æ’ä»¶ç³»ç»Ÿ[m[41m[m
[32m+[m[41m[m
[32m+[m[32mè¿™ä¸ªå®žçŽ°è¯æ˜Žäº†ä»…å‚è€ƒ `internal-plugin-development.md` æŒ‡å—å°±èƒ½åˆ›å»ºåŠŸèƒ½å®Œæ•´ã€è´¨é‡ä¼˜ç§€çš„å†…éƒ¨æ’ä»¶ã€‚æ’ä»¶å·²å‡†å¤‡å¥½é›†æˆåˆ°ä¸»åº”ç”¨ä¸­ä½¿ç”¨ã€‚[m
\ No newline at end of file[m
[1mdiff --git a/docs/guides/internal-plugin-development.md b/docs/guides/internal-plugin-development.md[m
[1mindex abd5866..050d058 100644[m
[1m--- a/docs/guides/internal-plugin-development.md[m
[1m+++ b/docs/guides/internal-plugin-development.md[m
[36m@@ -81,6 +81,50 @@[m [mlib/[m
 [m
 ## åˆ›å»ºæ–°æ’ä»¶[m
 [m
[32m+[m[32m### é‡è¦ï¼šæ’ä»¶IDå‘½åè§„èŒƒ[m[41m[m
[32m+[m[41m[m
[32m+[m[32måœ¨åˆ›å»ºæ’ä»¶ä¹‹å‰ï¼Œè¯·åŠ¡å¿…äº†è§£æ’ä»¶IDçš„å‘½åè§„èŒƒï¼š[m[41m[m
[32m+[m[41m[m
[32m+[m[32m#### æ’ä»¶IDæ ¼å¼è¦æ±‚[m[41m[m
[32m+[m[32m- **æ ¼å¼**: åå‘åŸŸåè®°æ³• (Reverse Domain Notation)[m[41m[m
[32m+[m[32m- **å­—ç¬¦é™åˆ¶**: åªèƒ½åŒ…å«å°å†™å­—æ¯ (a-z) å’Œæ•°å­— (0-9)[m[41m[m
[32m+[m[32m- **åˆ†éš”ç¬¦**: åªèƒ½ä½¿ç”¨ç‚¹å· (.) åˆ†éš”[m[41m[m
[32m+[m[32m- **ç¦æ­¢å­—ç¬¦**: ä¸èƒ½åŒ…å«ä¸‹åˆ’çº¿ (_)ã€è¿žå­—ç¬¦ (-)ã€å¤§å†™å­—æ¯æˆ–å…¶ä»–ç‰¹æ®Šå­—ç¬¦[m[41m[m
[32m+[m[41m[m
[32m+[m[32m#### æœ‰æ•ˆçš„æ’ä»¶IDç¤ºä¾‹[m[41m[m
[32m+[m[32m```[m[41m[m
[32m+[m[32mâœ… æ­£ç¡®ç¤ºä¾‹:[m[41m[m
[32m+[m[32m- com.example.calculator[m[41m[m
[32m+[m[32m- com.mycompany.texteditor[m[41m  [m
[32m+[m[32m- org.opensource.musicplayer[m[41m[m
[32m+[m[32m- io.github.username.toolname[m[41m[m
[32m+[m[41m[m
[32m+[m[32mâŒ é”™è¯¯ç¤ºä¾‹:[m[41m[m
[32m+[m[32m- com.example.my_plugin        // åŒ…å«ä¸‹åˆ’çº¿[m[41m[m
[32m+[m[32m- com.example.My-Plugin        // åŒ…å«å¤§å†™å­—æ¯å’Œè¿žå­—ç¬¦[m[41m[m
[32m+[m[32m- com.example.plugin-name      // åŒ…å«è¿žå­—ç¬¦[m[41m[m
[32m+[m[32m- com.Example.Calculator       // åŒ…å«å¤§å†™å­—æ¯[m[41m[m
[32m+[m[32m```[m[41m[m
[32m+[m[41m[m
[32m+[m[32m#### æŽ¨èçš„å‘½åçº¦å®š[m[41m[m
[32m+[m[32m1. **å…¬å¸/ç»„ç»‡åŸŸå**: ä½¿ç”¨æ‚¨çš„åŸŸååå‘å½¢å¼ä½œä¸ºå‰ç¼€[m[41m[m
[32m+[m[32m   - å¦‚æžœæ‚¨çš„åŸŸåæ˜¯ `mycompany.com`ï¼Œä½¿ç”¨ `com.mycompany`[m[41m[m
[32m+[m[32m   - å¦‚æžœæ‚¨æ²¡æœ‰åŸŸåï¼Œå¯ä»¥ä½¿ç”¨ `com.yourname` æˆ– `io.github.username`[m[41m[m
[32m+[m[41m[m
[32m+[m[32m2. **æ’ä»¶åç§°**: ä½¿ç”¨æè¿°æ€§çš„åç§°ï¼Œé¿å…è¿‡é•¿[m[41m[m
[32m+[m[32m   - å¥½çš„ä¾‹å­: `calculator`, `texteditor`, `worldclock`[m[41m[m
[32m+[m[32m   - é¿å…: `myawesomesupercalculatorapp`[m[41m[m
[32m+[m[41m[m
[32m+[m[32m3. **ç‰ˆæœ¬æŽ§åˆ¶**: æ’ä»¶IDåœ¨æ•´ä¸ªç”Ÿå‘½å‘¨æœŸä¸­ä¿æŒä¸å˜ï¼Œç‰ˆæœ¬é€šè¿‡ `version` å­—æ®µç®¡ç†[m[41m[m
[32m+[m[41m[m
[32m+[m[32m#### éªŒè¯è§„åˆ™[m[41m[m
[32m+[m[32mç³»ç»Ÿä¼šè‡ªåŠ¨éªŒè¯æ’ä»¶IDæ˜¯å¦ç¬¦åˆä»¥ä¸‹æ­£åˆ™è¡¨è¾¾å¼ï¼š[m[41m[m
[32m+[m[32m```regex[m[41m[m
[32m+[m[32m^[a-z0-9]+(\.[a-z0-9]+)*$[m[41m[m
[32m+[m[32m```[m[41m[m
[32m+[m[41m[m
[32m+[m[32må¦‚æžœæ’ä»¶IDä¸ç¬¦åˆè§„èŒƒï¼Œä¼šå‡ºçŽ° "Invalid plugin descriptor" é”™è¯¯ã€‚[m[41m[m
[32m+[m[41m[m
 ### æ­¥éª¤1: åˆ›å»ºæ’ä»¶ç›®å½•ç»“æž„[m
 [m
 ```bash[m
[36m@@ -110,7 +154,7 @@[m [mclass MyAwesomePluginPlugin implements IPlugin {[m
   bool _isInitialized = false;[m
 [m
   @override[m
[31m-  String get id => 'com.mycompany.my_awesome_plugin';[m
[32m+[m[32m  String get id => 'com.mycompany.myawesomeplugin';[m[41m[m
 [m
   @override[m
   String get name => 'My Awesome Plugin';[m
[36m@@ -373,7 +417,7 @@[m [mclass MyAwesomePluginPluginFactory {[m
   /// èŽ·å–æ’ä»¶æè¿°ç¬¦[m
   static PluginDescriptor getDescriptor() {[m
     return const PluginDescriptor([m
[31m-      id: 'com.mycompany.my_awesome_plugin',[m
[32m+[m[32m      id: 'com.mycompany.myawesomeplugin',[m[41m[m
       name: 'My Awesome Plugin',[m
       version: '1.0.0',[m
       type: PluginType.tool,[m
[36m@@ -682,7 +726,7 @@[m [mvoid main() {[m
     });[m
 [m
     test('Plugin properties should be correct', () {[m
[31m-      expect(plugin.id, 'com.mycompany.my_awesome_plugin');[m
[32m+[m[32m      expect(plugin.id, 'com.mycompany.myawesomeplugin');[m[41m[m
       expect(plugin.name, 'My Awesome Plugin');[m
       expect(plugin.version, '1.0.0');[m
       expect(plugin.type, PluginType.tool);[m
[36m@@ -833,7 +877,7 @@[m [mclass ExamplePluginRegistry {[m
       getDescriptor: NoteTakingPluginFactory.getDescriptor,[m
     ),[m
     // æ·»åŠ æ–°æ’ä»¶[m
[31m-    'com.mycompany.my_awesome_plugin': PluginFactory([m
[32m+[m[32m    'com.mycompany.myawesomeplugin': PluginFactory([m[41m[m
       createPlugin: MyAwesomePluginPluginFactory.createPlugin,[m
       getDescriptor: MyAwesomePluginPluginFactory.getDescriptor,[m
     ),[m
[1mdiff --git a/lib/l10n/app_en.arb b/lib/l10n/app_en.arb[m
[1mindex e7f7954..600dfd9 100644[m
[1m--- a/lib/l10n/app_en.arb[m
[1m+++ b/lib/l10n/app_en.arb[m
[36m@@ -208,6 +208,42 @@[m
   "time_minutesAgo": "{minutes}m ago",[m
   "time_justNow": "Just now",[m
 [m
[32m+[m[32m  "worldClock_title": "World Clock",[m[41m[m
[32m+[m[32m  "worldClock_addClock": "Add Clock",[m[41m[m
[32m+[m[32m  "worldClock_addCountdown": "Add Countdown",[m[41m[m
[32m+[m[32m  "worldClock_settings": "Settings",[m[41m[m
[32m+[m[32m  "worldClock_noClocks": "No clocks available, tap the top right to add",[m[41m[m
[32m+[m[32m  "worldClock_noCountdowns": "No countdowns available, tap the top right to add",[m[41m[m
[32m+[m[32m  "worldClock_defaultClock": "Default",[m[41m[m
[32m+[m[32m  "worldClock_deleteClock": "Delete Clock",[m[41m[m
[32m+[m[32m  "worldClock_deleteCountdown": "Delete Countdown",[m[41m[m
[32m+[m[32m  "worldClock_confirmDelete": "Confirm Delete",[m[41m[m
[32m+[m[32m  "worldClock_confirmDeleteClock": "Are you sure you want to delete the clock for {cityName}?",[m[41m[m
[32m+[m[32m  "worldClock_confirmDeleteCountdown": "Are you sure you want to delete countdown \"{title}\"?",[m[41m[m
[32m+[m[32m  "worldClock_addClockTitle": "Add Clock",[m[41m[m
[32m+[m[32m  "worldClock_cityName": "City Name",[m[41m[m
[32m+[m[32m  "worldClock_cityNameHint": "Enter city name",[m[41m[m
[32m+[m[32m  "worldClock_timeZone": "Time Zone",[m[41m[m
[32m+[m[32m  "worldClock_addCountdownTitle": "Add Countdown",[m[41m[m
[32m+[m[32m  "worldClock_countdownTitle": "Countdown Title",[m[41m[m
[32m+[m[32m  "worldClock_countdownTitleHint": "Enter reminder content",[m[41m[m
[32m+[m[32m  "worldClock_hours": "Hours",[m[41m[m
[32m+[m[32m  "worldClock_minutes": "Minutes",[m[41m[m
[32m+[m[32m  "worldClock_seconds": "Seconds",[m[41m[m
[32m+[m[32m  "worldClock_countdownComplete": "Countdown reminder: {title} time's up!",[m[41m[m
[32m+[m[32m  "worldClock_completed": "Completed",[m[41m[m
[32m+[m[32m  "worldClock_almostComplete": "Almost complete!",[m[41m[m
[32m+[m[32m  "worldClock_remaining": "Remaining {time}",[m[41m[m
[32m+[m[32m  "worldClock_remainingMinutes": "Remaining {minutes} minutes",[m[41m[m
[32m+[m[32m  "worldClock_remainingHours": "Remaining {hours} hours {minutes} minutes",[m[41m[m
[32m+[m[32m  "worldClock_remainingDays": "Remaining {days} days {hours} hours",[m[41m[m
[32m+[m[32m  "worldClock_settingsTitle": "World Clock Settings",[m[41m[m
[32m+[m[32m  "worldClock_settingsDesc": "Settings options will be added in future versions",[m[41m[m
[32m+[m[32m  "worldClock_currentFeatures": "Current features:",[m[41m[m
[32m+[m[32m  "worldClock_featureMultipleTimezones": "â€¢ Display multiple timezone times",[m[41m[m
[32m+[m[32m  "worldClock_featureCountdown": "â€¢ Countdown reminders",[m[41m[m
[32m+[m[32m  "worldClock_featureBeijingDefault": "â€¢ Default Beijing time",[m[41m[m
[32m+[m[41m[m
   "pet_openMainApp": "Open Main App",[m
   "pet_notAvailable": "Not Available",[m
   "pet_settingsTitle": "Desktop Pet Settings",[m
[1mdiff --git a/lib/l10n/app_zh.arb b/lib/l10n/app_zh.arb[m
[1mindex cfca931..59789a0 100644[m
[1m--- a/lib/l10n/app_zh.arb[m
[1m+++ b/lib/l10n/app_zh.arb[m
[36m@@ -393,6 +393,79 @@[m
   },[m
   "time_justNow": "åˆšåˆš",[m
 [m
[32m+[m[32m  "worldClock_title": "ä¸–ç•Œæ—¶é’Ÿ",[m[41m[m
[32m+[m[32m  "worldClock_addClock": "æ·»åŠ æ—¶é’Ÿ",[m[41m[m
[32m+[m[32m  "worldClock_addCountdown": "æ·»åŠ å€’è®¡æ—¶",[m[41m[m
[32m+[m[32m  "worldClock_settings": "è®¾ç½®",[m[41m[m
[32m+[m[32m  "worldClock_noClocks": "æš‚æ— æ—¶é’Ÿï¼Œç‚¹å‡»å³ä¸Šè§’æ·»åŠ ",[m[41m[m
[32m+[m[32m  "worldClock_noCountdowns": "æš‚æ— å€’è®¡æ—¶ï¼Œç‚¹å‡»å³ä¸Šè§’æ·»åŠ ",[m[41m[m
[32m+[m[32m  "worldClock_defaultClock": "é»˜è®¤",[m[41m[m
[32m+[m[32m  "worldClock_deleteClock": "åˆ é™¤æ—¶é’Ÿ",[m[41m[m
[32m+[m[32m  "worldClock_deleteCountdown": "åˆ é™¤å€’è®¡æ—¶",[m[41m[m
[32m+[m[32m  "worldClock_confirmDelete": "ç¡®è®¤åˆ é™¤",[m[41m[m
[32m+[m[32m  "worldClock_confirmDeleteClock": "ç¡®å®šè¦åˆ é™¤ {cityName} çš„æ—¶é’Ÿå—ï¼Ÿ",[m[41m[m
[32m+[m[32m  "@worldClock_confirmDeleteClock": {[m[41m[m
[32m+[m[32m    "placeholders": {[m[41m[m
[32m+[m[32m      "cityName": {"type": "String"}[m[41m[m
[32m+[m[32m    }[m[41m[m
[32m+[m[32m  },[m[41m[m
[32m+[m[32m  "worldClock_confirmDeleteCountdown": "ç¡®å®šè¦åˆ é™¤å€’è®¡æ—¶ \"{title}\" å—ï¼Ÿ",[m[41m[m
[32m+[m[32m  "@worldClock_confirmDeleteCountdown": {[m[41m[m
[32m+[m[32m    "placeholders": {[m[41m[m
[32m+[m[32m      "title": {"type": "String"}[m[41m[m
[32m+[m[32m    }[m[41m[m
[32m+[m[32m  },[m[41m[m
[32m+[m[32m  "worldClock_addClockTitle": "æ·»åŠ æ—¶é’Ÿ",[m[41m[m
[32m+[m[32m  "worldClock_cityName": "åŸŽå¸‚åç§°",[m[41m[m
[32m+[m[32m  "worldClock_cityNameHint": "è¾“å…¥åŸŽå¸‚åç§°",[m[41m[m
[32m+[m[32m  "worldClock_timeZone": "æ—¶åŒº",[m[41m[m
[32m+[m[32m  "worldClock_addCountdownTitle": "æ·»åŠ å€’è®¡æ—¶",[m[41m[m
[32m+[m[32m  "worldClock_countdownTitle": "å€’è®¡æ—¶æ ‡é¢˜",[m[41m[m
[32m+[m[32m  "worldClock_countdownTitleHint": "è¾“å…¥æé†’å†…å®¹",[m[41m[m
[32m+[m[32m  "worldClock_hours": "å°æ—¶",[m[41m[m
[32m+[m[32m  "worldClock_minutes": "åˆ†é’Ÿ",[m[41m[m
[32m+[m[32m  "worldClock_seconds": "ç§’",[m[41m[m
[32m+[m[32m  "worldClock_countdownComplete": "å€’è®¡æ—¶æé†’: {title} æ—¶é—´åˆ°äº†ï¼",[m[41m[m
[32m+[m[32m  "@worldClock_countdownComplete": {[m[41m[m
[32m+[m[32m    "placeholders": {[m[41m[m
[32m+[m[32m      "title": {"type": "String"}[m[41m[m
[32m+[m[32m    }[m[41m[m
[32m+[m[32m  },[m[41m[m
[32m+[m[32m  "worldClock_completed": "å·²å®Œæˆ",[m[41m[m
[32m+[m[32m  "worldClock_almostComplete": "å³å°†å®Œæˆï¼",[m[41m[m
[32m+[m[32m  "worldClock_remaining": "å‰©ä½™ {time}",[m[41m[m
[32m+[m[32m  "@worldClock_remaining": {[m[41m[m
[32m+[m[32m    "placeholders": {[m[41m[m
[32m+[m[32m      "time": {"type": "String"}[m[41m[m
[32m+[m[32m    }[m[41m[m
[32m+[m[32m  },[m[41m[m
[32m+[m[32m  "worldClock_remainingMinutes": "å‰©ä½™ {minutes} åˆ†é’Ÿ",[m[41m[m
[32m+[m[32m  "@worldClock_remainingMinutes": {[m[41m[m
[32m+[m[32m    "placeholders": {[m[41m[m
[32m+[m[32m      "minutes": {"type": "int"}[m[41m[m
[32m+[m[32m    }[m[41m[m
[32m+[m[32m  },[m[41m[m
[32m+[m[32m  "worldClock_remainingHours": "å‰©ä½™ {hours} å°æ—¶ {minutes} åˆ†é’Ÿ",[m[41m[m
[32m+[m[32m  "@worldClock_remainingHours": {[m[41m[m
[32m+[m[32m    "placeholders": {[m[41m[m
[32m+[m[32m      "hours": {"type": "int"},[m[41m[m
[32m+[m[32m      "minutes": {"type": "int"}[m[41m[m
[32m+[m[32m    }[m[41m[m
[32m+[m[32m  },[m[41m[m
[32m+[m[32m  "worldClock_remainingDays": "å‰©ä½™ {days} å¤© {hours} å°æ—¶",[m[41m[m
[32m+[m[32m  "@worldClock_remainingDays": {[m[41m[m
[32m+[m[32m    "placeholders": {[m[41m[m
[32m+[m[32m      "days": {"type": "int"},[m[41m[m
[32m+[m[32m      "hours": {"type": "int"}[m[41m[m
[32m+[m[32m    }[m[41m[m
[32m+[m[32m  },[m[41m[m
[32m+[m[32m  "worldClock_settingsTitle": "ä¸–ç•Œæ—¶é’Ÿè®¾ç½®",[m[41m[m
[32m+[m[32m  "worldClock_settingsDesc": "è®¾ç½®é€‰é¡¹å°†åœ¨åŽç»­ç‰ˆæœ¬ä¸­æ·»åŠ ",[m[41m[m
[32m+[m[32m  "worldClock_currentFeatures": "å½“å‰åŠŸèƒ½ï¼š",[m[41m[m
[32m+[m[32m  "worldClock_featureMultipleTimezones": "â€¢ æ˜¾ç¤ºå¤šä¸ªæ—¶åŒºæ—¶é—´",[m[41m[m
[32m+[m[32m  "worldClock_featureCountdown": "â€¢ å€’è®¡æ—¶æé†’",[m[41m[m
[32m+[m[32m  "worldClock_featureBeijingDefault": "â€¢ é»˜è®¤åŒ—äº¬æ—¶é—´",[m[41m[m
[32m+[m[41m[m
   "pet_openMainApp": "æ‰“å¼€ä¸»åº”ç”¨",[m
   "pet_notAvailable": "ä¸å¯ç”¨",[m
   "pet_openFullApp": "æ‰“å¼€å®Œæ•´åº”ç”¨",[m
[1mdiff --git a/lib/l10n/generated/app_localizations.dart b/lib/l10n/generated/app_localizations.dart[m
[1mindex ab393cf..2f094a5 100644[m
[1m--- a/lib/l10n/generated/app_localizations.dart[m
[1m+++ b/lib/l10n/generated/app_localizations.dart[m
[36m@@ -1262,6 +1262,216 @@[m [mabstract class AppLocalizations {[m
   /// **'åˆšåˆš'**[m
   String get time_justNow;[m
 [m
[32m+[m[32m  /// No description provided for @worldClock_title.[m[41m[m
[32m+[m[32m  ///[m[41m[m
[32m+[m[32m  /// In zh, this message translates to:[m[41m[m
[32m+[m[32m  /// **'ä¸–ç•Œæ—¶é’Ÿ'**[m[41m[m
[32m+[m[32m  String get worldClock_title;[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  /// No description provided for @worldClock_addClock.[m[41m[m
[32m+[m[32m  ///[m[41m[m
[32m+[m[32m  /// In zh, this message translates to:[m[41m[m
[32m+[m[32m  /// **'æ·»åŠ æ—¶é’Ÿ'**[m[41m[m
[32m+[m[32m  String get worldClock_addClock;[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  /// No description provided for @worldClock_addCountdown.[m[41m[m
[32m+[m[32m  ///[m[41m[m
[32m+[m[32m  /// In zh, this message translates to:[m[41m[m
[32m+[m[32m  /// **'æ·»åŠ å€’è®¡æ—¶'**[m[41m[m
[32m+[m[32m  String get worldClock_addCountdown;[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  /// No description provided for @worldClock_settings.[m[41m[m
[32m+[m[32m  ///[m[41m[m
[32m+[m[32m  /// In zh, this message translates to:[m[41m[m
[32m+[m[32m  /// **'è®¾ç½®'**[m[41m[m
[32m+[m[32m  String get worldClock_settings;[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  /// No description provided for @worldClock_noClocks.[m[41m[m
[32m+[m[32m  ///[m[41m[m
[32m+[m[32m  /// In zh, this message translates to:[m[41m[m
[32m+[m[32m  /// **'æš‚æ— æ—¶é’Ÿï¼Œç‚¹å‡»å³ä¸Šè§’æ·»åŠ '**[m[41m[m
[32m+[m[32m  String get worldClock_noClocks;[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  /// No description provided for @worldClock_noCountdowns.[m[41m[m
[32m+[m[32m  ///[m[41m[m
[32m+[m[32m  /// In zh, this message translates to:[m[41m[m
[32m+[m[32m  /// **'æš‚æ— å€’è®¡æ—¶ï¼Œç‚¹å‡»å³ä¸Šè§’æ·»åŠ '**[m[41m[m
[32m+[m[32m  String get worldClock_noCountdowns;[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  /// No description provided for @worldClock_defaultClock.[m[41m[m
[32m+[m[32m  ///[m[41m[m
[32m+[m[32m  /// In zh, this message translates to:[m[41m[m
[32m+[m[32m  /// **'é»˜è®¤'**[m[41m[m
[32m+[m[32m  String get worldClock_defaultClock;[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  /// No description provided for @worldClock_deleteClock.[m[41m[m
[32m+[m[32m  ///[m[41m[m
[32m+[m[32m  /// In zh, this message translates to:[m[41m[m
[32m+[m[32m  /// **'åˆ é™¤æ—¶é’Ÿ'**[m[41m[m
[32m+[m[32m  String get worldClock_deleteClock;[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  /// No description provided for @worldClock_deleteCountdown.[m[41m[m
[32m+[m[32m  ///[m[41m[m
[32m+[m[32m  /// In zh, this message translates to:[m[41m[m
[32m+[m[32m  /// **'åˆ é™¤å€’è®¡æ—¶'**[m[41m[m
[32m+[m[32m  String get worldClock_deleteCountdown;[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  /// No description provided for @worldClock_confirmDelete.[m[41m[m
[32m+[m[32m  ///[m[41m[m
[32m+[m[32m  /// In zh, this message translates to:[m[41m[m
[32m+[m[32m  /// **'ç¡®è®¤åˆ é™¤'**[m[41m[m
[32m+[m[32m  String get worldClock_confirmDelete;[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  /// No description provided for @worldClock_confirmDeleteClock.[m[41m[m
[32m+[m[32m  ///[m[41m[m
[32m+[m[32m  /// In zh, this message translates to:[m[41m[m
[32m+[m[32m  /// **'ç¡®å®šè¦åˆ é™¤ {cityName} çš„æ—¶é’Ÿå—ï¼Ÿ'**[m[41m[m
[32m+[m[32m  String worldClock_confirmDeleteClock(String cityName);[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  /// No description provided for @worldClock_confirmDeleteCountdown.[m[41m[m
[32m+[m[32m  ///[m[41m[m
[32m+[m[32m  /// In zh, this message translates to:[m[41m[m
[32m+[m[32m  /// **'ç¡®å®šè¦åˆ é™¤å€’è®¡æ—¶ \"{title}\" å—ï¼Ÿ'**[m[41m[m
[32m+[m[32m  String worldClock_confirmDeleteCountdown(String title);[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  /// No description provided for @worldClock_addClockTitle.[m[41m[m
[32m+[m[32m  ///[m[41m[m
[32m+[m[32m  /// In zh, this message translates to:[m[41m[m
[32m+[m[32m  /// **'æ·»åŠ æ—¶é’Ÿ'**[m[41m[m
[32m+[m[32m  String get worldClock_addClockTitle;[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  /// No description provided for @worldClock_cityName.[m[41m[m
[32m+[m[32m  ///[m[41m[m
[32m+[m[32m  /// In zh, this message translates to:[m[41m[m
[32m+[m[32m  /// **'åŸŽå¸‚åç§°'**[m[41m[m
[32m+[m[32m  String get worldClock_cityName;[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  /// No description provided for @worldClock_cityNameHint.[m[41m[m
[32m+[m[32m  ///[m[41m[m
[32m+[m[32m  /// In zh, this message translates to:[m[41m[m
[32m+[m[32m  /// **'è¾“å…¥åŸŽå¸‚åç§°'**[m[41m[m
[32m+[m[32m  String get worldClock_cityNameHint;[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  /// No description provided for @worldClock_timeZone.[m[41m[m
[32m+[m[32m  ///[m[41m[m
[32m+[m[32m  /// In zh, this message translates to:[m[41m[m
[32m+[m[32m  /// **'æ—¶åŒº'**[m[41m[m
[32m+[m[32m  String get worldClock_timeZone;[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  /// No description provided for @worldClock_addCountdownTitle.[m[41m[m
[32m+[m[32m  ///[m[41m[m
[32m+[m[32m  /// In zh, this message translates to:[m[41m[m
[32m+[m[32m  /// **'æ·»åŠ å€’è®¡æ—¶'**[m[41m[m
[32m+[m[32m  String get worldClock_addCountdownTitle;[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  /// No description provided for @worldClock_countdownTitle.[m[41m[m
[32m+[m[32m  ///[m[41m[m
[32m+[m[32m  /// In zh, this message translates to:[m[41m[m
[32m+[m[32m  /// **'å€’è®¡æ—¶æ ‡é¢˜'**[m[41m[m
[32m+[m[32m  String get worldClock_countdownTitle;[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  /// No description provided for @worldClock_countdownTitleHint.[m[41m[m
[32m+[m[32m  ///[m[41m[m
[32m+[m[32m  /// In zh, this message translates to:[m[41m[m
[32m+[m[32m  /// **'è¾“å…¥æé†’å†…å®¹'**[m[41m[m
[32m+[m[32m  String get worldClock_countdownTitleHint;[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  /// No description provided for @worldClock_hours.[m[41m[m
[32m+[m[32m  ///[m[41m[m
[32m+[m[32m  /// In zh, this message translates to:[m[41m[m
[32m+[m[32m  /// **'å°æ—¶'**[m[41m[m
[32m+[m[32m  String get worldClock_hours;[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  /// No description provided for @worldClock_minutes.[m[41m[m
[32m+[m[32m  ///[m[41m[m
[32m+[m[32m  /// In zh, this message translates to:[m[41m[m
[32m+[m[32m  /// **'åˆ†é’Ÿ'**[m[41m[m
[32m+[m[32m  String get worldClock_minutes;[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  /// No description provided for @worldClock_seconds.[m[41m[m
[32m+[m[32m  ///[m[41m[m
[32m+[m[32m  /// In zh, this message translates to:[m[41m[m
[32m+[m[32m  /// **'ç§’'**[m[41m[m
[32m+[m[32m  String get worldClock_seconds;[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  /// No description provided for @worldClock_countdownComplete.[m[41m[m
[32m+[m[32m  ///[m[41m[m
[32m+[m[32m  /// In zh, this message translates to:[m[41m[m
[32m+[m[32m  /// **'å€’è®¡æ—¶æé†’: {title} æ—¶é—´åˆ°äº†ï¼'**[m[41m[m
[32m+[m[32m  String worldClock_countdownComplete(String title);[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  /// No description provided for @worldClock_completed.[m[41m[m
[32m+[m[32m  ///[m[41m[m
[32m+[m[32m  /// In zh, this message translates to:[m[41m[m
[32m+[m[32m  /// **'å·²å®Œæˆ'**[m[41m[m
[32m+[m[32m  String get worldClock_completed;[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  /// No description provided for @worldClock_almostComplete.[m[41m[m
[32m+[m[32m  ///[m[41m[m
[32m+[m[32m  /// In zh, this message translates to:[m[41m[m
[32m+[m[32m  /// **'å³å°†å®Œæˆï¼'**[m[41m[m
[32m+[m[32m  String get worldClock_almostComplete;[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  /// No description provided for @worldClock_remaining.[m[41m[m
[32m+[m[32m  ///[m[41m[m
[32m+[m[32m  /// In zh, this message translates to:[m[41m[m
[32m+[m[32m  /// **'å‰©ä½™ {time}'**[m[41m[m
[32m+[m[32m  String worldClock_remaining(String time);[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  /// No description provided for @worldClock_remainingMinutes.[m[41m[m
[32m+[m[32m  ///[m[41m[m
[32m+[m[32m  /// In zh, this message translates to:[m[41m[m
[32m+[m[32m  /// **'å‰©ä½™ {minutes} åˆ†é’Ÿ'**[m[41m[m
[32m+[m[32m  String worldClock_remainingMinutes(int minutes);[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  /// No description provided for @worldClock_remainingHours.[m[41m[m
[32m+[m[32m  ///[m[41m[m
[32m+[m[32m  /// In zh, this message translates to:[m[41m[m
[32m+[m[32m  /// **'å‰©ä½™ {hours} å°æ—¶ {minutes} åˆ†é’Ÿ'**[m[41m[m
[32m+[m[32m  String worldClock_remainingHours(int hours, int minutes);[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  /// No description provided for @worldClock_remainingDays.[m[41m[m
[32m+[m[32m  ///[m[41m[m
[32m+[m[32m  /// In zh, this message translates to:[m[41m[m
[32m+[m[32m  /// **'å‰©ä½™ {days} å¤© {hours} å°æ—¶'**[m[41m[m
[32m+[m[32m  String worldClock_remainingDays(int days, int hours);[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  /// No description provided for @worldClock_settingsTitle.[m[41m[m
[32m+[m[32m  ///[m[41m[m
[32m+[m[32m  /// In zh, this message translates to:[m[41m[m
[32m+[m[32m  /// **'ä¸–ç•Œæ—¶é’Ÿè®¾ç½®'**[m[41m[m
[32m+[m[32m  String get worldClock_settingsTitle;[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  /// No description provided for @worldClock_settingsDesc.[m[41m[m
[32m+[m[32m  ///[m[41m[m
[32m+[m[32m  /// In zh, this message translates to:[m[41m[m
[32m+[m[32m  /// **'è®¾ç½®é€‰é¡¹å°†åœ¨åŽç»­ç‰ˆæœ¬ä¸­æ·»åŠ '**[m[41m[m
[32m+[m[32m  String get worldClock_settingsDesc;[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  /// No description provided for @worldClock_currentFeatures.[m[41m[m
[32m+[m[32m  ///[m[41m[m
[32m+[m[32m  /// In zh, this message translates to:[m[41m[m
[32m+[m[32m  /// **'å½“å‰åŠŸèƒ½ï¼š'**[m[41m[m
[32m+[m[32m  String get worldClock_currentFeatures;[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  /// No description provided for @worldClock_featureMultipleTimezones.[m[41m[m
[32m+[m[32m  ///[m[41m[m
[32m+[m[32m  /// In zh, this message translates to:[m[41m[m
[32m+[m[32m  /// **'â€¢ æ˜¾ç¤ºå¤šä¸ªæ—¶åŒºæ—¶é—´'**[m[41m[m
[32m+[m[32m  String get worldClock_featureMultipleTimezones;[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  /// No description provided for @worldClock_featureCountdown.[m[41m[m
[32m+[m[32m  ///[m[41m[m
[32m+[m[32m  /// In zh, this message translates to:[m[41m[m
[32m+[m[32m  /// **'â€¢ å€’è®¡æ—¶æé†’'**[m[41m[m
[32m+[m[32m  String get worldClock_featureCountdown;[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  /// No description provided for @worldClock_featureBeijingDefault.[m[41m[m
[32m+[m[32m  ///[m[41m[m
[32m+[m[32m  /// In zh, this message translates to:[m[41m[m
[32m+[m[32m  /// **'â€¢ é»˜è®¤åŒ—äº¬æ—¶é—´'**[m[41m[m
[32m+[m[32m  String get worldClock_featureBeijingDefault;[m[41m[m
[32m+[m[41m[m
   /// No description provided for @pet_openMainApp.[m
   ///[m
   /// In zh, this message translates to:[m
[1mdiff --git a/lib/l10n/generated/app_localizations_en.dart b/lib/l10n/generated/app_localizations_en.dart[m
[1mindex c351108..ffce3cb 100644[m
[1m--- a/lib/l10n/generated/app_localizations_en.dart[m
[1m+++ b/lib/l10n/generated/app_localizations_en.dart[m
[36m@@ -675,6 +675,129 @@[m [mclass AppLocalizationsEn extends AppLocalizations {[m
   @override[m
   String get time_justNow => 'Just now';[m
 [m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get worldClock_title => 'World Clock';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get worldClock_addClock => 'Add Clock';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get worldClock_addCountdown => 'Add Countdown';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get worldClock_settings => 'Settings';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get worldClock_noClocks =>[m[41m[m
[32m+[m[32m      'No clocks available, tap the top right to add';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get worldClock_noCountdowns =>[m[41m[m
[32m+[m[32m      'No countdowns available, tap the top right to add';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get worldClock_defaultClock => 'Default';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get worldClock_deleteClock => 'Delete Clock';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get worldClock_deleteCountdown => 'Delete Countdown';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get worldClock_confirmDelete => 'Confirm Delete';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String worldClock_confirmDeleteClock(String cityName) {[m[41m[m
[32m+[m[32m    return 'Are you sure you want to delete the clock for $cityName?';[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String worldClock_confirmDeleteCountdown(String title) {[m[41m[m
[32m+[m[32m    return 'Are you sure you want to delete countdown \"$title\"?';[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get worldClock_addClockTitle => 'Add Clock';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get worldClock_cityName => 'City Name';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get worldClock_cityNameHint => 'Enter city name';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get worldClock_timeZone => 'Time Zone';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get worldClock_addCountdownTitle => 'Add Countdown';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get worldClock_countdownTitle => 'Countdown Title';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get worldClock_countdownTitleHint => 'Enter reminder content';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get worldClock_hours => 'Hours';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get worldClock_minutes => 'Minutes';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get worldClock_seconds => 'Seconds';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String worldClock_countdownComplete(String title) {[m[41m[m
[32m+[m[32m    return 'Countdown reminder: $title time\'s up!';[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get worldClock_completed => 'Completed';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get worldClock_almostComplete => 'Almost complete!';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String worldClock_remaining(String time) {[m[41m[m
[32m+[m[32m    return 'Remaining $time';[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String worldClock_remainingMinutes(int minutes) {[m[41m[m
[32m+[m[32m    return 'Remaining $minutes minutes';[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String worldClock_remainingHours(int hours, int minutes) {[m[41m[m
[32m+[m[32m    return 'Remaining $hours hours $minutes minutes';[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String worldClock_remainingDays(int days, int hours) {[m[41m[m
[32m+[m[32m    return 'Remaining $days days $hours hours';[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get worldClock_settingsTitle => 'World Clock Settings';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get worldClock_settingsDesc =>[m[41m[m
[32m+[m[32m      'Settings options will be added in future versions';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get worldClock_currentFeatures => 'Current features:';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get worldClock_featureMultipleTimezones =>[m[41m[m
[32m+[m[32m      'â€¢ Display multiple timezone times';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get worldClock_featureCountdown => 'â€¢ Countdown reminders';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get worldClock_featureBeijingDefault => 'â€¢ Default Beijing time';[m[41m[m
[32m+[m[41m[m
   @override[m
   String get pet_openMainApp => 'Open Main App';[m
 [m
[1mdiff --git a/lib/l10n/generated/app_localizations_zh.dart b/lib/l10n/generated/app_localizations_zh.dart[m
[1mindex 66ce221..09b9374 100644[m
[1m--- a/lib/l10n/generated/app_localizations_zh.dart[m
[1m+++ b/lib/l10n/generated/app_localizations_zh.dart[m
[36m@@ -664,6 +664,125 @@[m [mclass AppLocalizationsZh extends AppLocalizations {[m
   @override[m
   String get time_justNow => 'åˆšåˆš';[m
 [m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get worldClock_title => 'ä¸–ç•Œæ—¶é’Ÿ';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get worldClock_addClock => 'æ·»åŠ æ—¶é’Ÿ';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get worldClock_addCountdown => 'æ·»åŠ å€’è®¡æ—¶';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get worldClock_settings => 'è®¾ç½®';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get worldClock_noClocks => 'æš‚æ— æ—¶é’Ÿï¼Œç‚¹å‡»å³ä¸Šè§’æ·»åŠ ';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get worldClock_noCountdowns => 'æš‚æ— å€’è®¡æ—¶ï¼Œç‚¹å‡»å³ä¸Šè§’æ·»åŠ ';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get worldClock_defaultClock => 'é»˜è®¤';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get worldClock_deleteClock => 'åˆ é™¤æ—¶é’Ÿ';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get worldClock_deleteCountdown => 'åˆ é™¤å€’è®¡æ—¶';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get worldClock_confirmDelete => 'ç¡®è®¤åˆ é™¤';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String worldClock_confirmDeleteClock(String cityName) {[m[41m[m
[32m+[m[32m    return 'ç¡®å®šè¦åˆ é™¤ $cityName çš„æ—¶é’Ÿå—ï¼Ÿ';[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String worldClock_confirmDeleteCountdown(String title) {[m[41m[m
[32m+[m[32m    return 'ç¡®å®šè¦åˆ é™¤å€’è®¡æ—¶ \"$title\" å—ï¼Ÿ';[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get worldClock_addClockTitle => 'æ·»åŠ æ—¶é’Ÿ';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get worldClock_cityName => 'åŸŽå¸‚åç§°';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get worldClock_cityNameHint => 'è¾“å…¥åŸŽå¸‚åç§°';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get worldClock_timeZone => 'æ—¶åŒº';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get worldClock_addCountdownTitle => 'æ·»åŠ å€’è®¡æ—¶';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get worldClock_countdownTitle => 'å€’è®¡æ—¶æ ‡é¢˜';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get worldClock_countdownTitleHint => 'è¾“å…¥æé†’å†…å®¹';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get worldClock_hours => 'å°æ—¶';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get worldClock_minutes => 'åˆ†é’Ÿ';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get worldClock_seconds => 'ç§’';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String worldClock_countdownComplete(String title) {[m[41m[m
[32m+[m[32m    return 'å€’è®¡æ—¶æé†’: $title æ—¶é—´åˆ°äº†ï¼';[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get worldClock_completed => 'å·²å®Œæˆ';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get worldClock_almostComplete => 'å³å°†å®Œæˆï¼';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String worldClock_remaining(String time) {[m[41m[m
[32m+[m[32m    return 'å‰©ä½™ $time';[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String worldClock_remainingMinutes(int minutes) {[m[41m[m
[32m+[m[32m    return 'å‰©ä½™ $minutes åˆ†é’Ÿ';[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String worldClock_remainingHours(int hours, int minutes) {[m[41m[m
[32m+[m[32m    return 'å‰©ä½™ $hours å°æ—¶ $minutes åˆ†é’Ÿ';[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String worldClock_remainingDays(int days, int hours) {[m[41m[m
[32m+[m[32m    return 'å‰©ä½™ $days å¤© $hours å°æ—¶';[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get worldClock_settingsTitle => 'ä¸–ç•Œæ—¶é’Ÿè®¾ç½®';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get worldClock_settingsDesc => 'è®¾ç½®é€‰é¡¹å°†åœ¨åŽç»­ç‰ˆæœ¬ä¸­æ·»åŠ ';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get worldClock_currentFeatures => 'å½“å‰åŠŸèƒ½ï¼š';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get worldClock_featureMultipleTimezones => 'â€¢ æ˜¾ç¤ºå¤šä¸ªæ—¶åŒºæ—¶é—´';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get worldClock_featureCountdown => 'â€¢ å€’è®¡æ—¶æé†’';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get worldClock_featureBeijingDefault => 'â€¢ é»˜è®¤åŒ—äº¬æ—¶é—´';[m[41m[m
[32m+[m[41m[m
   @override[m
   String get pet_openMainApp => 'æ‰“å¼€ä¸»åº”ç”¨';[m
 [m
[1mdiff --git a/lib/plugins/plugin_registry.dart b/lib/plugins/plugin_registry.dart[m
[1mindex 03e1beb..38c3528 100644[m
[1m--- a/lib/plugins/plugin_registry.dart[m
[1m+++ b/lib/plugins/plugin_registry.dart[m
[36m@@ -1,6 +1,7 @@[m
 import '../core/interfaces/i_plugin.dart';[m
 import '../core/models/plugin_models.dart';[m
 import 'calculator/calculator_plugin_factory.dart';[m
[32m+[m[32mimport 'world_clock/world_clock_plugin_factory.dart';[m[41m[m
 [m
 /// Registry for example plugins included with the platform[m
 class ExamplePluginRegistry {[m
[36m@@ -9,6 +10,10 @@[m [mclass ExamplePluginRegistry {[m
       createPlugin: CalculatorPluginFactory.createPlugin,[m
       getDescriptor: CalculatorPluginFactory.getDescriptor,[m
     ),[m
[32m+[m[32m    'com.example.worldclock': PluginFactory([m[41m[m
[32m+[m[32m      createPlugin: WorldClockPluginFactory.createPlugin,[m[41m[m
[32m+[m[32m      getDescriptor: WorldClockPluginFactory.getDescriptor,[m[41m[m
[32m+[m[32m    ),[m[41m[m
   };[m
 [m
   /// Gets all available example plugin descriptors[m
[1mdiff --git a/lib/plugins/world_clock/README.md b/lib/plugins/world_clock/README.md[m
[1mnew file mode 100644[m
[1mindex 0000000..d742d7f[m
[1m--- /dev/null[m
[1m+++ b/lib/plugins/world_clock/README.md[m
[36m@@ -0,0 +1,179 @@[m
[32m+[m[32m# ä¸–ç•Œæ—¶é’Ÿæ’ä»¶ (World Clock Plugin)[m[41m[m
[32m+[m[41m[m
[32m+[m[32mä¸€ä¸ªåŠŸèƒ½ä¸°å¯Œçš„ä¸–ç•Œæ—¶é’Ÿæ’ä»¶ï¼Œæ”¯æŒå¤šæ—¶åŒºæ˜¾ç¤ºå’Œå€’è®¡æ—¶æé†’åŠŸèƒ½ã€‚[m[41m[m
[32m+[m[41m[m
[32m+[m[32m## åŠŸèƒ½ç‰¹æ€§[m[41m[m
[32m+[m[41m[m
[32m+[m[32m### ðŸŒ ä¸–ç•Œæ—¶é’Ÿ[m[41m[m
[32m+[m[32m- **å¤šæ—¶åŒºæ”¯æŒ**: åŒæ—¶æ˜¾ç¤ºå¤šä¸ªåŸŽå¸‚çš„æ—¶é—´[m[41m[m
[32m+[m[32m- **é»˜è®¤åŒ—äº¬æ—¶é—´**: é¢„è®¾åŒ—äº¬æ—¶é—´ä½œä¸ºé»˜è®¤æ—¶é’Ÿ[m[41m[m
[32m+[m[32m- **å®žæ—¶æ›´æ–°**: æ¯ç§’è‡ªåŠ¨æ›´æ–°æ—¶é—´æ˜¾ç¤º[m[41m[m
[32m+[m[32m- **é¢„å®šä¹‰æ—¶åŒº**: å†…ç½®10ä¸ªå¸¸ç”¨æ—¶åŒºï¼ˆåŒ—äº¬ã€ä¸œäº¬ã€é¦–å°”ã€æ–°åŠ å¡ã€æ‚‰å°¼ã€ä¼¦æ•¦ã€å·´é»Žã€çº½çº¦ã€æ´›æ‰çŸ¶ã€èŠåŠ å“¥ï¼‰[m[41m[m
[32m+[m[32m- **è‡ªå®šä¹‰æ·»åŠ **: æ”¯æŒæ·»åŠ è‡ªå®šä¹‰åŸŽå¸‚å’Œæ—¶åŒº[m[41m[m
[32m+[m[32m- **ä¼˜é›…ç•Œé¢**: æ¸…æ™°çš„æ—¶é—´æ˜¾ç¤ºå’ŒåŸŽå¸‚ä¿¡æ¯[m[41m[m
[32m+[m[41m[m
[32m+[m[32m### â° å€’è®¡æ—¶æé†’[m[41m[m
[32m+[m[32m- **çµæ´»è®¾ç½®**: æ”¯æŒå°æ—¶ã€åˆ†é’Ÿã€ç§’çš„ä»»æ„ç»„åˆ[m[41m[m
[32m+[m[32m- **è‡ªå®šä¹‰æ ‡é¢˜**: ä¸ºæ¯ä¸ªå€’è®¡æ—¶è®¾ç½®ä¸ªæ€§åŒ–æé†’å†…å®¹[m[41m[m
[32m+[m[32m- **è§†è§‰åé¦ˆ**:[m[41m [m
[32m+[m[32m  - è¿›åº¦åœ†çŽ¯æ˜¾ç¤ºå‰©ä½™æ—¶é—´æ¯”ä¾‹[m[41m[m
[32m+[m[32m  - å³å°†å®Œæˆæ—¶çš„è„‰å†²åŠ¨ç”»æ•ˆæžœ[m[41m[m
[32m+[m[32m  - ä¸åŒçŠ¶æ€çš„é¢œè‰²åŒºåˆ†[m[41m[m
[32m+[m[32m- **å®Œæˆé€šçŸ¥**: å€’è®¡æ—¶ç»“æŸæ—¶è‡ªåŠ¨å‘é€ç³»ç»Ÿé€šçŸ¥[m[41m[m
[32m+[m[32m- **çŠ¶æ€ç®¡ç†**: è‡ªåŠ¨æ ‡è®°å·²å®Œæˆçš„å€’è®¡æ—¶[m[41m[m
[32m+[m[41m[m
[32m+[m[32m### ðŸŽ¨ ç”¨æˆ·ç•Œé¢[m[41m[m
[32m+[m[32m- **Material Design**: éµå¾ªMaterial Designè®¾è®¡è§„èŒƒ[m[41m[m
[32m+[m[32m- **å“åº”å¼å¸ƒå±€**: é€‚é…ä¸åŒå±å¹•å°ºå¯¸[m[41m[m
[32m+[m[32m- **åŠ¨ç”»æ•ˆæžœ**: æµç•…çš„è¿‡æ¸¡åŠ¨ç”»å’ŒçŠ¶æ€å˜åŒ–[m[41m[m
[32m+[m[32m- **ç›´è§‚æ“ä½œ**: ç®€å•æ˜“ç”¨çš„æ·»åŠ å’Œåˆ é™¤åŠŸèƒ½[m[41m[m
[32m+[m[41m[m
[32m+[m[32m## æŠ€æœ¯å®žçŽ°[m[41m[m
[32m+[m[41m[m
[32m+[m[32m### æž¶æž„è®¾è®¡[m[41m[m
[32m+[m[32m- **æ’ä»¶æž¶æž„**: åŸºäºŽIPluginæŽ¥å£çš„æ ‡å‡†æ’ä»¶å®žçŽ°[m[41m[m
[32m+[m[32m- **çŠ¶æ€ç®¡ç†**: å®Œæ•´çš„æ’ä»¶ç”Ÿå‘½å‘¨æœŸç®¡ç†[m[41m[m
[32m+[m[32m- **æ•°æ®æŒä¹…åŒ–**: è‡ªåŠ¨ä¿å­˜å’Œæ¢å¤ç”¨æˆ·è®¾ç½®[m[41m[m
[32m+[m[32m- **å®šæ—¶å™¨ç®¡ç†**: é«˜æ•ˆçš„æ—¶é—´æ›´æ–°æœºåˆ¶[m[41m[m
[32m+[m[41m[m
[32m+[m[32m### æ ¸å¿ƒç»„ä»¶[m[41m[m
[32m+[m[32m```[m[41m[m
[32m+[m[32mworld_clock/[m[41m[m
[32m+[m[32mâ”œâ”€â”€ world_clock_plugin.dart          # ä¸»æ’ä»¶ç±»[m[41m[m
[32m+[m[32mâ”œâ”€â”€ world_clock_plugin_factory.dart  # æ’ä»¶å·¥åŽ‚[m[41m[m
[32m+[m[32mâ”œâ”€â”€ models/[m[41m[m
[32m+[m[32mâ”‚   â””â”€â”€ world_clock_models.dart      # æ•°æ®æ¨¡åž‹[m[41m[m
[32m+[m[32mâ””â”€â”€ widgets/[m[41m[m
[32m+[m[32m    â”œâ”€â”€ world_clock_widget.dart      # æ—¶é’Ÿæ˜¾ç¤ºç»„ä»¶[m[41m[m
[32m+[m[32m    â””â”€â”€ countdown_timer_widget.dart  # å€’è®¡æ—¶ç»„ä»¶[m[41m[m
[32m+[m[32m```[m[41m[m
[32m+[m[41m[m
[32m+[m[32m### æ•°æ®æ¨¡åž‹[m[41m[m
[32m+[m[32m- **WorldClockItem**: ä¸–ç•Œæ—¶é’Ÿæ•°æ®æ¨¡åž‹[m[41m[m
[32m+[m[32m- **CountdownTimer**: å€’è®¡æ—¶å®šæ—¶å™¨æ¨¡åž‹[m[41m[m
[32m+[m[32m- **TimeZoneInfo**: æ—¶åŒºä¿¡æ¯æ¨¡åž‹[m[41m[m
[32m+[m[41m[m
[32m+[m[32m## ä½¿ç”¨æ–¹æ³•[m[41m[m
[32m+[m[41m[m
[32m+[m[32m### æ·»åŠ ä¸–ç•Œæ—¶é’Ÿ[m[41m[m
[32m+[m[32m1. ç‚¹å‡»å³ä¸Šè§’çš„"+"æŒ‰é’®[m[41m[m
[32m+[m[32m2. é€‰æ‹©"æ·»åŠ æ—¶é’Ÿ"[m[41m[m
[32m+[m[32m3. è¾“å…¥åŸŽå¸‚åç§°[m[41m[m
[32m+[m[32m4. é€‰æ‹©å¯¹åº”æ—¶åŒº[m[41m[m
[32m+[m[32m5. ç‚¹å‡»"æ·»åŠ "å®Œæˆ[m[41m[m
[32m+[m[41m[m
[32m+[m[32m### æ·»åŠ å€’è®¡æ—¶[m[41m[m
[32m+[m[32m1. ç‚¹å‡»å³ä¸Šè§’çš„é—¹é’Ÿå›¾æ ‡[m[41m[m
[32m+[m[32m2. è¾“å…¥å€’è®¡æ—¶æ ‡é¢˜[m[41m[m
[32m+[m[32m3. è®¾ç½®å°æ—¶ã€åˆ†é’Ÿã€ç§’[m[41m[m
[32m+[m[32m4. ç‚¹å‡»"æ·»åŠ "å¼€å§‹å€’è®¡æ—¶[m[41m[m
[32m+[m[41m[m
[32m+[m[32m### åˆ é™¤åŠŸèƒ½[m[41m[m
[32m+[m[32m- **åˆ é™¤æ—¶é’Ÿ**: ç‚¹å‡»æ—¶é’Ÿå³ä¾§çš„åˆ é™¤æŒ‰é’®ï¼ˆé»˜è®¤åŒ—äº¬æ—¶é—´ä¸å¯åˆ é™¤ï¼‰[m[41m[m
[32m+[m[32m- **åˆ é™¤å€’è®¡æ—¶**: ç‚¹å‡»å€’è®¡æ—¶å³ä¾§çš„åˆ é™¤æŒ‰é’®[m[41m[m
[32m+[m[41m[m
[32m+[m[32m## æƒé™è¦æ±‚[m[41m[m
[32m+[m[41m[m
[32m+[m[32m- **platformStorage**: ç”¨äºŽä¿å­˜æ—¶é’Ÿå’Œå€’è®¡æ—¶è®¾ç½®[m[41m[m
[32m+[m[32m- **systemNotifications**: ç”¨äºŽå€’è®¡æ—¶å®Œæˆæé†’[m[41m[m
[32m+[m[32m- **platformServices**: ç”¨äºŽè®¿é—®å¹³å°æœåŠ¡[m[41m[m
[32m+[m[41m[m
[32m+[m[32m## é…ç½®é€‰é¡¹[m[41m[m
[32m+[m[41m[m
[32m+[m[32m```json[m[41m[m
[32m+[m[32m{[m[41m[m
[32m+[m[32m  "defaultTimeZone": "Asia/Shanghai",[m[41m[m
[32m+[m[32m  "updateInterval": 1000,[m[41m[m
[32m+[m[32m  "maxClocks": 10,[m[41m[m
[32m+[m[32m  "maxCountdowns": 20,[m[41m[m
[32m+[m[32m  "enableNotifications": true,[m[41m[m
[32m+[m[32m  "enableAnimations": true[m[41m[m
[32m+[m[32m}[m[41m[m
[32m+[m[32m```[m[41m[m
[32m+[m[41m[m
[32m+[m[32m## æ”¯æŒçš„æ—¶åŒº[m[41m[m
[32m+[m[41m[m
[32m+[m[32m| åŸŽå¸‚ | æ—¶åŒºID | UTCåç§» |[m[41m[m
[32m+[m[32m|------|--------|---------|[m[41m[m
[32m+[m[32m| åŒ—äº¬ | Asia/Shanghai | UTC+8 |[m[41m[m
[32m+[m[32m| ä¸œäº¬ | Asia/Tokyo | UTC+9 |[m[41m[m
[32m+[m[32m| é¦–å°” | Asia/Seoul | UTC+9 |[m[41m[m
[32m+[m[32m| æ–°åŠ å¡ | Asia/Singapore | UTC+8 |[m[41m[m
[32m+[m[32m| æ‚‰å°¼ | Australia/Sydney | UTC+11 |[m[41m[m
[32m+[m[32m| ä¼¦æ•¦ | Europe/London | UTC+0 |[m[41m[m
[32m+[m[32m| å·´é»Ž | Europe/Paris | UTC+1 |[m[41m[m
[32m+[m[32m| çº½çº¦ | America/New_York | UTC-5 |[m[41m[m
[32m+[m[32m| æ´›æ‰çŸ¶ | America/Los_Angeles | UTC-8 |[m[41m[m
[32m+[m[32m| èŠåŠ å“¥ | America/Chicago | UTC-6 |[m[41m[m
[32m+[m[41m[m
[32m+[m[32m*æ³¨æ„ï¼šæ—¶åŒºåç§»ä¸ºç®€åŒ–å®žçŽ°ï¼Œæœªè€ƒè™‘å¤ä»¤æ—¶å˜åŒ–*[m[41m[m
[32m+[m[41m[m
[32m+[m[32m## å›½é™…åŒ–æ”¯æŒ[m[41m[m
[32m+[m[41m[m
[32m+[m[32m- **ä¸­æ–‡ (zh_CN)**: é»˜è®¤è¯­è¨€[m[41m[m
[32m+[m[32m- **è‹±æ–‡ (en_US)**: å®Œæ•´ç¿»è¯‘æ”¯æŒ[m[41m[m
[32m+[m[41m[m
[32m+[m[32m## ç‰ˆæœ¬åŽ†å²[m[41m[m
[32m+[m[41m[m
[32m+[m[32m### v1.0.0 (å½“å‰ç‰ˆæœ¬)[m[41m[m
[32m+[m[32m- âœ… å¤šæ—¶åŒºä¸–ç•Œæ—¶é’Ÿæ˜¾ç¤º[m[41m[m
[32m+[m[32m- âœ… é»˜è®¤åŒ—äº¬æ—¶é—´[m[41m[m
[32m+[m[32m- âœ… å€’è®¡æ—¶æé†’åŠŸèƒ½[m[41m[m
[32m+[m[32m- âœ… è‡ªå®šä¹‰æ—¶é’Ÿæ·»åŠ [m[41m[m
[32m+[m[32m- âœ… å®žæ—¶æ—¶é—´æ›´æ–°[m[41m[m
[32m+[m[32m- âœ… å®Œæˆé€šçŸ¥æé†’[m[41m[m
[32m+[m[32m- âœ… å›½é™…åŒ–æ”¯æŒ[m[41m[m
[32m+[m[32m- âœ… æ•°æ®æŒä¹…åŒ–[m[41m[m
[32m+[m[41m[m
[32m+[m[32m### æœªæ¥è®¡åˆ’[m[41m[m
[32m+[m[32m- ðŸ”„ æ›´ç²¾ç¡®çš„æ—¶åŒºå¤„ç†ï¼ˆé›†æˆtimezoneåŒ…ï¼‰[m[41m[m
[32m+[m[32m- ðŸ”„ æ—¶é’Ÿä¸»é¢˜è‡ªå®šä¹‰[m[41m[m
[32m+[m[32m- ðŸ”„ æ›´å¤šé¢„è®¾å€’è®¡æ—¶æ¨¡æ¿[m[41m[m
[32m+[m[32m- ðŸ”„ å€’è®¡æ—¶å£°éŸ³æé†’[m[41m[m
[32m+[m[32m- ðŸ”„ ä¸–ç•Œæ—¶é’Ÿæ¡Œé¢å°éƒ¨ä»¶[m[41m[m
[32m+[m[32m- ðŸ”„ æ—¶åŒºæœç´¢åŠŸèƒ½[m[41m[m
[32m+[m[41m[m
[32m+[m[32m## å¼€å‘è¯´æ˜Ž[m[41m[m
[32m+[m[41m[m
[32m+[m[32m### æµ‹è¯•[m[41m[m
[32m+[m[32m```bash[m[41m[m
[32m+[m[32mflutter test test/plugins/world_clock_test.dart[m[41m[m
[32m+[m[32m```[m[41m[m
[32m+[m[41m[m
[32m+[m[32m### æž„å»º[m[41m[m
[32m+[m[32mæ’ä»¶ä¼šè‡ªåŠ¨åŒ…å«åœ¨ä¸»åº”ç”¨æž„å»ºä¸­ï¼Œæ— éœ€å•ç‹¬æž„å»ºã€‚[m[41m[m
[32m+[m[41m[m
[32m+[m[32m### è°ƒè¯•[m[41m[m
[32m+[m[32må¯ç”¨è°ƒè¯•æ¨¡å¼æŸ¥çœ‹è¯¦ç»†æ—¥å¿—ï¼š[m[41m[m
[32m+[m[32m```dart[m[41m[m
[32m+[m[32mPluginDebugger.enableDebugMode();[m[41m[m
[32m+[m[32m```[m[41m[m
[32m+[m[41m[m
[32m+[m[32m## æŠ€æœ¯é™åˆ¶[m[41m[m
[32m+[m[41m[m
[32m+[m[32m1. **æ—¶åŒºå¤„ç†**: å½“å‰ä½¿ç”¨ç®€åŒ–çš„UTCåç§»è®¡ç®—ï¼Œæœªå¤„ç†å¤ä»¤æ—¶å˜åŒ–[m[41m[m
[32m+[m[32m2. **æœ€å¤§æ•°é‡**: å»ºè®®ä¸è¶…è¿‡10ä¸ªæ—¶é’Ÿå’Œ20ä¸ªå€’è®¡æ—¶ä»¥ä¿è¯æ€§èƒ½[m[41m[m
[32m+[m[32m3. **é€šçŸ¥æƒé™**: éœ€è¦ç”¨æˆ·æŽˆæƒç³»ç»Ÿé€šçŸ¥æƒé™[m[41m[m
[32m+[m[41m[m
[32m+[m[32m## è´¡çŒ®æŒ‡å—[m[41m[m
[32m+[m[41m[m
[32m+[m[32mæ¬¢è¿Žæäº¤Issueå’ŒPull Requestæ¥æ”¹è¿›è¿™ä¸ªæ’ä»¶ï¼[m[41m[m
[32m+[m[41m[m
[32m+[m[32m### å¼€å‘çŽ¯å¢ƒ[m[41m[m
[32m+[m[32m- Flutter SDK 3.0.0+[m[41m[m
[32m+[m[32m- Dart SDK 2.17.0+[m[41m[m
[32m+[m[41m[m
[32m+[m[32m### ä»£ç è§„èŒƒ[m[41m[m
[32m+[m[32m- éµå¾ªDartå®˜æ–¹ä»£ç è§„èŒƒ[m[41m[m
[32m+[m[32m- ä½¿ç”¨æœ‰æ„ä¹‰çš„å˜é‡å’Œå‡½æ•°å‘½å[m[41m[m
[32m+[m[32m- æ·»åŠ é€‚å½“çš„æ³¨é‡Šå’Œæ–‡æ¡£[m[41m[m
[32m+[m[41m[m
[32m+[m[32m## è®¸å¯è¯[m[41m[m
[32m+[m[41m[m
[32m+[m[32mMIT License - è¯¦è§é¡¹ç›®æ ¹ç›®å½•çš„LICENSEæ–‡ä»¶[m[41m[m
[32m+[m[41m[m
[32m+[m[32m## è”ç³»æ–¹å¼[m[41m[m
[32m+[m[41m[m
[32m+[m[32m- é¡¹ç›®ä¸»é¡µ: https://pluginplatform.com[m[41m[m
[32m+[m[32m- æ–‡æ¡£: https://docs.pluginplatform.com/plugins/world-clock[m[41m[m
[32m+[m[32m- é—®é¢˜åé¦ˆ: https://github.com/pluginplatform/world-clock-plugin/issues[m
\ No newline at end of file[m
[1mdiff --git a/lib/plugins/world_clock/models/world_clock_models.dart b/lib/plugins/world_clock/models/world_clock_models.dart[m
[1mnew file mode 100644[m
[1mindex 0000000..79b370b[m
[1m--- /dev/null[m
[1m+++ b/lib/plugins/world_clock/models/world_clock_models.dart[m
[36m@@ -0,0 +1,298 @@[m
[32m+[m[32m/// ä¸–ç•Œæ—¶é’Ÿæ•°æ®æ¨¡åž‹[m[41m[m
[32m+[m[32mclass WorldClockItem {[m[41m[m
[32m+[m[32m  final String id;[m[41m[m
[32m+[m[32m  final String cityName;[m[41m[m
[32m+[m[32m  final String timeZone;[m[41m[m
[32m+[m[32m  final bool isDefault;[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  const WorldClockItem({[m[41m[m
[32m+[m[32m    required this.id,[m[41m[m
[32m+[m[32m    required this.cityName,[m[41m[m
[32m+[m[32m    required this.timeZone,[m[41m[m
[32m+[m[32m    required this.isDefault,[m[41m[m
[32m+[m[32m  });[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  /// èŽ·å–å½“å‰æ—¶åŒºçš„æ—¶é—´[m[41m[m
[32m+[m[32m  DateTime get currentTime {[m[41m[m
[32m+[m[32m    // æ³¨æ„ï¼šè¿™æ˜¯ä¸€ä¸ªç®€åŒ–çš„å®žçŽ°[m[41m[m
[32m+[m[32m    // åœ¨å®žé™…åº”ç”¨ä¸­ï¼Œåº”è¯¥ä½¿ç”¨æ›´ç²¾ç¡®çš„æ—¶åŒºå¤„ç†åº“ï¼Œå¦‚ timezone åŒ…[m[41m[m
[32m+[m[32m    final now = DateTime.now().toUtc();[m[41m[m
[32m+[m[41m    [m
[32m+[m[32m    // ç®€å•çš„æ—¶åŒºåç§»æ˜ å°„[m[41m[m
[32m+[m[32m    final offsetHours = _getTimeZoneOffset(timeZone);[m[41m[m
[32m+[m[32m    return now.add(Duration(hours: offsetHours));[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  /// èŽ·å–æ ¼å¼åŒ–çš„æ—¶é—´å­—ç¬¦ä¸²[m[41m[m
[32m+[m[32m  String get formattedTime {[m[41m[m
[32m+[m[32m    final time = currentTime;[m[41m[m
[32m+[m[32m    return '${time.hour.toString().padLeft(2, '0')}:'[m[41m[m
[32m+[m[32m           '${time.minute.toString().padLeft(2, '0')}:'[m[41m[m
[32m+[m[32m           '${time.second.toString().padLeft(2, '0')}';[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  /// èŽ·å–æ ¼å¼åŒ–çš„æ—¥æœŸå­—ç¬¦ä¸²[m[41m[m
[32m+[m[32m  String get formattedDate {[m[41m[m
[32m+[m[32m    final time = currentTime;[m[41m[m
[32m+[m[32m    final weekdays = ['å‘¨æ—¥', 'å‘¨ä¸€', 'å‘¨äºŒ', 'å‘¨ä¸‰', 'å‘¨å››', 'å‘¨äº”', 'å‘¨å…­'];[m[41m[m
[32m+[m[32m    return '${time.year}å¹´${time.month}æœˆ${time.day}æ—¥ ${weekdays[time.weekday % 7]}';[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  /// ç®€åŒ–çš„æ—¶åŒºåç§»è®¡ç®—[m[41m[m
[32m+[m[32m  int _getTimeZoneOffset(String timeZone) {[m[41m[m
[32m+[m[32m    switch (timeZone) {[m[41m[m
[32m+[m[32m      case 'Asia/Shanghai':[m[41m[m
[32m+[m[32m      case 'Asia/Beijing':[m[41m[m
[32m+[m[32m        return 8; // UTC+8[m[41m[m
[32m+[m[32m      case 'Asia/Tokyo':[m[41m[m
[32m+[m[32m        return 9; // UTC+9[m[41m[m
[32m+[m[32m      case 'Asia/Seoul':[m[41m[m
[32m+[m[32m        return 9; // UTC+9[m[41m[m
[32m+[m[32m      case 'Asia/Singapore':[m[41m[m
[32m+[m[32m        return 8; // UTC+8[m[41m[m
[32m+[m[32m      case 'Australia/Sydney':[m[41m[m
[32m+[m[32m        return 11; // UTC+11 (è€ƒè™‘å¤ä»¤æ—¶ï¼Œè¿™é‡Œç®€åŒ–å¤„ç†)[m[41m[m
[32m+[m[32m      case 'Europe/London':[m[41m[m
[32m+[m[32m        return 0; // UTC+0 (è€ƒè™‘å¤ä»¤æ—¶ï¼Œè¿™é‡Œç®€åŒ–å¤„ç†)[m[41m[m
[32m+[m[32m      case 'Europe/Paris':[m[41m[m
[32m+[m[32m        return 1; // UTC+1 (è€ƒè™‘å¤ä»¤æ—¶ï¼Œè¿™é‡Œç®€åŒ–å¤„ç†)[m[41m[m
[32m+[m[32m      case 'America/New_York':[m[41m[m
[32m+[m[32m        return -5; // UTC-5 (è€ƒè™‘å¤ä»¤æ—¶ï¼Œè¿™é‡Œç®€åŒ–å¤„ç†)[m[41m[m
[32m+[m[32m      case 'America/Los_Angeles':[m[41m[m
[32m+[m[32m        return -8; // UTC-8 (è€ƒè™‘å¤ä»¤æ—¶ï¼Œè¿™é‡Œç®€åŒ–å¤„ç†)[m[41m[m
[32m+[m[32m      case 'America/Chicago':[m[41m[m
[32m+[m[32m        return -6; // UTC-6 (è€ƒè™‘å¤ä»¤æ—¶ï¼Œè¿™é‡Œç®€åŒ–å¤„ç†)[m[41m[m
[32m+[m[32m      default:[m[41m[m
[32m+[m[32m        return 8; // é»˜è®¤åŒ—äº¬æ—¶é—´[m[41m[m
[32m+[m[32m    }[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  Map<String, dynamic> toJson() {[m[41m[m
[32m+[m[32m    return {[m[41m[m
[32m+[m[32m      'id': id,[m[41m[m
[32m+[m[32m      'cityName': cityName,[m[41m[m
[32m+[m[32m      'timeZone': timeZone,[m[41m[m
[32m+[m[32m      'isDefault': isDefault,[m[41m[m
[32m+[m[32m    };[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  factory WorldClockItem.fromJson(Map<String, dynamic> json) {[m[41m[m
[32m+[m[32m    return WorldClockItem([m[41m[m
[32m+[m[32m      id: json['id'] as String,[m[41m[m
[32m+[m[32m      cityName: json['cityName'] as String,[m[41m[m
[32m+[m[32m      timeZone: json['timeZone'] as String,[m[41m[m
[32m+[m[32m      isDefault: json['isDefault'] as bool,[m[41m[m
[32m+[m[32m    );[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  bool operator ==(Object other) {[m[41m[m
[32m+[m[32m    if (identical(this, other)) return true;[m[41m[m
[32m+[m[32m    return other is WorldClockItem && other.id == id;[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  int get hashCode => id.hashCode;[m[41m[m
[32m+[m[32m}[m[41m[m
[32m+[m[41m[m
[32m+[m[32m/// å€’è®¡æ—¶å®šæ—¶å™¨æ¨¡åž‹[m[41m[m
[32m+[m[32mclass CountdownTimer {[m[41m[m
[32m+[m[32m  final String id;[m[41m[m
[32m+[m[32m  final String title;[m[41m[m
[32m+[m[32m  final DateTime endTime;[m[41m[m
[32m+[m[32m  bool isCompleted;[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  CountdownTimer({[m[41m[m
[32m+[m[32m    required this.id,[m[41m[m
[32m+[m[32m    required this.title,[m[41m[m
[32m+[m[32m    required this.endTime,[m[41m[m
[32m+[m[32m    required this.isCompleted,[m[41m[m
[32m+[m[32m  });[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  /// èŽ·å–å‰©ä½™æ—¶é—´[m[41m[m
[32m+[m[32m  Duration get remainingTime {[m[41m[m
[32m+[m[32m    if (isCompleted) return Duration.zero;[m[41m[m
[32m+[m[41m    [m
[32m+[m[32m    final now = DateTime.now();[m[41m[m
[32m+[m[32m    if (endTime.isBefore(now)) {[m[41m[m
[32m+[m[32m      return Duration.zero;[m[41m[m
[32m+[m[32m    }[m[41m[m
[32m+[m[41m    [m
[32m+[m[32m    return endTime.difference(now);[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  /// èŽ·å–æ ¼å¼åŒ–çš„å‰©ä½™æ—¶é—´å­—ç¬¦ä¸²[m[41m[m
[32m+[m[32m  String get formattedRemainingTime {[m[41m[m
[32m+[m[32m    final remaining = remainingTime;[m[41m[m
[32m+[m[41m    [m
[32m+[m[32m    if (remaining == Duration.zero) {[m[41m[m
[32m+[m[32m      return '00:00:00';[m[41m[m
[32m+[m[32m    }[m[41m[m
[32m+[m[41m    [m
[32m+[m[32m    final hours = remaining.inHours;[m[41m[m
[32m+[m[32m    final minutes = remaining.inMinutes % 60;[m[41m[m
[32m+[m[32m    final seconds = remaining.inSeconds % 60;[m[41m[m
[32m+[m[41m    [m
[32m+[m[32m    return '${hours.toString().padLeft(2, '0')}:'[m[41m[m
[32m+[m[32m           '${minutes.toString().padLeft(2, '0')}:'[m[41m[m
[32m+[m[32m           '${seconds.toString().padLeft(2, '0')}';[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  /// èŽ·å–è¿›åº¦ç™¾åˆ†æ¯” (0.0 - 1.0)[m[41m[m
[32m+[m[32m  double getProgress(Duration originalDuration) {[m[41m[m
[32m+[m[32m    if (isCompleted) return 1.0;[m[41m[m
[32m+[m[41m    [m
[32m+[m[32m    final elapsed = originalDuration - remainingTime;[m[41m[m
[32m+[m[32m    return elapsed.inMilliseconds / originalDuration.inMilliseconds;[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  /// æ£€æŸ¥æ˜¯å¦å³å°†å®Œæˆ (å‰©ä½™æ—¶é—´å°‘äºŽ1åˆ†é’Ÿ)[m[41m[m
[32m+[m[32m  bool get isAlmostComplete {[m[41m[m
[32m+[m[32m    return !isCompleted && remainingTime.inMinutes < 1;[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  Map<String, dynamic> toJson() {[m[41m[m
[32m+[m[32m    return {[m[41m[m
[32m+[m[32m      'id': id,[m[41m[m
[32m+[m[32m      'title': title,[m[41m[m
[32m+[m[32m      'endTime': endTime.toIso8601String(),[m[41m[m
[32m+[m[32m      'isCompleted': isCompleted,[m[41m[m
[32m+[m[32m    };[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  factory CountdownTimer.fromJson(Map<String, dynamic> json) {[m[41m[m
[32m+[m[32m    return CountdownTimer([m[41m[m
[32m+[m[32m      id: json['id'] as String,[m[41m[m
[32m+[m[32m      title: json['title'] as String,[m[41m[m
[32m+[m[32m      endTime: DateTime.parse(json['endTime'] as String),[m[41m[m
[32m+[m[32m      isCompleted: json['isCompleted'] as bool,[m[41m[m
[32m+[m[32m    );[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  bool operator ==(Object other) {[m[41m[m
[32m+[m[32m    if (identical(this, other)) return true;[m[41m[m
[32m+[m[32m    return other is CountdownTimer && other.id == id;[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  int get hashCode => id.hashCode;[m[41m[m
[32m+[m[32m}[m[41m[m
[32m+[m[41m[m
[32m+[m[32m/// æ—¶åŒºä¿¡æ¯æ¨¡åž‹[m[41m[m
[32m+[m[32mclass TimeZoneInfo {[m[41m[m
[32m+[m[32m  final String name;[m[41m[m
[32m+[m[32m  final String displayName;[m[41m[m
[32m+[m[32m  final String timeZoneId;[m[41m[m
[32m+[m[32m  final int offsetHours;[m[41m[m
[32m+[m[32m  final bool supportsDST; // æ˜¯å¦æ”¯æŒå¤ä»¤æ—¶[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  const TimeZoneInfo({[m[41m[m
[32m+[m[32m    required this.name,[m[41m[m
[32m+[m[32m    required this.displayName,[m[41m[m
[32m+[m[32m    required this.timeZoneId,[m[41m[m
[32m+[m[32m    required this.offsetHours,[m[41m[m
[32m+[m[32m    this.supportsDST = false,[m[41m[m
[32m+[m[32m  });[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  /// é¢„å®šä¹‰çš„æ—¶åŒºåˆ—è¡¨[m[41m[m
[32m+[m[32m  static const List<TimeZoneInfo> predefinedTimeZones = [[m[41m[m
[32m+[m[32m    TimeZoneInfo([m[41m[m
[32m+[m[32m      name: 'Beijing',[m[41m[m
[32m+[m[32m      displayName: 'åŒ—äº¬',[m[41m[m
[32m+[m[32m      timeZoneId: 'Asia/Shanghai',[m[41m[m
[32m+[m[32m      offsetHours: 8,[m[41m[m
[32m+[m[32m    ),[m[41m[m
[32m+[m[32m    TimeZoneInfo([m[41m[m
[32m+[m[32m      name: 'Tokyo',[m[41m[m
[32m+[m[32m      displayName: 'ä¸œäº¬',[m[41m[m
[32m+[m[32m      timeZoneId: 'Asia/Tokyo',[m[41m[m
[32m+[m[32m      offsetHours: 9,[m[41m[m
[32m+[m[32m    ),[m[41m[m
[32m+[m[32m    TimeZoneInfo([m[41m[m
[32m+[m[32m      name: 'Seoul',[m[41m[m
[32m+[m[32m      displayName: 'é¦–å°”',[m[41m[m
[32m+[m[32m      timeZoneId: 'Asia/Seoul',[m[41m[m
[32m+[m[32m      offsetHours: 9,[m[41m[m
[32m+[m[32m    ),[m[41m[m
[32m+[m[32m    TimeZoneInfo([m[41m[m
[32m+[m[32m      name: 'Singapore',[m[41m[m
[32m+[m[32m      displayName: 'æ–°åŠ å¡',[m[41m[m
[32m+[m[32m      timeZoneId: 'Asia/Singapore',[m[41m[m
[32m+[m[32m      offsetHours: 8,[m[41m[m
[32m+[m[32m    ),[m[41m[m
[32m+[m[32m    TimeZoneInfo([m[41m[m
[32m+[m[32m      name: 'Sydney',[m[41m[m
[32m+[m[32m      displayName: 'æ‚‰å°¼',[m[41m[m
[32m+[m[32m      timeZoneId: 'Australia/Sydney',[m[41m[m
[32m+[m[32m      offsetHours: 11,[m[41m[m
[32m+[m[32m      supportsDST: true,[m[41m[m
[32m+[m[32m    ),[m[41m[m
[32m+[m[32m    TimeZoneInfo([m[41m[m
[32m+[m[32m      name: 'London',[m[41m[m
[32m+[m[32m      displayName: 'ä¼¦æ•¦',[m[41m[m
[32m+[m[32m      timeZoneId: 'Europe/London',[m[41m[m
[32m+[m[32m      offsetHours: 0,[m[41m[m
[32m+[m[32m      supportsDST: true,[m[41m[m
[32m+[m[32m    ),[m[41m[m
[32m+[m[32m    TimeZoneInfo([m[41m[m
[32m+[m[32m      name: 'Paris',[m[41m[m
[32m+[m[32m      displayName: 'å·´é»Ž',[m[41m[m
[32m+[m[32m      timeZoneId: 'Europe/Paris',[m[41m[m
[32m+[m[32m      offsetHours: 1,[m[41m[m
[32m+[m[32m      supportsDST: true,[m[41m[m
[32m+[m[32m    ),[m[41m[m
[32m+[m[32m    TimeZoneInfo([m[41m[m
[32m+[m[32m      name: 'New York',[m[41m[m
[32m+[m[32m      displayName: 'çº½çº¦',[m[41m[m
[32m+[m[32m      timeZoneId: 'America/New_York',[m[41m[m
[32m+[m[32m      offsetHours: -5,[m[41m[m
[32m+[m[32m      supportsDST: true,[m[41m[m
[32m+[m[32m    ),[m[41m[m
[32m+[m[32m    TimeZoneInfo([m[41m[m
[32m+[m[32m      name: 'Los Angeles',[m[41m[m
[32m+[m[32m      displayName: 'æ´›æ‰çŸ¶',[m[41m[m
[32m+[m[32m      timeZoneId: 'America/Los_Angeles',[m[41m[m
[32m+[m[32m      offsetHours: -8,[m[41m[m
[32m+[m[32m      supportsDST: true,[m[41m[m
[32m+[m[32m    ),[m[41m[m
[32m+[m[32m    TimeZoneInfo([m[41m[m
[32m+[m[32m      name: 'Chicago',[m[41m[m
[32m+[m[32m      displayName: 'èŠåŠ å“¥',[m[41m[m
[32m+[m[32m      timeZoneId: 'America/Chicago',[m[41m[m
[32m+[m[32m      offsetHours: -6,[m[41m[m
[32m+[m[32m      supportsDST: true,[m[41m[m
[32m+[m[32m    ),[m[41m[m
[32m+[m[32m  ];[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  /// æ ¹æ®æ—¶åŒºIDæŸ¥æ‰¾æ—¶åŒºä¿¡æ¯[m[41m[m
[32m+[m[32m  static TimeZoneInfo? findByTimeZoneId(String timeZoneId) {[m[41m[m
[32m+[m[32m    try {[m[41m[m
[32m+[m[32m      return predefinedTimeZones.firstWhere([m[41m[m
[32m+[m[32m        (tz) => tz.timeZoneId == timeZoneId,[m[41m[m
[32m+[m[32m      );[m[41m[m
[32m+[m[32m    } catch (e) {[m[41m[m
[32m+[m[32m      return null;[m[41m[m
[32m+[m[32m    }[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  Map<String, dynamic> toJson() {[m[41m[m
[32m+[m[32m    return {[m[41m[m
[32m+[m[32m      'name': name,[m[41m[m
[32m+[m[32m      'displayName': displayName,[m[41m[m
[32m+[m[32m      'timeZoneId': timeZoneId,[m[41m[m
[32m+[m[32m      'offsetHours': offsetHours,[m[41m[m
[32m+[m[32m      'supportsDST': supportsDST,[m[41m[m
[32m+[m[32m    };[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  factory TimeZoneInfo.fromJson(Map<String, dynamic> json) {[m[41m[m
[32m+[m[32m    return TimeZoneInfo([m[41m[m
[32m+[m[32m      name: json['name'] as String,[m[41m[m
[32m+[m[32m      displayName: json['displayName'] as String,[m[41m[m
[32m+[m[32m      timeZoneId: json['timeZoneId'] as String,[m[41m[m
[32m+[m[32m      offsetHours: json['offsetHours'] as int,[m[41m[m
[32m+[m[32m      supportsDST: json['supportsDST'] as bool? ?? false,[m[41m[m
[32m+[m[32m    );[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[32m}[m
\ No newline at end of file[m
[1mdiff --git a/lib/plugins/world_clock/widgets/countdown_timer_widget.dart b/lib/plugins/world_clock/widgets/countdown_timer_widget.dart[m
[1mnew file mode 100644[m
[1mindex 0000000..e1a6b1b[m
[1m--- /dev/null[m
[1m+++ b/lib/plugins/world_clock/widgets/countdown_timer_widget.dart[m
[36m@@ -0,0 +1,410 @@[m
[32m+[m[32mimport 'dart:async';[m[41m[m
[32m+[m[32mimport 'package:flutter/material.dart';[m[41m[m
[32m+[m[32mimport '../models/world_clock_models.dart';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m/// å€’è®¡æ—¶å®šæ—¶å™¨æ˜¾ç¤ºç»„ä»¶[m[41m[m
[32m+[m[32mclass CountdownTimerWidget extends StatefulWidget {[m[41m[m
[32m+[m[32m  final CountdownTimer countdownTimer;[m[41m[m
[32m+[m[32m  final VoidCallback? onDelete;[m[41m[m
[32m+[m[32m  final VoidCallback? onComplete;[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  const CountdownTimerWidget({[m[41m[m
[32m+[m[32m    Key? key,[m[41m[m
[32m+[m[32m    required this.countdownTimer,[m[41m[m
[32m+[m[32m    this.onDelete,[m[41m[m
[32m+[m[32m    this.onComplete,[m[41m[m
[32m+[m[32m  }) : super(key: key);[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  State<CountdownTimerWidget> createState() => _CountdownTimerWidgetState();[m[41m[m
[32m+[m[32m}[m[41m[m
[32m+[m[41m[m
[32m+[m[32mclass _CountdownTimerWidgetState extends State<CountdownTimerWidget>[m[41m[m
[32m+[m[32m    with TickerProviderStateMixin {[m[41m[m
[32m+[m[32m  Timer? _updateTimer;[m[41m[m
[32m+[m[32m  late AnimationController _pulseController;[m[41m[m
[32m+[m[32m  late Animation<double> _pulseAnimation;[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  void initState() {[m[41m[m
[32m+[m[32m    super.initState();[m[41m[m
[32m+[m[41m    [m
[32m+[m[32m    // è„‰å†²åŠ¨ç”»æŽ§åˆ¶å™¨[m[41m[m
[32m+[m[32m    _pulseController = AnimationController([m[41m[m
[32m+[m[32m      duration: const Duration(milliseconds: 1000),[m[41m[m
[32m+[m[32m      vsync: this,[m[41m[m
[32m+[m[32m    );[m[41m[m
[32m+[m[32m    _pulseAnimation = Tween<double>([m[41m[m
[32m+[m[32m      begin: 1.0,[m[41m[m
[32m+[m[32m      end: 1.1,[m[41m[m
[32m+[m[32m    ).animate(CurvedAnimation([m[41m[m
[32m+[m[32m      parent: _pulseController,[m[41m[m
[32m+[m[32m      curve: Curves.easeInOut,[m[41m[m
[32m+[m[32m    ));[m[41m[m
[32m+[m[41m[m
[32m+[m[32m    // æ¯ç§’æ›´æ–°ä¸€æ¬¡[m[41m[m
[32m+[m[32m    _updateTimer = Timer.periodic(const Duration(seconds: 1), (timer) {[m[41m[m
[32m+[m[32m      if (mounted) {[m[41m[m
[32m+[m[32m        setState(() {});[m[41m[m
[32m+[m[41m        [m
[32m+[m[32m        // æ£€æŸ¥æ˜¯å¦å®Œæˆ[m[41m[m
[32m+[m[32m        if (widget.countdownTimer.remainingTime == Duration.zero &&[m[41m [m
[32m+[m[32m            !widget.countdownTimer.isCompleted) {[m[41m[m
[32m+[m[32m          widget.countdownTimer.isCompleted = true;[m[41m[m
[32m+[m[32m          widget.onComplete?.call();[m[41m[m
[32m+[m[32m        }[m[41m[m
[32m+[m[41m        [m
[32m+[m[32m        // å¦‚æžœå³å°†å®Œæˆï¼Œå¼€å§‹è„‰å†²åŠ¨ç”»[m[41m[m
[32m+[m[32m        if (widget.countdownTimer.isAlmostComplete &&[m[41m [m
[32m+[m[32m            !widget.countdownTimer.isCompleted) {[m[41m[m
[32m+[m[32m          if (!_pulseController.isAnimating) {[m[41m[m
[32m+[m[32m            _pulseController.repeat(reverse: true);[m[41m[m
[32m+[m[32m          }[m[41m[m
[32m+[m[32m        } else {[m[41m[m
[32m+[m[32m          _pulseController.stop();[m[41m[m
[32m+[m[32m          _pulseController.reset();[m[41m[m
[32m+[m[32m        }[m[41m[m
[32m+[m[32m      }[m[41m[m
[32m+[m[32m    });[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  void dispose() {[m[41m[m
[32m+[m[32m    _updateTimer?.cancel();[m[41m[m
[32m+[m[32m    _pulseController.dispose();[m[41m[m
[32m+[m[32m    super.dispose();[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  Widget build(BuildContext context) {[m[41m[m
[32m+[m[32m    final theme = Theme.of(context);[m[41m[m
[32m+[m[32m    final isCompleted = widget.countdownTimer.isCompleted;[m[41m[m
[32m+[m[32m    final isAlmostComplete = widget.countdownTimer.isAlmostComplete;[m[41m[m
[32m+[m[32m    final remainingTime = widget.countdownTimer.remainingTime;[m[41m[m
[32m+[m[41m[m
[32m+[m[32m    return AnimatedBuilder([m[41m[m
[32m+[m[32m      animation: _pulseAnimation,[m[41m[m
[32m+[m[32m      builder: (context, child) {[m[41m[m
[32m+[m[32m        return Transform.scale([m[41m[m
[32m+[m[32m          scale: isAlmostComplete && !isCompleted ? _pulseAnimation.value : 1.0,[m[41m[m
[32m+[m[32m          child: Card([m[41m[m
[32m+[m[32m            margin: const EdgeInsets.only(bottom: 8.0),[m[41m[m
[32m+[m[32m            elevation: isCompleted ? 1.0 : 2.0,[m[41m[m
[32m+[m[32m            color: _getCardColor(theme, isCompleted, isAlmostComplete),[m[41m[m
[32m+[m[32m            child: Padding([m[41m[m
[32m+[m[32m              padding: const EdgeInsets.all(16.0),[m[41m[m
[32m+[m[32m              child: Column([m[41m[m
[32m+[m[32m                children: [[m[41m[m
[32m+[m[32m                  // æ ‡é¢˜å’Œæ“ä½œæŒ‰é’®[m[41m[m
[32m+[m[32m                  Row([m[41m[m
[32m+[m[32m                    children: [[m[41m[m
[32m+[m[32m                      Expanded([m[41m[m
[32m+[m[32m                        child: Text([m[41m[m
[32m+[m[32m                          widget.countdownTimer.title,[m[41m[m
[32m+[m[32m                          style: theme.textTheme.titleMedium?.copyWith([m[41m[m
[32m+[m[32m                            fontWeight: FontWeight.w500,[m[41m[m
[32m+[m[32m                            color: isCompleted[m[41m [m
[32m+[m[32m                                ? theme.textTheme.titleMedium?.color?.withOpacity(0.6)[m[41m[m
[32m+[m[32m                                : null,[m[41m[m
[32m+[m[32m                            decoration: isCompleted[m[41m [m
[32m+[m[32m                                ? TextDecoration.lineThrough[m[41m [m
[32m+[m[32m                                : null,[m[41m[m
[32m+[m[32m                          ),[m[41m[m
[32m+[m[32m                        ),[m[41m[m
[32m+[m[32m                      ),[m[41m[m
[32m+[m[32m                      if (isCompleted)[m[41m[m
[32m+[m[32m                        Container([m[41m[m
[32m+[m[32m                          padding: const EdgeInsets.symmetric([m[41m[m
[32m+[m[32m                            horizontal: 8,[m[41m[m
[32m+[m[32m                            vertical: 4,[m[41m[m
[32m+[m[32m                          ),[m[41m[m
[32m+[m[32m                          decoration: BoxDecoration([m[41m[m
[32m+[m[32m                            color: Colors.green,[m[41m[m
[32m+[m[32m                            borderRadius: BorderRadius.circular(12),[m[41m[m
[32m+[m[32m                          ),[m[41m[m
[32m+[m[32m                          child: Text([m[41m[m
[32m+[m[32m                            'å·²å®Œæˆ',[m[41m[m
[32m+[m[32m                            style: theme.textTheme.labelSmall?.copyWith([m[41m[m
[32m+[m[32m                              color: Colors.white,[m[41m[m
[32m+[m[32m                              fontSize: 10,[m[41m[m
[32m+[m[32m                            ),[m[41m[m
[32m+[m[32m                          ),[m[41m[m
[32m+[m[32m                        ),[m[41m[m
[32m+[m[32m                      const SizedBox(width: 8),[m[41m[m
[32m+[m[32m                      if (widget.onDelete != null)[m[41m[m
[32m+[m[32m                        IconButton([m[41m[m
[32m+[m[32m                          icon: const Icon(Icons.delete_outline),[m[41m[m
[32m+[m[32m                          onPressed: () => _showDeleteConfirmation(context),[m[41m[m
[32m+[m[32m                          tooltip: 'åˆ é™¤å€’è®¡æ—¶',[m[41m[m
[32m+[m[32m                          iconSize: 20,[m[41m[m
[32m+[m[32m                        ),[m[41m[m
[32m+[m[32m                    ],[m[41m[m
[32m+[m[32m                  ),[m[41m[m
[32m+[m[41m                  [m
[32m+[m[32m                  const SizedBox(height: 12),[m[41m[m
[32m+[m[41m                  [m
[32m+[m[32m                  // å€’è®¡æ—¶æ˜¾ç¤º[m[41m[m
[32m+[m[32m                  Row([m[41m[m
[32m+[m[32m                    children: [[m[41m[m
[32m+[m[32m                      Expanded([m[41m[m
[32m+[m[32m                        child: Column([m[41m[m
[32m+[m[32m                          crossAxisAlignment: CrossAxisAlignment.start,[m[41m[m
[32m+[m[32m                          children: [[m[41m[m
[32m+[m[32m                            Text([m[41m[m
[32m+[m[32m                              widget.countdownTimer.formattedRemainingTime,[m[41m[m
[32m+[m[32m                              style: theme.textTheme.headlineMedium?.copyWith([m[41m[m
[32m+[m[32m                                fontFamily: 'monospace',[m[41m[m
[32m+[m[32m                                fontWeight: FontWeight.bold,[m[41m[m
[32m+[m[32m                                color: _getTimeColor(theme, isCompleted, isAlmostComplete),[m[41m[m
[32m+[m[32m                              ),[m[41m[m
[32m+[m[32m                            ),[m[41m[m
[32m+[m[32m                            const SizedBox(height: 4),[m[41m[m
[32m+[m[32m                            Text([m[41m[m
[32m+[m[32m                              _getStatusText(isCompleted, remainingTime),[m[41m[m
[32m+[m[32m                              style: theme.textTheme.bodySmall?.copyWith([m[41m[m
[32m+[m[32m                                color: _getStatusColor(theme, isCompleted, isAlmostComplete),[m[41m[m
[32m+[m[32m                              ),[m[41m[m
[32m+[m[32m                            ),[m[41m[m
[32m+[m[32m                          ],[m[41m[m
[32m+[m[32m                        ),[m[41m[m
[32m+[m[32m                      ),[m[41m[m
[32m+[m[41m                      [m
[32m+[m[32m                      // åœ†å½¢è¿›åº¦æŒ‡ç¤ºå™¨[m[41m[m
[32m+[m[32m                      SizedBox([m[41m[m
[32m+[m[32m                        width: 60,[m[41m[m
[32m+[m[32m                        height: 60,[m[41m[m
[32m+[m[32m                        child: Stack([m[41m[m
[32m+[m[32m                          children: [[m[41m[m
[32m+[m[32m                            CircularProgressIndicator([m[41m[m
[32m+[m[32m                              value: isCompleted ? 1.0 : _calculateProgress(),[m[41m[m
[32m+[m[32m                              strokeWidth: 4,[m[41m[m
[32m+[m[32m                              backgroundColor: theme.dividerColor.withOpacity(0.3),[m[41m[m
[32m+[m[32m                              valueColor: AlwaysStoppedAnimation<Color>([m[41m[m
[32m+[m[32m                                _getProgressColor(theme, isCompleted, isAlmostComplete),[m[41m[m
[32m+[m[32m                              ),[m[41m[m
[32m+[m[32m                            ),[m[41m[m
[32m+[m[32m                            Center([m[41m[m
[32m+[m[32m                              child: Icon([m[41m[m
[32m+[m[32m                                isCompleted[m[41m [m
[32m+[m[32m                                    ? Icons.check_circle[m[41m[m
[32m+[m[32m                                    : isAlmostComplete[m[41m [m
[32m+[m[32m                                        ? Icons.warning[m[41m[m
[32m+[m[32m                                        : Icons.timer,[m[41m[m
[32m+[m[32m                                color: _getProgressColor(theme, isCompleted, isAlmostComplete),[m[41m[m
[32m+[m[32m                                size: 24,[m[41m[m
[32m+[m[32m                              ),[m[41m[m
[32m+[m[32m                            ),[m[41m[m
[32m+[m[32m                          ],[m[41m[m
[32m+[m[32m                        ),[m[41m[m
[32m+[m[32m                      ),[m[41m[m
[32m+[m[32m                    ],[m[41m[m
[32m+[m[32m                  ),[m[41m[m
[32m+[m[32m                ],[m[41m[m
[32m+[m[32m              ),[m[41m[m
[32m+[m[32m            ),[m[41m[m
[32m+[m[32m          ),[m[41m[m
[32m+[m[32m        );[m[41m[m
[32m+[m[32m      },[m[41m[m
[32m+[m[32m    );[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  Color? _getCardColor(ThemeData theme, bool isCompleted, bool isAlmostComplete) {[m[41m[m
[32m+[m[32m    if (isCompleted) {[m[41m[m
[32m+[m[32m      return Colors.green.withOpacity(0.1);[m[41m[m
[32m+[m[32m    } else if (isAlmostComplete) {[m[41m[m
[32m+[m[32m      return Colors.orange.withOpacity(0.1);[m[41m[m
[32m+[m[32m    }[m[41m[m
[32m+[m[32m    return null;[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  Color _getTimeColor(ThemeData theme, bool isCompleted, bool isAlmostComplete) {[m[41m[m
[32m+[m[32m    if (isCompleted) {[m[41m[m
[32m+[m[32m      return Colors.green;[m[41m[m
[32m+[m[32m    } else if (isAlmostComplete) {[m[41m[m
[32m+[m[32m      return Colors.orange;[m[41m[m
[32m+[m[32m    }[m[41m[m
[32m+[m[32m    return theme.primaryColor;[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  Color _getStatusColor(ThemeData theme, bool isCompleted, bool isAlmostComplete) {[m[41m[m
[32m+[m[32m    if (isCompleted) {[m[41m[m
[32m+[m[32m      return Colors.green;[m[41m[m
[32m+[m[32m    } else if (isAlmostComplete) {[m[41m[m
[32m+[m[32m      return Colors.orange;[m[41m[m
[32m+[m[32m    }[m[41m[m
[32m+[m[32m    return theme.textTheme.bodySmall?.color?.withOpacity(0.7) ?? Colors.grey;[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  Color _getProgressColor(ThemeData theme, bool isCompleted, bool isAlmostComplete) {[m[41m[m
[32m+[m[32m    if (isCompleted) {[m[41m[m
[32m+[m[32m      return Colors.green;[m[41m[m
[32m+[m[32m    } else if (isAlmostComplete) {[m[41m[m
[32m+[m[32m      return Colors.orange;[m[41m[m
[32m+[m[32m    }[m[41m[m
[32m+[m[32m    return theme.primaryColor;[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  String _getStatusText(bool isCompleted, Duration remainingTime) {[m[41m[m
[32m+[m[32m    if (isCompleted) {[m[41m[m
[32m+[m[32m      return 'å€’è®¡æ—¶å·²å®Œæˆ';[m[41m[m
[32m+[m[32m    } else if (remainingTime.inMinutes < 1) {[m[41m[m
[32m+[m[32m      return 'å³å°†å®Œæˆï¼';[m[41m[m
[32m+[m[32m    } else if (remainingTime.inHours < 1) {[m[41m[m
[32m+[m[32m      return 'å‰©ä½™ ${remainingTime.inMinutes} åˆ†é’Ÿ';[m[41m[m
[32m+[m[32m    } else if (remainingTime.inDays < 1) {[m[41m[m
[32m+[m[32m      return 'å‰©ä½™ ${remainingTime.inHours} å°æ—¶ ${remainingTime.inMinutes % 60} åˆ†é’Ÿ';[m[41m[m
[32m+[m[32m    } else {[m[41m[m
[32m+[m[32m      return 'å‰©ä½™ ${remainingTime.inDays} å¤© ${remainingTime.inHours % 24} å°æ—¶';[m[41m[m
[32m+[m[32m    }[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  double _calculateProgress() {[m[41m[m
[32m+[m[32m    // è¿™é‡Œéœ€è¦åŽŸå§‹æŒç»­æ—¶é—´æ¥è®¡ç®—è¿›åº¦[m[41m[m
[32m+[m[32m    // ç”±äºŽæ¨¡åž‹ä¸­æ²¡æœ‰å­˜å‚¨åŽŸå§‹æŒç»­æ—¶é—´ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªç®€åŒ–çš„è®¡ç®—[m[41m[m
[32m+[m[32m    final remaining = widget.countdownTimer.remainingTime;[m[41m[m
[32m+[m[32m    if (remaining == Duration.zero) return 1.0;[m[41m[m
[32m+[m[41m    [m
[32m+[m[32m    // å‡è®¾æœ€å¤§å€’è®¡æ—¶ä¸º24å°æ—¶ï¼Œè¿™æ˜¯ä¸€ä¸ªç®€åŒ–çš„å®žçŽ°[m[41m[m
[32m+[m[32m    const maxDuration = Duration(hours: 24);[m[41m[m
[32m+[m[32m    final elapsed = maxDuration - remaining;[m[41m[m
[32m+[m[32m    return elapsed.inMilliseconds / maxDuration.inMilliseconds;[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  void _showDeleteConfirmation(BuildContext context) {[m[41m[m
[32m+[m[32m    showDialog([m[41m[m
[32m+[m[32m      context: context,[m[41m[m
[32m+[m[32m      builder: (context) => AlertDialog([m[41m[m
[32m+[m[32m        title: const Text('ç¡®è®¤åˆ é™¤'),[m[41m[m
[32m+[m[32m        content: Text('ç¡®å®šè¦åˆ é™¤å€’è®¡æ—¶ "${widget.countdownTimer.title}" å—ï¼Ÿ'),[m[41m[m
[32m+[m[32m        actions: [[m[41m[m
[32m+[m[32m          TextButton([m[41m[m
[32m+[m[32m            onPressed: () => Navigator.of(context).pop(),[m[41m[m
[32m+[m[32m            child: const Text('å–æ¶ˆ'),[m[41m[m
[32m+[m[32m          ),[m[41m[m
[32m+[m[32m          ElevatedButton([m[41m[m
[32m+[m[32m            onPressed: () {[m[41m[m
[32m+[m[32m              Navigator.of(context).pop();[m[41m[m
[32m+[m[32m              widget.onDelete?.call();[m[41m[m
[32m+[m[32m            },[m[41m[m
[32m+[m[32m            style: ElevatedButton.styleFrom([m[41m[m
[32m+[m[32m              backgroundColor: Colors.red,[m[41m[m
[32m+[m[32m              foregroundColor: Colors.white,[m[41m[m
[32m+[m[32m            ),[m[41m[m
[32m+[m[32m            child: const Text('åˆ é™¤'),[m[41m[m
[32m+[m[32m          ),[m[41m[m
[32m+[m[32m        ],[m[41m[m
[32m+[m[32m      ),[m[41m[m
[32m+[m[32m    );[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[32m}[m[41m[m
[32m+[m[41m[m
[32m+[m[32m/// ç´§å‡‘åž‹å€’è®¡æ—¶ç»„ä»¶[m[41m[m
[32m+[m[32mclass CompactCountdownWidget extends StatefulWidget {[m[41m[m
[32m+[m[32m  final CountdownTimer countdownTimer;[m[41m[m
[32m+[m[32m  final VoidCallback? onTap;[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  const CompactCountdownWidget({[m[41m[m
[32m+[m[32m    Key? key,[m[41m[m
[32m+[m[32m    required this.countdownTimer,[m[41m[m
[32m+[m[32m    this.onTap,[m[41m[m
[32m+[m[32m  }) : super(key: key);[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  State<CompactCountdownWidget> createState() => _CompactCountdownWidgetState();[m[41m[m
[32m+[m[32m}[m[41m[m
[32m+[m[41m[m
[32m+[m[32mclass _CompactCountdownWidgetState extends State<CompactCountdownWidget> {[m[41m[m
[32m+[m[32m  Timer? _updateTimer;[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  void initState() {[m[41m[m
[32m+[m[32m    super.initState();[m[41m[m
[32m+[m[32m    _updateTimer = Timer.periodic(const Duration(seconds: 1), (timer) {[m[41m[m
[32m+[m[32m      if (mounted) {[m[41m[m
[32m+[m[32m        setState(() {});[m[41m[m
[32m+[m[32m      }[m[41m[m
[32m+[m[32m    });[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  void dispose() {[m[41m[m
[32m+[m[32m    _updateTimer?.cancel();[m[41m[m
[32m+[m[32m    super.dispose();[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  Widget build(BuildContext context) {[m[41m[m
[32m+[m[32m    final theme = Theme.of(context);[m[41m[m
[32m+[m[32m    final isCompleted = widget.countdownTimer.isCompleted;[m[41m[m
[32m+[m[32m    final isAlmostComplete = widget.countdownTimer.isAlmostComplete;[m[41m[m
[32m+[m[41m[m
[32m+[m[32m    return InkWell([m[41m[m
[32m+[m[32m      onTap: widget.onTap,[m[41m[m
[32m+[m[32m      child: Container([m[41m[m
[32m+[m[32m        padding: const EdgeInsets.symmetric(horizontal: 12, vertical: 8),[m[41m[m
[32m+[m[32m        child: Row([m[41m[m
[32m+[m[32m          children: [[m[41m[m
[32m+[m[32m            // çŠ¶æ€å›¾æ ‡[m[41m[m
[32m+[m[32m            Container([m[41m[m
[32m+[m[32m              width: 8,[m[41m[m
[32m+[m[32m              height: 8,[m[41m[m
[32m+[m[32m              decoration: BoxDecoration([m[41m[m
[32m+[m[32m                shape: BoxShape.circle,[m[41m[m
[32m+[m[32m                color: isCompleted[m[41m [m
[32m+[m[32m                    ? Colors.green[m[41m [m
[32m+[m[32m                    : isAlmostComplete[m[41m [m
[32m+[m[32m                        ? Colors.orange[m[41m [m
[32m+[m[32m                        : theme.primaryColor,[m[41m[m
[32m+[m[32m              ),[m[41m[m
[32m+[m[32m            ),[m[41m[m
[32m+[m[41m            [m
[32m+[m[32m            const SizedBox(width: 12),[m[41m[m
[32m+[m[41m            [m
[32m+[m[32m            // æ ‡é¢˜å’Œæ—¶é—´[m[41m[m
[32m+[m[32m            Expanded([m[41m[m
[32m+[m[32m              child: Column([m[41m[m
[32m+[m[32m                crossAxisAlignment: CrossAxisAlignment.start,[m[41m[m
[32m+[m[32m                children: [[m[41m[m
[32m+[m[32m                  Text([m[41m[m
[32m+[m[32m                    widget.countdownTimer.title,[m[41m[m
[32m+[m[32m                    style: theme.textTheme.bodyMedium?.copyWith([m[41m[m
[32m+[m[32m                      fontWeight: FontWeight.w500,[m[41m[m
[32m+[m[32m                      decoration: isCompleted ? TextDecoration.lineThrough : null,[m[41m[m
[32m+[m[32m                    ),[m[41m[m
[32m+[m[32m                    maxLines: 1,[m[41m[m
[32m+[m[32m                    overflow: TextOverflow.ellipsis,[m[41m[m
[32m+[m[32m                  ),[m[41m[m
[32m+[m[32m                  Text([m[41m[m
[32m+[m[32m                    widget.countdownTimer.formattedRemainingTime,[m[41m[m
[32m+[m[32m                    style: theme.textTheme.bodySmall?.copyWith([m[41m[m
[32m+[m[32m                      fontFamily: 'monospace',[m[41m[m
[32m+[m[32m                      color: isCompleted[m[41m [m
[32m+[m[32m                          ? Colors.green[m[41m [m
[32m+[m[32m                          : isAlmostComplete[m[41m [m
[32m+[m[32m                              ? Colors.orange[m[41m [m
[32m+[m[32m                              : null,[m[41m[m
[32m+[m[32m                    ),[m[41m[m
[32m+[m[32m                  ),[m[41m[m
[32m+[m[32m                ],[m[41m[m
[32m+[m[32m              ),[m[41m[m
[32m+[m[32m            ),[m[41m[m
[32m+[m[41m            [m
[32m+[m[32m            // å®ŒæˆçŠ¶æ€[m[41m[m
[32m+[m[32m            if (isCompleted)[m[41m[m
[32m+[m[32m              const Icon([m[41m[m
[32m+[m[32m                Icons.check_circle,[m[41m[m
[32m+[m[32m                color: Colors.green,[m[41m[m
[32m+[m[32m                size: 20,[m[41m[m
[32m+[m[32m              )[m[41m[m
[32m+[m[32m            else if (isAlmostComplete)[m[41m[m
[32m+[m[32m              const Icon([m[41m[m
[32m+[m[32m                Icons.warning,[m[41m[m
[32m+[m[32m                color: Colors.orange,[m[41m[m
[32m+[m[32m                size: 20,[m[41m[m
[32m+[m[32m              ),[m[41m[m
[32m+[m[32m          ],[m[41m[m
[32m+[m[32m        ),[m[41m[m
[32m+[m[32m      ),[m[41m[m
[32m+[m[32m    );[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[32m}[m
\ No newline at end of file[m
[1mdiff --git a/lib/plugins/world_clock/widgets/world_clock_widget.dart b/lib/plugins/world_clock/widgets/world_clock_widget.dart[m
[1mnew file mode 100644[m
[1mindex 0000000..73d3fef[m
[1m--- /dev/null[m
[1m+++ b/lib/plugins/world_clock/widgets/world_clock_widget.dart[m
[36m@@ -0,0 +1,360 @@[m
[32m+[m[32mimport 'dart:async';[m[41m[m
[32m+[m[32mimport 'package:flutter/material.dart';[m[41m[m
[32m+[m[32mimport '../models/world_clock_models.dart';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m/// ä¸–ç•Œæ—¶é’Ÿæ˜¾ç¤ºç»„ä»¶[m[41m[m
[32m+[m[32mclass WorldClockWidget extends StatefulWidget {[m[41m[m
[32m+[m[32m  final WorldClockItem worldClock;[m[41m[m
[32m+[m[32m  final VoidCallback? onDelete;[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  const WorldClockWidget({[m[41m[m
[32m+[m[32m    Key? key,[m[41m[m
[32m+[m[32m    required this.worldClock,[m[41m[m
[32m+[m[32m    this.onDelete,[m[41m[m
[32m+[m[32m  }) : super(key: key);[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  State<WorldClockWidget> createState() => _WorldClockWidgetState();[m[41m[m
[32m+[m[32m}[m[41m[m
[32m+[m[41m[m
[32m+[m[32mclass _WorldClockWidgetState extends State<WorldClockWidget> {[m[41m[m
[32m+[m[32m  Timer? _updateTimer;[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  void initState() {[m[41m[m
[32m+[m[32m    super.initState();[m[41m[m
[32m+[m[32m    // æ¯ç§’æ›´æ–°ä¸€æ¬¡æ—¶é—´æ˜¾ç¤º[m[41m[m
[32m+[m[32m    _updateTimer = Timer.periodic(const Duration(seconds: 1), (timer) {[m[41m[m
[32m+[m[32m      if (mounted) {[m[41m[m
[32m+[m[32m        setState(() {});[m[41m[m
[32m+[m[32m      }[m[41m[m
[32m+[m[32m    });[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  void dispose() {[m[41m[m
[32m+[m[32m    _updateTimer?.cancel();[m[41m[m
[32m+[m[32m    super.dispose();[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  Widget build(BuildContext context) {[m[41m[m
[32m+[m[32m    final theme = Theme.of(context);[m[41m[m
[32m+[m[32m    final isDefault = widget.worldClock.isDefault;[m[41m[m
[32m+[m[41m[m
[32m+[m[32m    return Card([m[41m[m
[32m+[m[32m      margin: const EdgeInsets.only(bottom: 8.0),[m[41m[m
[32m+[m[32m      elevation: isDefault ? 4.0 : 2.0,[m[41m[m
[32m+[m[32m      color: isDefault ? theme.primaryColor.withOpacity(0.1) : null,[m[41m[m
[32m+[m[32m      child: Padding([m[41m[m
[32m+[m[32m        padding: const EdgeInsets.all(16.0),[m[41m[m
[32m+[m[32m        child: Row([m[41m[m
[32m+[m[32m          children: [[m[41m[m
[32m+[m[32m            // åŸŽå¸‚ä¿¡æ¯[m[41m[m
[32m+[m[32m            Expanded([m[41m[m
[32m+[m[32m              flex: 2,[m[41m[m
[32m+[m[32m              child: Column([m[41m[m
[32m+[m[32m                crossAxisAlignment: CrossAxisAlignment.start,[m[41m[m
[32m+[m[32m                children: [[m[41m[m
[32m+[m[32m                  Row([m[41m[m
[32m+[m[32m                    children: [[m[41m[m
[32m+[m[32m                      Text([m[41m[m
[32m+[m[32m                        widget.worldClock.cityName,[m[41m[m
[32m+[m[32m                        style: theme.textTheme.titleMedium?.copyWith([m[41m[m
[32m+[m[32m                          fontWeight: isDefault ? FontWeight.bold : FontWeight.normal,[m[41m[m
[32m+[m[32m                        ),[m[41m[m
[32m+[m[32m                      ),[m[41m[m
[32m+[m[32m                      if (isDefault) ...[[m[41m[m
[32m+[m[32m                        const SizedBox(width: 8),[m[41m[m
[32m+[m[32m                        Container([m[41m[m
[32m+[m[32m                          padding: const EdgeInsets.symmetric([m[41m[m
[32m+[m[32m                            horizontal: 6,[m[41m[m
[32m+[m[32m                            vertical: 2,[m[41m[m
[32m+[m[32m                          ),[m[41m[m
[32m+[m[32m                          decoration: BoxDecoration([m[41m[m
[32m+[m[32m                            color: theme.primaryColor,[m[41m[m
[32m+[m[32m                            borderRadius: BorderRadius.circular(10),[m[41m[m
[32m+[m[32m                          ),[m[41m[m
[32m+[m[32m                          child: Text([m[41m[m
[32m+[m[32m                            'é»˜è®¤',[m[41m[m
[32m+[m[32m                            style: theme.textTheme.labelSmall?.copyWith([m[41m[m
[32m+[m[32m                              color: Colors.white,[m[41m[m
[32m+[m[32m                              fontSize: 10,[m[41m[m
[32m+[m[32m                            ),[m[41m[m
[32m+[m[32m                          ),[m[41m[m
[32m+[m[32m                        ),[m[41m[m
[32m+[m[32m                      ],[m[41m[m
[32m+[m[32m                    ],[m[41m[m
[32m+[m[32m                  ),[m[41m[m
[32m+[m[32m                  const SizedBox(height: 4),[m[41m[m
[32m+[m[32m                  Text([m[41m[m
[32m+[m[32m                    widget.worldClock.timeZone,[m[41m[m
[32m+[m[32m                    style: theme.textTheme.bodySmall?.copyWith([m[41m[m
[32m+[m[32m                      color: theme.textTheme.bodySmall?.color?.withOpacity(0.7),[m[41m[m
[32m+[m[32m                    ),[m[41m[m
[32m+[m[32m                  ),[m[41m[m
[32m+[m[32m                ],[m[41m[m
[32m+[m[32m              ),[m[41m[m
[32m+[m[32m            ),[m[41m[m
[32m+[m[41m            [m
[32m+[m[32m            // æ—¶é—´æ˜¾ç¤º[m[41m[m
[32m+[m[32m            Expanded([m[41m[m
[32m+[m[32m              flex: 3,[m[41m[m
[32m+[m[32m              child: Column([m[41m[m
[32m+[m[32m                crossAxisAlignment: CrossAxisAlignment.end,[m[41m[m
[32m+[m[32m                children: [[m[41m[m
[32m+[m[32m                  Text([m[41m[m
[32m+[m[32m                    widget.worldClock.formattedTime,[m[41m[m
[32m+[m[32m                    style: theme.textTheme.headlineSmall?.copyWith([m[41m[m
[32m+[m[32m                      fontWeight: FontWeight.bold,[m[41m[m
[32m+[m[32m                      fontFamily: 'monospace',[m[41m[m
[32m+[m[32m                      color: isDefault ? theme.primaryColor : null,[m[41m[m
[32m+[m[32m                    ),[m[41m[m
[32m+[m[32m                  ),[m[41m[m
[32m+[m[32m                  const SizedBox(height: 4),[m[41m[m
[32m+[m[32m                  Text([m[41m[m
[32m+[m[32m                    widget.worldClock.formattedDate,[m[41m[m
[32m+[m[32m                    style: theme.textTheme.bodySmall,[m[41m[m
[32m+[m[32m                  ),[m[41m[m
[32m+[m[32m                ],[m[41m[m
[32m+[m[32m              ),[m[41m[m
[32m+[m[32m            ),[m[41m[m
[32m+[m[41m            [m
[32m+[m[32m            // æ“ä½œæŒ‰é’®[m[41m[m
[32m+[m[32m            if (widget.onDelete != null)[m[41m[m
[32m+[m[32m              IconButton([m[41m[m
[32m+[m[32m                icon: const Icon(Icons.delete_outline),[m[41m[m
[32m+[m[32m                onPressed: () => _showDeleteConfirmation(context),[m[41m[m
[32m+[m[32m                tooltip: 'åˆ é™¤æ—¶é’Ÿ',[m[41m[m
[32m+[m[32m                iconSize: 20,[m[41m[m
[32m+[m[32m              ),[m[41m[m
[32m+[m[32m          ],[m[41m[m
[32m+[m[32m        ),[m[41m[m
[32m+[m[32m      ),[m[41m[m
[32m+[m[32m    );[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  void _showDeleteConfirmation(BuildContext context) {[m[41m[m
[32m+[m[32m    showDialog([m[41m[m
[32m+[m[32m      context: context,[m[41m[m
[32m+[m[32m      builder: (context) => AlertDialog([m[41m[m
[32m+[m[32m        title: const Text('ç¡®è®¤åˆ é™¤'),[m[41m[m
[32m+[m[32m        content: Text('ç¡®å®šè¦åˆ é™¤ ${widget.worldClock.cityName} çš„æ—¶é’Ÿå—ï¼Ÿ'),[m[41m[m
[32m+[m[32m        actions: [[m[41m[m
[32m+[m[32m          TextButton([m[41m[m
[32m+[m[32m            onPressed: () => Navigator.of(context).pop(),[m[41m[m
[32m+[m[32m            child: const Text('å–æ¶ˆ'),[m[41m[m
[32m+[m[32m          ),[m[41m[m
[32m+[m[32m          ElevatedButton([m[41m[m
[32m+[m[32m            onPressed: () {[m[41m[m
[32m+[m[32m              Navigator.of(context).pop();[m[41m[m
[32m+[m[32m              widget.onDelete?.call();[m[41m[m
[32m+[m[32m            },[m[41m[m
[32m+[m[32m            style: ElevatedButton.styleFrom([m[41m[m
[32m+[m[32m              backgroundColor: Colors.red,[m[41m[m
[32m+[m[32m              foregroundColor: Colors.white,[m[41m[m
[32m+[m[32m            ),[m[41m[m
[32m+[m[32m            child: const Text('åˆ é™¤'),[m[41m[m
[32m+[m[32m          ),[m[41m[m
[32m+[m[32m        ],[m[41m[m
[32m+[m[32m      ),[m[41m[m
[32m+[m[32m    );[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[32m}[m[41m[m
[32m+[m[41m[m
[32m+[m[32m/// ç´§å‡‘åž‹ä¸–ç•Œæ—¶é’Ÿç»„ä»¶ï¼ˆç”¨äºŽåˆ—è¡¨æ˜¾ç¤ºï¼‰[m[41m[m
[32m+[m[32mclass CompactWorldClockWidget extends StatefulWidget {[m[41m[m
[32m+[m[32m  final WorldClockItem worldClock;[m[41m[m
[32m+[m[32m  final VoidCallback? onTap;[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  const CompactWorldClockWidget({[m[41m[m
[32m+[m[32m    Key? key,[m[41m[m
[32m+[m[32m    required this.worldClock,[m[41m[m
[32m+[m[32m    this.onTap,[m[41m[m
[32m+[m[32m  }) : super(key: key);[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  State<CompactWorldClockWidget> createState() => _CompactWorldClockWidgetState();[m[41m[m
[32m+[m[32m}[m[41m[m
[32m+[m[41m[m
[32m+[m[32mclass _CompactWorldClockWidgetState extends State<CompactWorldClockWidget> {[m[41m[m
[32m+[m[32m  Timer? _updateTimer;[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  void initState() {[m[41m[m
[32m+[m[32m    super.initState();[m[41m[m
[32m+[m[32m    _updateTimer = Timer.periodic(const Duration(seconds: 1), (timer) {[m[41m[m
[32m+[m[32m      if (mounted) {[m[41m[m
[32m+[m[32m        setState(() {});[m[41m[m
[32m+[m[32m      }[m[41m[m
[32m+[m[32m    });[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  void dispose() {[m[41m[m
[32m+[m[32m    _updateTimer?.cancel();[m[41m[m
[32m+[m[32m    super.dispose();[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  Widget build(BuildContext context) {[m[41m[m
[32m+[m[32m    final theme = Theme.of(context);[m[41m[m
[32m+[m[41m[m
[32m+[m[32m    return InkWell([m[41m[m
[32m+[m[32m      onTap: widget.onTap,[m[41m[m
[32m+[m[32m      child: Container([m[41m[m
[32m+[m[32m        padding: const EdgeInsets.symmetric(horizontal: 12, vertical: 8),[m[41m[m
[32m+[m[32m        child: Row([m[41m[m
[32m+[m[32m          mainAxisAlignment: MainAxisAlignment.spaceBetween,[m[41m[m
[32m+[m[32m          children: [[m[41m[m
[32m+[m[32m            Column([m[41m[m
[32m+[m[32m              crossAxisAlignment: CrossAxisAlignment.start,[m[41m[m
[32m+[m[32m              children: [[m[41m[m
[32m+[m[32m                Text([m[41m[m
[32m+[m[32m                  widget.worldClock.cityName,[m[41m[m
[32m+[m[32m                  style: theme.textTheme.bodyMedium?.copyWith([m[41m[m
[32m+[m[32m                    fontWeight: FontWeight.w500,[m[41m[m
[32m+[m[32m                  ),[m[41m[m
[32m+[m[32m                ),[m[41m[m
[32m+[m[32m                Text([m[41m[m
[32m+[m[32m                  widget.worldClock.timeZone,[m[41m[m
[32m+[m[32m                  style: theme.textTheme.bodySmall?.copyWith([m[41m[m
[32m+[m[32m                    color: theme.textTheme.bodySmall?.color?.withOpacity(0.6),[m[41m[m
[32m+[m[32m                  ),[m[41m[m
[32m+[m[32m                ),[m[41m[m
[32m+[m[32m              ],[m[41m[m
[32m+[m[32m            ),[m[41m[m
[32m+[m[32m            Text([m[41m[m
[32m+[m[32m              widget.worldClock.formattedTime,[m[41m[m
[32m+[m[32m              style: theme.textTheme.titleMedium?.copyWith([m[41m[m
[32m+[m[32m                fontFamily: 'monospace',[m[41m[m
[32m+[m[32m                fontWeight: FontWeight.bold,[m[41m[m
[32m+[m[32m              ),[m[41m[m
[32m+[m[32m            ),[m[41m[m
[32m+[m[32m          ],[m[41m[m
[32m+[m[32m        ),[m[41m[m
[32m+[m[32m      ),[m[41m[m
[32m+[m[32m    );[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[32m}[m[41m[m
[32m+[m[41m[m
[32m+[m[32m/// å¤§åž‹æ—¶é’Ÿæ˜¾ç¤ºç»„ä»¶ï¼ˆç”¨äºŽä¸»è¦æ˜¾ç¤ºï¼‰[m[41m[m
[32m+[m[32mclass LargeClockWidget extends StatefulWidget {[m[41m[m
[32m+[m[32m  final WorldClockItem worldClock;[m[41m[m
[32m+[m[32m  final bool showSeconds;[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  const LargeClockWidget({[m[41m[m
[32m+[m[32m    Key? key,[m[41m[m
[32m+[m[32m    required this.worldClock,[m[41m[m
[32m+[m[32m    this.showSeconds = true,[m[41m[m
[32m+[m[32m  }) : super(key: key);[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  State<LargeClockWidget> createState() => _LargeClockWidgetState();[m[41m[m
[32m+[m[32m}[m[41m[m
[32m+[m[41m[m
[32m+[m[32mclass _LargeClockWidgetState extends State<LargeClockWidget> {[m[41m[m
[32m+[m[32m  Timer? _updateTimer;[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  void initState() {[m[41m[m
[32m+[m[32m    super.initState();[m[41m[m
[32m+[m[32m    _updateTimer = Timer.periodic(const Duration(seconds: 1), (timer) {[m[41m[m
[32m+[m[32m      if (mounted) {[m[41m[m
[32m+[m[32m        setState(() {});[m[41m[m
[32m+[m[32m      }[m[41m[m
[32m+[m[32m    });[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  void dispose() {[m[41m[m
[32m+[m[32m    _updateTimer?.cancel();[m[41m[m
[32m+[m[32m    super.dispose();[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  Widget build(BuildContext context) {[m[41m[m
[32m+[m[32m    final theme = Theme.of(context);[m[41m[m
[32m+[m[32m    final time = widget.worldClock.currentTime;[m[41m[m
[32m+[m[41m[m
[32m+[m[32m    return Container([m[41m[m
[32m+[m[32m      padding: const EdgeInsets.all(24),[m[41m[m
[32m+[m[32m      decoration: BoxDecoration([m[41m[m
[32m+[m[32m        gradient: LinearGradient([m[41m[m
[32m+[m[32m          begin: Alignment.topLeft,[m[41m[m
[32m+[m[32m          end: Alignment.bottomRight,[m[41m[m
[32m+[m[32m          colors: [[m[41m[m
[32m+[m[32m            theme.primaryColor.withOpacity(0.1),[m[41m[m
[32m+[m[32m            theme.primaryColor.withOpacity(0.05),[m[41m[m
[32m+[m[32m          ],[m[41m[m
[32m+[m[32m        ),[m[41m[m
[32m+[m[32m        borderRadius: BorderRadius.circular(16),[m[41m[m
[32m+[m[32m        border: Border.all([m[41m[m
[32m+[m[32m          color: theme.primaryColor.withOpacity(0.2),[m[41m[m
[32m+[m[32m          width: 1,[m[41m[m
[32m+[m[32m        ),[m[41m[m
[32m+[m[32m      ),[m[41m[m
[32m+[m[32m      child: Column([m[41m[m
[32m+[m[32m        children: [[m[41m[m
[32m+[m[32m          // åŸŽå¸‚åç§°[m[41m[m
[32m+[m[32m          Text([m[41m[m
[32m+[m[32m            widget.worldClock.cityName,[m[41m[m
[32m+[m[32m            style: theme.textTheme.headlineSmall?.copyWith([m[41m[m
[32m+[m[32m              fontWeight: FontWeight.bold,[m[41m[m
[32m+[m[32m              color: theme.primaryColor,[m[41m[m
[32m+[m[32m            ),[m[41m[m
[32m+[m[32m          ),[m[41m[m
[32m+[m[41m          [m
[32m+[m[32m          const SizedBox(height: 8),[m[41m[m
[32m+[m[41m          [m
[32m+[m[32m          // æ—¶åŒºä¿¡æ¯[m[41m[m
[32m+[m[32m          Text([m[41m[m
[32m+[m[32m            widget.worldClock.timeZone,[m[41m[m
[32m+[m[32m            style: theme.textTheme.bodyMedium?.copyWith([m[41m[m
[32m+[m[32m              color: theme.textTheme.bodyMedium?.color?.withOpacity(0.7),[m[41m[m
[32m+[m[32m            ),[m[41m[m
[32m+[m[32m          ),[m[41m[m
[32m+[m[41m          [m
[32m+[m[32m          const SizedBox(height: 24),[m[41m[m
[32m+[m[41m          [m
[32m+[m[32m          // å¤§æ—¶é’Ÿæ˜¾ç¤º[m[41m[m
[32m+[m[32m          Row([m[41m[m
[32m+[m[32m            mainAxisAlignment: MainAxisAlignment.center,[m[41m[m
[32m+[m[32m            crossAxisAlignment: CrossAxisAlignment.baseline,[m[41m[m
[32m+[m[32m            textBaseline: TextBaseline.alphabetic,[m[41m[m
[32m+[m[32m            children: [[m[41m[m
[32m+[m[32m              Text([m[41m[m
[32m+[m[32m                '${time.hour.toString().padLeft(2, '0')}:${time.minute.toString().padLeft(2, '0')}',[m[41m[m
[32m+[m[32m                style: theme.textTheme.displayLarge?.copyWith([m[41m[m
[32m+[m[32m                  fontFamily: 'monospace',[m[41m[m
[32m+[m[32m                  fontWeight: FontWeight.bold,[m[41m[m
[32m+[m[32m                  color: theme.primaryColor,[m[41m[m
[32m+[m[32m                ),[m[41m[m
[32m+[m[32m              ),[m[41m[m
[32m+[m[32m              if (widget.showSeconds) ...[[m[41m[m
[32m+[m[32m                Text([m[41m[m
[32m+[m[32m                  ':${time.second.toString().padLeft(2, '0')}',[m[41m[m
[32m+[m[32m                  style: theme.textTheme.headlineMedium?.copyWith([m[41m[m
[32m+[m[32m                    fontFamily: 'monospace',[m[41m[m
[32m+[m[32m                    fontWeight: FontWeight.normal,[m[41m[m
[32m+[m[32m                    color: theme.primaryColor.withOpacity(0.7),[m[41m[m
[32m+[m[32m                  ),[m[41m[m
[32m+[m[32m                ),[m[41m[m
[32m+[m[32m              ],[m[41m[m
[32m+[m[32m            ],[m[41m[m
[32m+[m[32m          ),[m[41m[m
[32m+[m[41m          [m
[32m+[m[32m          const SizedBox(height: 16),[m[41m[m
[32m+[m[41m          [m
[32m+[m[32m          // æ—¥æœŸæ˜¾ç¤º[m[41m[m
[32m+[m[32m          Text([m[41m[m
[32m+[m[32m            widget.worldClock.formattedDate,[m[41m[m
[32m+[m[32m            style: theme.textTheme.titleMedium?.copyWith([m[41m[m
[32m+[m[32m              color: theme.textTheme.titleMedium?.color?.withOpacity(0.8),[m[41m[m
[32m+[m[32m            ),[m[41m[m
[32m+[m[32m          ),[m[41m[m
[32m+[m[32m        ],[m[41m[m
[32m+[m[32m      ),[m[41m[m
[32m+[m[32m    );[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[32m}[m
\ No newline at end of file[m
[1mdiff --git a/lib/plugins/world_clock/world_clock_plugin.dart b/lib/plugins/world_clock/world_clock_plugin.dart[m
[1mnew file mode 100644[m
[1mindex 0000000..79a6e02[m
[1m--- /dev/null[m
[1m+++ b/lib/plugins/world_clock/world_clock_plugin.dart[m
[36m@@ -0,0 +1,577 @@[m
[32m+[m[32mimport 'dart:async';[m[41m[m
[32m+[m[32mimport 'package:flutter/material.dart';[m[41m[m
[32m+[m[32mimport '../../core/interfaces/i_plugin.dart';[m[41m[m
[32m+[m[32mimport '../../core/models/plugin_models.dart';[m[41m[m
[32m+[m[32mimport 'models/world_clock_models.dart';[m[41m[m
[32m+[m[32mimport 'widgets/world_clock_widget.dart';[m[41m[m
[32m+[m[32mimport 'widgets/countdown_timer_widget.dart';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m/// ä¸–ç•Œæ—¶é’Ÿæ’ä»¶ - æ˜¾ç¤ºå¤šä¸ªæ—¶åŒºæ—¶é—´å¹¶æ”¯æŒå€’è®¡æ—¶æé†’[m[41m[m
[32m+[m[32mclass WorldClockPlugin implements IPlugin {[m[41m[m
[32m+[m[32m  late PluginContext _context;[m[41m[m
[32m+[m[41m  [m
[32m+[m[32m  // æ’ä»¶çŠ¶æ€å˜é‡[m[41m[m
[32m+[m[32m  bool _isInitialized = false;[m[41m[m
[32m+[m[32m  List<WorldClockItem> _worldClocks = [];[m[41m[m
[32m+[m[32m  List<CountdownTimer> _countdownTimers = [];[m[41m[m
[32m+[m[32m  Timer? _clockUpdateTimer;[m[41m[m
[32m+[m[32m  Timer? _countdownUpdateTimer;[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get id => 'com.example.worldclock';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get name => 'ä¸–ç•Œæ—¶é’Ÿ';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  String get version => '1.0.0';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  PluginType get type => PluginType.tool;[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  Future<void> initialize(PluginContext context) async {[m[41m[m
[32m+[m[32m    _context = context;[m[41m[m
[32m+[m[41m    [m
[32m+[m[32m    try {[m[41m[m
[32m+[m[32m      // åŠ è½½ä¿å­˜çš„çŠ¶æ€[m[41m[m
[32m+[m[32m      await _loadSavedState();[m[41m[m
[32m+[m[41m      [m
[32m+[m[32m      // å¦‚æžœæ²¡æœ‰ä¿å­˜çš„æ—¶é’Ÿï¼Œæ·»åŠ é»˜è®¤çš„åŒ—äº¬æ—¶é—´[m[41m[m
[32m+[m[32m      if (_worldClocks.isEmpty) {[m[41m[m
[32m+[m[32m        _worldClocks.add(WorldClockItem([m[41m[m
[32m+[m[32m          id: 'beijing',[m[41m[m
[32m+[m[32m          cityName: 'åŒ—äº¬',[m[41m[m
[32m+[m[32m          timeZone: 'Asia/Shanghai',[m[41m[m
[32m+[m[32m          isDefault: true,[m[41m[m
[32m+[m[32m        ));[m[41m[m
[32m+[m[32m      }[m[41m[m
[32m+[m[41m      [m
[32m+[m[32m      // å¯åŠ¨æ—¶é’Ÿæ›´æ–°å®šæ—¶å™¨[m[41m[m
[32m+[m[32m      _startClockTimer();[m[41m[m
[32m+[m[41m      [m
[32m+[m[32m      // å¯åŠ¨å€’è®¡æ—¶æ›´æ–°å®šæ—¶å™¨[m[41m[m
[32m+[m[32m      _startCountdownTimer();[m[41m[m
[32m+[m[41m      [m
[32m+[m[32m      _isInitialized = true;[m[41m[m
[32m+[m[41m      [m
[32m+[m[32m      await _context.platformServices.showNotification('$name æ’ä»¶å·²æˆåŠŸåˆå§‹åŒ–');[m[41m[m
[32m+[m[41m      [m
[32m+[m[32m    } catch (e) {[m[41m[m
[32m+[m[32m      await _context.platformServices.showNotification('$name æ’ä»¶åˆå§‹åŒ–å¤±è´¥: $e');[m[41m[m
[32m+[m[32m      rethrow;[m[41m[m
[32m+[m[32m    }[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  Future<void> dispose() async {[m[41m[m
[32m+[m[32m    try {[m[41m[m
[32m+[m[32m      // ä¿å­˜å½“å‰çŠ¶æ€[m[41m[m
[32m+[m[32m      await _saveCurrentState();[m[41m[m
[32m+[m[41m      [m
[32m+[m[32m      // åœæ­¢å®šæ—¶å™¨[m[41m[m
[32m+[m[32m      _clockUpdateTimer?.cancel();[m[41m[m
[32m+[m[32m      _countdownUpdateTimer?.cancel();[m[41m[m
[32m+[m[41m      [m
[32m+[m[32m      _isInitialized = false;[m[41m[m
[32m+[m[41m      [m
[32m+[m[32m    } catch (e) {[m[41m[m
[32m+[m[32m      print('World Clock plugin disposal error: $e');[m[41m[m
[32m+[m[32m    }[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m  [m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  Widget buildUI(BuildContext context) {[m[41m[m
[32m+[m[32m    if (!_isInitialized) {[m[41m[m
[32m+[m[32m      return const Scaffold([m[41m[m
[32m+[m[32m        body: Center([m[41m[m
[32m+[m[32m          child: CircularProgressIndicator(),[m[41m[m
[32m+[m[32m        ),[m[41m[m
[32m+[m[32m      );[m[41m[m
[32m+[m[32m    }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m    return Scaffold([m[41m[m
[32m+[m[32m      appBar: AppBar([m[41m[m
[32m+[m[32m        title: Text(name),[m[41m[m
[32m+[m[32m        backgroundColor: Theme.of(context).primaryColor,[m[41m[m
[32m+[m[32m        actions: [[m[41m[m
[32m+[m[32m          IconButton([m[41m[m
[32m+[m[32m            icon: const Icon(Icons.add_alarm),[m[41m[m
[32m+[m[32m            onPressed: () => _showAddCountdownDialog(context),[m[41m[m
[32m+[m[32m            tooltip: 'æ·»åŠ å€’è®¡æ—¶',[m[41m[m
[32m+[m[32m          ),[m[41m[m
[32m+[m[32m          IconButton([m[41m[m
[32m+[m[32m            icon: const Icon(Icons.add),[m[41m[m
[32m+[m[32m            onPressed: () => _showAddClockDialog(context),[m[41m[m
[32m+[m[32m            tooltip: 'æ·»åŠ æ—¶é’Ÿ',[m[41m[m
[32m+[m[32m          ),[m[41m[m
[32m+[m[32m          IconButton([m[41m[m
[32m+[m[32m            icon: const Icon(Icons.settings),[m[41m[m
[32m+[m[32m            onPressed: () => _showSettings(context),[m[41m[m
[32m+[m[32m            tooltip: 'è®¾ç½®',[m[41m[m
[32m+[m[32m          ),[m[41m[m
[32m+[m[32m        ],[m[41m[m
[32m+[m[32m      ),[m[41m[m
[32m+[m[32m      body: SingleChildScrollView([m[41m[m
[32m+[m[32m        padding: const EdgeInsets.all(16.0),[m[41m[m
[32m+[m[32m        child: Column([m[41m[m
[32m+[m[32m          crossAxisAlignment: CrossAxisAlignment.stretch,[m[41m[m
[32m+[m[32m          children: [[m[41m[m
[32m+[m[32m            // ä¸–ç•Œæ—¶é’ŸåŒºåŸŸ[m[41m[m
[32m+[m[32m            Card([m[41m[m
[32m+[m[32m              child: Padding([m[41m[m
[32m+[m[32m                padding: const EdgeInsets.all(16.0),[m[41m[m
[32m+[m[32m                child: Column([m[41m[m
[32m+[m[32m                  crossAxisAlignment: CrossAxisAlignment.start,[m[41m[m
[32m+[m[32m                  children: [[m[41m[m
[32m+[m[32m                    Text([m[41m[m
[32m+[m[32m                      'ä¸–ç•Œæ—¶é’Ÿ',[m[41m[m
[32m+[m[32m                      style: Theme.of(context).textTheme.headlineSmall,[m[41m[m
[32m+[m[32m                    ),[m[41m[m
[32m+[m[32m                    const SizedBox(height: 16),[m[41m[m
[32m+[m[32m                    if (_worldClocks.isEmpty)[m[41m[m
[32m+[m[32m                      const Center([m[41m[m
[32m+[m[32m                        child: Text('æš‚æ— æ—¶é’Ÿï¼Œç‚¹å‡»å³ä¸Šè§’æ·»åŠ '),[m[41m[m
[32m+[m[32m                      )[m[41m[m
[32m+[m[32m                    else[m[41m[m
[32m+[m[32m                      ...(_worldClocks.map((clock) => WorldClockWidget([m[41m[m
[32m+[m[32m                        worldClock: clock,[m[41m[m
[32m+[m[32m                        onDelete: clock.isDefault ? null : () => _removeClock(clock.id),[m[41m[m
[32m+[m[32m                      ))),[m[41m[m
[32m+[m[32m                  ],[m[41m[m
[32m+[m[32m                ),[m[41m[m
[32m+[m[32m              ),[m[41m[m
[32m+[m[32m            ),[m[41m[m
[32m+[m[41m            [m
[32m+[m[32m            const SizedBox(height: 16),[m[41m[m
[32m+[m[41m            [m
[32m+[m[32m            // å€’è®¡æ—¶åŒºåŸŸ[m[41m[m
[32m+[m[32m            Card([m[41m[m
[32m+[m[32m              child: Padding([m[41m[m
[32m+[m[32m                padding: const EdgeInsets.all(16.0),[m[41m[m
[32m+[m[32m                child: Column([m[41m[m
[32m+[m[32m                  crossAxisAlignment: CrossAxisAlignment.start,[m[41m[m
[32m+[m[32m                  children: [[m[41m[m
[32m+[m[32m                    Text([m[41m[m
[32m+[m[32m                      'å€’è®¡æ—¶æé†’',[m[41m[m
[32m+[m[32m                      style: Theme.of(context).textTheme.headlineSmall,[m[41m[m
[32m+[m[32m                    ),[m[41m[m
[32m+[m[32m                    const SizedBox(height: 16),[m[41m[m
[32m+[m[32m                    if (_countdownTimers.isEmpty)[m[41m[m
[32m+[m[32m                      const Center([m[41m[m
[32m+[m[32m                        child: Text('æš‚æ— å€’è®¡æ—¶ï¼Œç‚¹å‡»å³ä¸Šè§’æ·»åŠ '),[m[41m[m
[32m+[m[32m                      )[m[41m[m
[32m+[m[32m                    else[m[41m[m
[32m+[m[32m                      ...(_countdownTimers.map((timer) => CountdownTimerWidget([m[41m[m
[32m+[m[32m                        countdownTimer: timer,[m[41m[m
[32m+[m[32m                        onDelete: () => _removeCountdownTimer(timer.id),[m[41m[m
[32m+[m[32m                        onComplete: () => _onCountdownComplete(timer),[m[41m[m
[32m+[m[32m                      ))),[m[41m[m
[32m+[m[32m                  ],[m[41m[m
[32m+[m[32m                ),[m[41m[m
[32m+[m[32m              ),[m[41m[m
[32m+[m[32m            ),[m[41m[m
[32m+[m[32m          ],[m[41m[m
[32m+[m[32m        ),[m[41m[m
[32m+[m[32m      ),[m[41m[m
[32m+[m[32m    );[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m  [m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  Future<void> onStateChanged(PluginState state) async {[m[41m[m
[32m+[m[32m    switch (state) {[m[41m[m
[32m+[m[32m      case PluginState.active:[m[41m[m
[32m+[m[32m        _startClockTimer();[m[41m[m
[32m+[m[32m        _startCountdownTimer();[m[41m[m
[32m+[m[32m        break;[m[41m[m
[32m+[m[32m      case PluginState.paused:[m[41m[m
[32m+[m[32m        await _saveCurrentState();[m[41m[m
[32m+[m[32m        break;[m[41m[m
[32m+[m[32m      case PluginState.inactive:[m[41m[m
[32m+[m[32m        _clockUpdateTimer?.cancel();[m[41m[m
[32m+[m[32m        _countdownUpdateTimer?.cancel();[m[41m[m
[32m+[m[32m        await _saveCurrentState();[m[41m[m
[32m+[m[32m        break;[m[41m[m
[32m+[m[32m      case PluginState.error:[m[41m[m
[32m+[m[32m        _clockUpdateTimer?.cancel();[m[41m[m
[32m+[m[32m        _countdownUpdateTimer?.cancel();[m[41m[m
[32m+[m[32m        break;[m[41m[m
[32m+[m[32m      case PluginState.loading:[m[41m[m
[32m+[m[32m        break;[m[41m[m
[32m+[m[32m    }[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  Future<Map<String, dynamic>> getState() async {[m[41m[m
[32m+[m[32m    return {[m[41m[m
[32m+[m[32m      'isInitialized': _isInitialized,[m[41m[m
[32m+[m[32m      'worldClocks': _worldClocks.map((clock) => clock.toJson()).toList(),[m[41m[m
[32m+[m[32m      'countdownTimers': _countdownTimers.map((timer) => timer.toJson()).toList(),[m[41m[m
[32m+[m[32m      'lastUpdate': DateTime.now().toIso8601String(),[m[41m[m
[32m+[m[32m      'version': version,[m[41m[m
[32m+[m[32m    };[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  // ç§æœ‰æ–¹æ³•å®žçŽ°[m[41m[m
[32m+[m[32m  Future<void> _loadSavedState() async {[m[41m[m
[32m+[m[32m    try {[m[41m[m
[32m+[m[32m      final clocksData = await _context.dataStorage.retrieve<List<dynamic>>('worldClocks');[m[41m[m
[32m+[m[32m      if (clocksData != null) {[m[41m[m
[32m+[m[32m        _worldClocks = clocksData[m[41m[m
[32m+[m[32m            .map((data) => WorldClockItem.fromJson(data as Map<String, dynamic>))[m[41m[m
[32m+[m[32m            .toList();[m[41m[m
[32m+[m[32m      }[m[41m[m
[32m+[m[41m      [m
[32m+[m[32m      final timersData = await _context.dataStorage.retrieve<List<dynamic>>('countdownTimers');[m[41m[m
[32m+[m[32m      if (timersData != null) {[m[41m[m
[32m+[m[32m        _countdownTimers = timersData[m[41m[m
[32m+[m[32m            .map((data) => CountdownTimer.fromJson(data as Map<String, dynamic>))[m[41m[m
[32m+[m[32m            .toList();[m[41m[m
[32m+[m[32m      }[m[41m[m
[32m+[m[32m    } catch (e) {[m[41m[m
[32m+[m[32m      print('Failed to load saved state: $e');[m[41m[m
[32m+[m[32m    }[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  Future<void> _saveCurrentState() async {[m[41m[m
[32m+[m[32m    try {[m[41m[m
[32m+[m[32m      await _context.dataStorage.store([m[41m[m
[32m+[m[32m        'worldClocks',[m[41m[m
[32m+[m[32m        _worldClocks.map((clock) => clock.toJson()).toList(),[m[41m[m
[32m+[m[32m      );[m[41m[m
[32m+[m[32m      await _context.dataStorage.store([m[41m[m
[32m+[m[32m        'countdownTimers',[m[41m[m
[32m+[m[32m        _countdownTimers.map((timer) => timer.toJson()).toList(),[m[41m[m
[32m+[m[32m      );[m[41m[m
[32m+[m[32m    } catch (e) {[m[41m[m
[32m+[m[32m      print('Failed to save state: $e');[m[41m[m
[32m+[m[32m    }[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  void _startClockTimer() {[m[41m[m
[32m+[m[32m    _clockUpdateTimer?.cancel();[m[41m[m
[32m+[m[32m    _clockUpdateTimer = Timer.periodic(const Duration(seconds: 1), (timer) {[m[41m[m
[32m+[m[32m      // è§¦å‘UIæ›´æ–° - åœ¨å®žé™…åº”ç”¨ä¸­å¯èƒ½éœ€è¦ä½¿ç”¨çŠ¶æ€ç®¡ç†[m[41m[m
[32m+[m[32m    });[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  void _startCountdownTimer() {[m[41m[m
[32m+[m[32m    _countdownUpdateTimer?.cancel();[m[41m[m
[32m+[m[32m    _countdownUpdateTimer = Timer.periodic(const Duration(seconds: 1), (timer) {[m[41m[m
[32m+[m[32m      _updateCountdownTimers();[m[41m[m
[32m+[m[32m    });[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  void _updateCountdownTimers() {[m[41m[m
[32m+[m[32m    final now = DateTime.now();[m[41m[m
[32m+[m[32m    final completedTimers = <CountdownTimer>[];[m[41m[m
[32m+[m[41m    [m
[32m+[m[32m    for (final timer in _countdownTimers) {[m[41m[m
[32m+[m[32m      if (timer.endTime.isBefore(now) && !timer.isCompleted) {[m[41m[m
[32m+[m[32m        timer.isCompleted = true;[m[41m[m
[32m+[m[32m        completedTimers.add(timer);[m[41m[m
[32m+[m[32m      }[m[41m[m
[32m+[m[32m    }[m[41m[m
[32m+[m[41m    [m
[32m+[m[32m    // å¤„ç†å®Œæˆçš„å€’è®¡æ—¶[m[41m[m
[32m+[m[32m    for (final timer in completedTimers) {[m[41m[m
[32m+[m[32m      _onCountdownComplete(timer);[m[41m[m
[32m+[m[32m    }[m[41m[m
[32m+[m[41m    [m
[32m+[m[32m    if (completedTimers.isNotEmpty) {[m[41m[m
[32m+[m[32m      _saveCurrentState();[m[41m[m
[32m+[m[32m    }[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  void _onCountdownComplete(CountdownTimer timer) async {[m[41m[m
[32m+[m[32m    await _context.platformServices.showNotification([m[41m[m
[32m+[m[32m      'å€’è®¡æ—¶æé†’: ${timer.title} æ—¶é—´åˆ°äº†ï¼'[m[41m[m
[32m+[m[32m    );[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  void _showAddClockDialog(BuildContext context) {[m[41m[m
[32m+[m[32m    showDialog([m[41m[m
[32m+[m[32m      context: context,[m[41m[m
[32m+[m[32m      builder: (context) => AddClockDialog([m[41m[m
[32m+[m[32m        onAdd: (cityName, timeZone) {[m[41m[m
[32m+[m[32m          _addClock(cityName, timeZone);[m[41m[m
[32m+[m[32m        },[m[41m[m
[32m+[m[32m      ),[m[41m[m
[32m+[m[32m    );[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  void _showAddCountdownDialog(BuildContext context) {[m[41m[m
[32m+[m[32m    showDialog([m[41m[m
[32m+[m[32m      context: context,[m[41m[m
[32m+[m[32m      builder: (context) => AddCountdownDialog([m[41m[m
[32m+[m[32m        onAdd: (title, duration) {[m[41m[m
[32m+[m[32m          _addCountdownTimer(title, duration);[m[41m[m
[32m+[m[32m        },[m[41m[m
[32m+[m[32m      ),[m[41m[m
[32m+[m[32m    );[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  void _addClock(String cityName, String timeZone) {[m[41m[m
[32m+[m[32m    final newClock = WorldClockItem([m[41m[m
[32m+[m[32m      id: DateTime.now().millisecondsSinceEpoch.toString(),[m[41m[m
[32m+[m[32m      cityName: cityName,[m[41m[m
[32m+[m[32m      timeZone: timeZone,[m[41m[m
[32m+[m[32m      isDefault: false,[m[41m[m
[32m+[m[32m    );[m[41m[m
[32m+[m[41m    [m
[32m+[m[32m    _worldClocks.add(newClock);[m[41m[m
[32m+[m[32m    _saveCurrentState();[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  void _removeClock(String clockId) {[m[41m[m
[32m+[m[32m    _worldClocks.removeWhere((clock) => clock.id == clockId);[m[41m[m
[32m+[m[32m    _saveCurrentState();[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  void _addCountdownTimer(String title, Duration duration) {[m[41m[m
[32m+[m[32m    final newTimer = CountdownTimer([m[41m[m
[32m+[m[32m      id: DateTime.now().millisecondsSinceEpoch.toString(),[m[41m[m
[32m+[m[32m      title: title,[m[41m[m
[32m+[m[32m      endTime: DateTime.now().add(duration),[m[41m[m
[32m+[m[32m      isCompleted: false,[m[41m[m
[32m+[m[32m    );[m[41m[m
[32m+[m[41m    [m
[32m+[m[32m    _countdownTimers.add(newTimer);[m[41m[m
[32m+[m[32m    _saveCurrentState();[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  void _removeCountdownTimer(String timerId) {[m[41m[m
[32m+[m[32m    _countdownTimers.removeWhere((timer) => timer.id == timerId);[m[41m[m
[32m+[m[32m    _saveCurrentState();[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  void _showSettings(BuildContext context) {[m[41m[m
[32m+[m[32m    showDialog([m[41m[m
[32m+[m[32m      context: context,[m[41m[m
[32m+[m[32m      builder: (context) => AlertDialog([m[41m[m
[32m+[m[32m        title: const Text('ä¸–ç•Œæ—¶é’Ÿè®¾ç½®'),[m[41m[m
[32m+[m[32m        content: const Column([m[41m[m
[32m+[m[32m          mainAxisSize: MainAxisSize.min,[m[41m[m
[32m+[m[32m          children: [[m[41m[m
[32m+[m[32m            Text('è®¾ç½®é€‰é¡¹å°†åœ¨åŽç»­ç‰ˆæœ¬ä¸­æ·»åŠ '),[m[41m[m
[32m+[m[32m            SizedBox(height: 16),[m[41m[m
[32m+[m[32m            Text('å½“å‰åŠŸèƒ½ï¼š'),[m[41m[m
[32m+[m[32m            Text('â€¢ æ˜¾ç¤ºå¤šä¸ªæ—¶åŒºæ—¶é—´'),[m[41m[m
[32m+[m[32m            Text('â€¢ å€’è®¡æ—¶æé†’'),[m[41m[m
[32m+[m[32m            Text('â€¢ é»˜è®¤åŒ—äº¬æ—¶é—´'),[m[41m[m
[32m+[m[32m          ],[m[41m[m
[32m+[m[32m        ),[m[41m[m
[32m+[m[32m        actions: [[m[41m[m
[32m+[m[32m          TextButton([m[41m[m
[32m+[m[32m            onPressed: () => Navigator.of(context).pop(),[m[41m[m
[32m+[m[32m            child: const Text('å…³é—­'),[m[41m[m
[32m+[m[32m          ),[m[41m[m
[32m+[m[32m        ],[m[41m[m
[32m+[m[32m      ),[m[41m[m
[32m+[m[32m    );[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[32m}[m[41m[m
[32m+[m[41m[m
[32m+[m[32m// æ·»åŠ æ—¶é’Ÿå¯¹è¯æ¡†[m[41m[m
[32m+[m[32mclass AddClockDialog extends StatefulWidget {[m[41m[m
[32m+[m[32m  final Function(String cityName, String timeZone) onAdd;[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  const AddClockDialog({Key? key, required this.onAdd}) : super(key: key);[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  State<AddClockDialog> createState() => _AddClockDialogState();[m[41m[m
[32m+[m[32m}[m[41m[m
[32m+[m[41m[m
[32m+[m[32mclass _AddClockDialogState extends State<AddClockDialog> {[m[41m[m
[32m+[m[32m  final _cityController = TextEditingController();[m[41m[m
[32m+[m[32m  String _selectedTimeZone = 'Asia/Shanghai';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  final List<Map<String, String>> _timeZones = [[m[41m[m
[32m+[m[32m    {'name': 'åŒ—äº¬', 'zone': 'Asia/Shanghai'},[m[41m[m
[32m+[m[32m    {'name': 'ä¸œäº¬', 'zone': 'Asia/Tokyo'},[m[41m[m
[32m+[m[32m    {'name': 'é¦–å°”', 'zone': 'Asia/Seoul'},[m[41m[m
[32m+[m[32m    {'name': 'æ–°åŠ å¡', 'zone': 'Asia/Singapore'},[m[41m[m
[32m+[m[32m    {'name': 'æ‚‰å°¼', 'zone': 'Australia/Sydney'},[m[41m[m
[32m+[m[32m    {'name': 'ä¼¦æ•¦', 'zone': 'Europe/London'},[m[41m[m
[32m+[m[32m    {'name': 'å·´é»Ž', 'zone': 'Europe/Paris'},[m[41m[m
[32m+[m[32m    {'name': 'çº½çº¦', 'zone': 'America/New_York'},[m[41m[m
[32m+[m[32m    {'name': 'æ´›æ‰çŸ¶', 'zone': 'America/Los_Angeles'},[m[41m[m
[32m+[m[32m    {'name': 'èŠåŠ å“¥', 'zone': 'America/Chicago'},[m[41m[m
[32m+[m[32m  ];[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  Widget build(BuildContext context) {[m[41m[m
[32m+[m[32m    return AlertDialog([m[41m[m
[32m+[m[32m      title: const Text('æ·»åŠ æ—¶é’Ÿ'),[m[41m[m
[32m+[m[32m      content: Column([m[41m[m
[32m+[m[32m        mainAxisSize: MainAxisSize.min,[m[41m[m
[32m+[m[32m        children: [[m[41m[m
[32m+[m[32m          TextField([m[41m[m
[32m+[m[32m            controller: _cityController,[m[41m[m
[32m+[m[32m            decoration: const InputDecoration([m[41m[m
[32m+[m[32m              labelText: 'åŸŽå¸‚åç§°',[m[41m[m
[32m+[m[32m              hintText: 'è¾“å…¥åŸŽå¸‚åç§°',[m[41m[m
[32m+[m[32m            ),[m[41m[m
[32m+[m[32m          ),[m[41m[m
[32m+[m[32m          const SizedBox(height: 16),[m[41m[m
[32m+[m[32m          DropdownButtonFormField<String>([m[41m[m
[32m+[m[32m            value: _selectedTimeZone,[m[41m[m
[32m+[m[32m            decoration: const InputDecoration([m[41m[m
[32m+[m[32m              labelText: 'æ—¶åŒº',[m[41m[m
[32m+[m[32m            ),[m[41m[m
[32m+[m[32m            items: _timeZones.map((tz) {[m[41m[m
[32m+[m[32m              return DropdownMenuItem<String>([m[41m[m
[32m+[m[32m                value: tz['zone'],[m[41m[m
[32m+[m[32m                child: Text(tz['name']!),[m[41m[m
[32m+[m[32m              );[m[41m[m
[32m+[m[32m            }).toList(),[m[41m[m
[32m+[m[32m            onChanged: (value) {[m[41m[m
[32m+[m[32m              setState(() {[m[41m[m
[32m+[m[32m                _selectedTimeZone = value!;[m[41m[m
[32m+[m[32m                // è‡ªåŠ¨å¡«å……åŸŽå¸‚åç§°[m[41m[m
[32m+[m[32m                final timeZone = _timeZones.firstWhere((tz) => tz['zone'] == value);[m[41m[m
[32m+[m[32m                if (_cityController.text.isEmpty) {[m[41m[m
[32m+[m[32m                  _cityController.text = timeZone['name']!;[m[41m[m
[32m+[m[32m                }[m[41m[m
[32m+[m[32m              });[m[41m[m
[32m+[m[32m            },[m[41m[m
[32m+[m[32m          ),[m[41m[m
[32m+[m[32m        ],[m[41m[m
[32m+[m[32m      ),[m[41m[m
[32m+[m[32m      actions: [[m[41m[m
[32m+[m[32m        TextButton([m[41m[m
[32m+[m[32m          onPressed: () => Navigator.of(context).pop(),[m[41m[m
[32m+[m[32m          child: const Text('å–æ¶ˆ'),[m[41m[m
[32m+[m[32m        ),[m[41m[m
[32m+[m[32m        ElevatedButton([m[41m[m
[32m+[m[32m          onPressed: () {[m[41m[m
[32m+[m[32m            if (_cityController.text.isNotEmpty) {[m[41m[m
[32m+[m[32m              widget.onAdd(_cityController.text, _selectedTimeZone);[m[41m[m
[32m+[m[32m              Navigator.of(context).pop();[m[41m[m
[32m+[m[32m            }[m[41m[m
[32m+[m[32m          },[m[41m[m
[32m+[m[32m          child: const Text('æ·»åŠ '),[m[41m[m
[32m+[m[32m        ),[m[41m[m
[32m+[m[32m      ],[m[41m[m
[32m+[m[32m    );[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  void dispose() {[m[41m[m
[32m+[m[32m    _cityController.dispose();[m[41m[m
[32m+[m[32m    super.dispose();[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[32m}[m[41m[m
[32m+[m[41m[m
[32m+[m[32m// æ·»åŠ å€’è®¡æ—¶å¯¹è¯æ¡†[m[41m[m
[32m+[m[32mclass AddCountdownDialog extends StatefulWidget {[m[41m[m
[32m+[m[32m  final Function(String title, Duration duration) onAdd;[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  const AddCountdownDialog({Key? key, required this.onAdd}) : super(key: key);[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  State<AddCountdownDialog> createState() => _AddCountdownDialogState();[m[41m[m
[32m+[m[32m}[m[41m[m
[32m+[m[41m[m
[32m+[m[32mclass _AddCountdownDialogState extends State<AddCountdownDialog> {[m[41m[m
[32m+[m[32m  final _titleController = TextEditingController();[m[41m[m
[32m+[m[32m  int _hours = 0;[m[41m[m
[32m+[m[32m  int _minutes = 5;[m[41m[m
[32m+[m[32m  int _seconds = 0;[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  Widget build(BuildContext context) {[m[41m[m
[32m+[m[32m    return AlertDialog([m[41m[m
[32m+[m[32m      title: const Text('æ·»åŠ å€’è®¡æ—¶'),[m[41m[m
[32m+[m[32m      content: Column([m[41m[m
[32m+[m[32m        mainAxisSize: MainAxisSize.min,[m[41m[m
[32m+[m[32m        children: [[m[41m[m
[32m+[m[32m          TextField([m[41m[m
[32m+[m[32m            controller: _titleController,[m[41m[m
[32m+[m[32m            decoration: const InputDecoration([m[41m[m
[32m+[m[32m              labelText: 'å€’è®¡æ—¶æ ‡é¢˜',[m[41m[m
[32m+[m[32m              hintText: 'è¾“å…¥æé†’å†…å®¹',[m[41m[m
[32m+[m[32m            ),[m[41m[m
[32m+[m[32m          ),[m[41m[m
[32m+[m[32m          const SizedBox(height: 16),[m[41m[m
[32m+[m[32m          Row([m[41m[m
[32m+[m[32m            children: [[m[41m[m
[32m+[m[32m              Expanded([m[41m[m
[32m+[m[32m                child: Column([m[41m[m
[32m+[m[32m                  children: [[m[41m[m
[32m+[m[32m                    const Text('å°æ—¶'),[m[41m[m
[32m+[m[32m                    DropdownButton<int>([m[41m[m
[32m+[m[32m                      value: _hours,[m[41m[m
[32m+[m[32m                      items: List.generate(24, (i) => DropdownMenuItem([m[41m[m
[32m+[m[32m                        value: i,[m[41m[m
[32m+[m[32m                        child: Text(i.toString()),[m[41m[m
[32m+[m[32m                      )),[m[41m[m
[32m+[m[32m                      onChanged: (value) => setState(() => _hours = value!),[m[41m[m
[32m+[m[32m                    ),[m[41m[m
[32m+[m[32m                  ],[m[41m[m
[32m+[m[32m                ),[m[41m[m
[32m+[m[32m              ),[m[41m[m
[32m+[m[32m              Expanded([m[41m[m
[32m+[m[32m                child: Column([m[41m[m
[32m+[m[32m                  children: [[m[41m[m
[32m+[m[32m                    const Text('åˆ†é’Ÿ'),[m[41m[m
[32m+[m[32m                    DropdownButton<int>([m[41m[m
[32m+[m[32m                      value: _minutes,[m[41m[m
[32m+[m[32m                      items: List.generate(60, (i) => DropdownMenuItem([m[41m[m
[32m+[m[32m                        value: i,[m[41m[m
[32m+[m[32m                        child: Text(i.toString()),[m[41m[m
[32m+[m[32m                      )),[m[41m[m
[32m+[m[32m                      onChanged: (value) => setState(() => _minutes = value!),[m[41m[m
[32m+[m[32m                    ),[m[41m[m
[32m+[m[32m                  ],[m[41m[m
[32m+[m[32m                ),[m[41m[m
[32m+[m[32m              ),[m[41m[m
[32m+[m[32m              Expanded([m[41m[m
[32m+[m[32m                child: Column([m[41m[m
[32m+[m[32m                  children: [[m[41m[m
[32m+[m[32m                    const Text('ç§’'),[m[41m[m
[32m+[m[32m                    DropdownButton<int>([m[41m[m
[32m+[m[32m                      value: _seconds,[m[41m[m
[32m+[m[32m                      items: List.generate(60, (i) => DropdownMenuItem([m[41m[m
[32m+[m[32m                        value: i,[m[41m[m
[32m+[m[32m                        child: Text(i.toString()),[m[41m[m
[32m+[m[32m                      )),[m[41m[m
[32m+[m[32m                      onChanged: (value) => setState(() => _seconds = value!),[m[41m[m
[32m+[m[32m                    ),[m[41m[m
[32m+[m[32m                  ],[m[41m[m
[32m+[m[32m                ),[m[41m[m
[32m+[m[32m              ),[m[41m[m
[32m+[m[32m            ],[m[41m[m
[32m+[m[32m          ),[m[41m[m
[32m+[m[32m        ],[m[41m[m
[32m+[m[32m      ),[m[41m[m
[32m+[m[32m      actions: [[m[41m[m
[32m+[m[32m        TextButton([m[41m[m
[32m+[m[32m          onPressed: () => Navigator.of(context).pop(),[m[41m[m
[32m+[m[32m          child: const Text('å–æ¶ˆ'),[m[41m[m
[32m+[m[32m        ),[m[41m[m
[32m+[m[32m        ElevatedButton([m[41m[m
[32m+[m[32m          onPressed: () {[m[41m[m
[32m+[m[32m            if (_titleController.text.isNotEmpty &&[m[41m [m
[32m+[m[32m                (_hours > 0 || _minutes > 0 || _seconds > 0)) {[m[41m[m
[32m+[m[32m              final duration = Duration([m[41m[m
[32m+[m[32m                hours: _hours,[m[41m[m
[32m+[m[32m                minutes: _minutes,[m[41m[m
[32m+[m[32m                seconds: _seconds,[m[41m[m
[32m+[m[32m              );[m[41m[m
[32m+[m[32m              widget.onAdd(_titleController.text, duration);[m[41m[m
[32m+[m[32m              Navigator.of(context).pop();[m[41m[m
[32m+[m[32m            }[m[41m[m
[32m+[m[32m          },[m[41m[m
[32m+[m[32m          child: const Text('æ·»åŠ '),[m[41m[m
[32m+[m[32m        ),[m[41m[m
[32m+[m[32m      ],[m[41m[m
[32m+[m[32m    );[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  void dispose() {[m[41m[m
[32m+[m[32m    _titleController.dispose();[m[41m[m
[32m+[m[32m    super.dispose();[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[32m}[m
\ No newline at end of file[m
[1mdiff --git a/lib/plugins/world_clock/world_clock_plugin_factory.dart b/lib/plugins/world_clock/world_clock_plugin_factory.dart[m
[1mnew file mode 100644[m
[1mindex 0000000..1915dee[m
[1m--- /dev/null[m
[1m+++ b/lib/plugins/world_clock/world_clock_plugin_factory.dart[m
[36m@@ -0,0 +1,92 @@[m
[32m+[m[32mimport '../../core/interfaces/i_plugin.dart';[m[41m[m
[32m+[m[32mimport '../../core/models/plugin_models.dart';[m[41m[m
[32m+[m[32mimport 'world_clock_plugin.dart';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m/// ä¸–ç•Œæ—¶é’Ÿæ’ä»¶å·¥åŽ‚ç±»ï¼Œè´Ÿè´£åˆ›å»ºæ’ä»¶å®žä¾‹å’Œæä¾›æ’ä»¶æè¿°ç¬¦[m[41m[m
[32m+[m[32mclass WorldClockPluginFactory {[m[41m[m
[32m+[m[32m  /// åˆ›å»ºæ’ä»¶å®žä¾‹[m[41m[m
[32m+[m[32m  static IPlugin createPlugin() {[m[41m[m
[32m+[m[32m    return WorldClockPlugin();[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  /// èŽ·å–æ’ä»¶æè¿°ç¬¦[m[41m[m
[32m+[m[32m  static PluginDescriptor getDescriptor() {[m[41m[m
[32m+[m[32m    return const PluginDescriptor([m[41m[m
[32m+[m[32m      id: 'com.example.worldclock',[m[41m[m
[32m+[m[32m      name: 'ä¸–ç•Œæ—¶é’Ÿ',[m[41m[m
[32m+[m[32m      version: '1.0.0',[m[41m[m
[32m+[m[32m      type: PluginType.tool,[m[41m[m
[32m+[m[32m      requiredPermissions: [[m[41m[m
[32m+[m[32m        Permission.platformStorage,[m[41m[m
[32m+[m[32m        Permission.systemNotifications,[m[41m[m
[32m+[m[32m        Permission.platformServices,[m[41m[m
[32m+[m[32m      ],[m[41m[m
[32m+[m[32m      metadata: {[m[41m[m
[32m+[m[32m        'description': 'æ˜¾ç¤ºå¤šä¸ªæ—¶åŒºçš„æ—¶é—´ï¼Œæ”¯æŒå€’è®¡æ—¶æé†’åŠŸèƒ½ï¼Œé»˜è®¤æ˜¾ç¤ºåŒ—äº¬æ—¶é—´',[m[41m[m
[32m+[m[32m        'author': 'Plugin Platform Team',[m[41m[m
[32m+[m[32m        'email': 'support@pluginplatform.com',[m[41m[m
[32m+[m[32m        'website': 'https://pluginplatform.com',[m[41m[m
[32m+[m[32m        'category': 'productivity',[m[41m[m
[32m+[m[32m        'tags': ['clock', 'time', 'timezone', 'countdown', 'timer', 'productivity'],[m[41m[m
[32m+[m[32m        'icon': 'access_time',[m[41m[m
[32m+[m[32m        'minPlatformVersion': '1.0.0',[m[41m[m
[32m+[m[32m        'supportedPlatforms': ['mobile', 'desktop', 'web'],[m[41m[m
[32m+[m[32m        'supportsHotReload': true,[m[41m[m
[32m+[m[32m        'configurable': true,[m[41m[m
[32m+[m[32m        'documentation': 'https://docs.pluginplatform.com/plugins/world-clock',[m[41m[m
[32m+[m[32m        'sourceCode': 'https://github.com/pluginplatform/world-clock-plugin',[m[41m[m
[32m+[m[32m        'license': 'MIT',[m[41m[m
[32m+[m[32m        'changelog': {[m[41m[m
[32m+[m[32m          '1.0.0': 'åˆå§‹ç‰ˆæœ¬å‘å¸ƒ - æ”¯æŒä¸–ç•Œæ—¶é’Ÿæ˜¾ç¤ºå’Œå€’è®¡æ—¶æé†’åŠŸèƒ½',[m[41m[m
[32m+[m[32m        },[m[41m[m
[32m+[m[32m        'features': [[m[41m[m
[32m+[m[32m          'å¤šæ—¶åŒºæ—¶é—´æ˜¾ç¤º',[m[41m[m
[32m+[m[32m          'é»˜è®¤åŒ—äº¬æ—¶é—´',[m[41m[m
[32m+[m[32m          'å€’è®¡æ—¶æé†’åŠŸèƒ½',[m[41m[m
[32m+[m[32m          'è‡ªå®šä¹‰æ—¶é’Ÿæ·»åŠ ',[m[41m[m
[32m+[m[32m          'å®žæ—¶æ—¶é—´æ›´æ–°',[m[41m[m
[32m+[m[32m          'å®Œæˆé€šçŸ¥æé†’',[m[41m[m
[32m+[m[32m          'ç®€æ´ç¾Žè§‚çš„ç•Œé¢',[m[41m[m
[32m+[m[32m          'æ”¯æŒåˆ é™¤éžé»˜è®¤æ—¶é’Ÿ',[m[41m[m
[32m+[m[32m        ],[m[41m[m
[32m+[m[32m        'screenshots': [[m[41m[m
[32m+[m[32m          'assets/screenshots/world_clock_main.png',[m[41m[m
[32m+[m[32m          'assets/screenshots/world_clock_countdown.png',[m[41m[m
[32m+[m[32m          'assets/screenshots/world_clock_add_dialog.png',[m[41m[m
[32m+[m[32m        ],[m[41m[m
[32m+[m[32m        'keywords': [[m[41m[m
[32m+[m[32m          'ä¸–ç•Œæ—¶é’Ÿ',[m[41m[m
[32m+[m[32m          'æ—¶åŒº',[m[41m[m
[32m+[m[32m          'å€’è®¡æ—¶',[m[41m[m
[32m+[m[32m          'æé†’',[m[41m[m
[32m+[m[32m          'åŒ—äº¬æ—¶é—´',[m[41m[m
[32m+[m[32m          'å®šæ—¶å™¨',[m[41m[m
[32m+[m[32m          'æ—¶é—´ç®¡ç†',[m[41m[m
[32m+[m[32m          'ç”Ÿäº§åŠ›å·¥å…·',[m[41m[m
[32m+[m[32m        ],[m[41m[m
[32m+[m[32m        'requirements': {[m[41m[m
[32m+[m[32m          'minFlutterVersion': '3.0.0',[m[41m[m
[32m+[m[32m          'minDartVersion': '2.17.0',[m[41m[m
[32m+[m[32m          'permissions': [[m[41m[m
[32m+[m[32m            'storage - ç”¨äºŽä¿å­˜æ—¶é’Ÿå’Œå€’è®¡æ—¶è®¾ç½®',[m[41m[m
[32m+[m[32m            'notifications - ç”¨äºŽå€’è®¡æ—¶å®Œæˆæé†’',[m[41m[m
[32m+[m[32m            'platformServices - ç”¨äºŽè®¿é—®å¹³å°æœåŠ¡',[m[41m[m
[32m+[m[32m          ],[m[41m[m
[32m+[m[32m        },[m[41m[m
[32m+[m[32m        'configuration': {[m[41m[m
[32m+[m[32m          'defaultTimeZone': 'Asia/Shanghai',[m[41m[m
[32m+[m[32m          'updateInterval': 1000,[m[41m[m
[32m+[m[32m          'maxClocks': 10,[m[41m[m
[32m+[m[32m          'maxCountdowns': 20,[m[41m[m
[32m+[m[32m          'enableNotifications': true,[m[41m[m
[32m+[m[32m          'enableAnimations': true,[m[41m[m
[32m+[m[32m        },[m[41m[m
[32m+[m[32m        'localization': {[m[41m[m
[32m+[m[32m          'supportedLocales': ['zh_CN', 'en_US'],[m[41m[m
[32m+[m[32m          'defaultLocale': 'zh_CN',[m[41m[m
[32m+[m[32m        },[m[41m[m
[32m+[m[32m      },[m[41m[m
[32m+[m[32m      entryPoint: 'lib/plugins/world_clock/world_clock_plugin.dart',[m[41m[m
[32m+[m[32m    );[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[32m}[m
\ No newline at end of file[m
[1mdiff --git a/test/plugins/world_clock_test.dart b/test/plugins/world_clock_test.dart[m
[1mnew file mode 100644[m
[1mindex 0000000..d9dad01[m
[1m--- /dev/null[m
[1m+++ b/test/plugins/world_clock_test.dart[m
[36m@@ -0,0 +1,286 @@[m
[32m+[m[32mimport 'package:flutter_test/flutter_test.dart';[m[41m[m
[32m+[m[32mimport 'package:plugin_platform/plugins/world_clock/world_clock_plugin.dart';[m[41m[m
[32m+[m[32mimport 'package:plugin_platform/plugins/world_clock/models/world_clock_models.dart';[m[41m[m
[32m+[m[32mimport 'package:plugin_platform/core/models/plugin_models.dart';[m[41m[m
[32m+[m[32mimport 'package:plugin_platform/core/models/platform_models.dart';[m[41m[m
[32m+[m[32mimport 'package:plugin_platform/core/interfaces/i_plugin.dart';[m[41m[m
[32m+[m[32mimport 'package:plugin_platform/core/interfaces/i_platform_services.dart';[m[41m[m
[32m+[m[41m[m
[32m+[m[32m// Mock å®žçŽ°[m[41m[m
[32m+[m[32mclass MockPlatformServices implements IPlatformServices {[m[41m[m
[32m+[m[32m  final List<String> notifications = [];[m[41m[m
[32m+[m[41m  [m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  Future<void> initialize() async {}[m[41m[m
[32m+[m[41m  [m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  Future<void> showNotification(String message) async {[m[41m[m
[32m+[m[32m    notifications.add(message);[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m  [m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  Future<void> requestPermission(Permission permission) async {}[m[41m[m
[32m+[m[41m  [m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  Future<bool> hasPermission(Permission permission) async => true;[m[41m[m
[32m+[m[41m  [m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  Future<void> openExternalUrl(String url) async {}[m[41m[m
[32m+[m[41m  [m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  Stream<PlatformEvent> get eventStream => const Stream.empty();[m[41m[m
[32m+[m[41m  [m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  PlatformInfo get platformInfo => const PlatformInfo([m[41m[m
[32m+[m[32m    type: PlatformType.desktop,[m[41m[m
[32m+[m[32m    version: '1.0.0',[m[41m[m
[32m+[m[32m    capabilities: {},[m[41m[m
[32m+[m[32m  );[m[41m[m
[32m+[m[32m}[m[41m[m
[32m+[m[41m[m
[32m+[m[32mclass MockDataStorage implements IDataStorage {[m[41m[m
[32m+[m[32m  final Map<String, dynamic> _storage = {};[m[41m[m
[32m+[m[41m  [m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  Future<void> store(String key, dynamic value) async {[m[41m[m
[32m+[m[32m    _storage[key] = value;[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m  [m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  Future<T?> retrieve<T>(String key) async {[m[41m[m
[32m+[m[32m    return _storage[key] as T?;[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m  [m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  Future<void> remove(String key) async {[m[41m[m
[32m+[m[32m    _storage.remove(key);[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m  [m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  Future<void> clear() async {[m[41m[m
[32m+[m[32m    _storage.clear();[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[32m}[m[41m[m
[32m+[m[41m[m
[32m+[m[32mclass MockNetworkAccess implements INetworkAccess {[m[41m[m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  Future<Map<String, dynamic>> get(String url, {Map<String, String>? headers}) async {[m[41m[m
[32m+[m[32m    return {'status': 'success', 'data': 'mock data'};[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m  [m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  Future<Map<String, dynamic>> post(String url, {Map<String, dynamic>? body, Map<String, String>? headers}) async {[m[41m[m
[32m+[m[32m    return {'status': 'success'};[m[41m[m
[32m+[m[32m  }[m[41m[m
[32m+[m[41m  [m
[32m+[m[32m  @override[m[41m[m
[32m+[m[32m  Future<bool> isConnected() async => true;[m[41m[m
[32m+[m[32m}[m[41m[m
[32m+[m[41m[m
[32m+[m[32mvoid main() {[m[41m[m
[32m+[m[32m  group('WorldClockPlugin Tests', () {[m[41m[m
[32m+[m[32m    late WorldClockPlugin plugin;[m[41m[m
[32m+[m[32m    late MockPlatformServices mockPlatformServices;[m[41m[m
[32m+[m[32m    late MockDataStorage mockDataStorage;[m[41m[m
[32m+[m[32m    late MockNetworkAccess mockNetworkAccess;[m[41m[m
[32m+[m[32m    late PluginContext context;[m[41m[m
[32m+[m[41m[m
[32m+[m[32m    setUp(() {[m[41m[m
[32m+[m[32m      plugin = WorldClockPlugin();[m[41m[m
[32m+[m[32m      mockPlatformServices = MockPlatformServices();[m[41m[m
[32m+[m[32m      mockDataStorage = MockDataStorage();[m[41m[m
[32m+[m[32m      mockNetworkAccess = MockNetworkAccess();[m[41m[m
[32m+[m[41m      [m
[32m+[m[32m      context = PluginContext([m[41m[m
[32m+[m[32m        platformServices: mockPlatformServices,[m[41m[m
[32m+[m[32m        dataStorage: mockDataStorage,[m[41m[m
[32m+[m[32m        networkAccess: mockNetworkAccess,[m[41m[m
[32m+[m[32m        configuration: {},[m[41m[m
[32m+[m[32m      );[m[41m[m
[32m+[m[32m    });[m[41m[m
[32m+[m[41m[m
[32m+[m[32m    test('Plugin properties should be correct', () {[m[41m[m
[32m+[m[32m      expect(plugin.id, 'com.example.worldclock');[m[41m[m
[32m+[m[32m      expect(plugin.name, 'ä¸–ç•Œæ—¶é’Ÿ');[m[41m[m
[32m+[m[32m      expect(plugin.version, '1.0.0');[m[41m[m
[32m+[m[32m      expect(plugin.type, PluginType.tool);[m[41m[m
[32m+[m[32m    });[m[41m[m
[32m+[m[41m[m
[32m+[m[32m    test('Plugin should initialize successfully', () async {[m[41m[m
[32m+[m[32m      await plugin.initialize(context);[m[41m[m
[32m+[m[41m      [m
[32m+[m[32m      // éªŒè¯åˆå§‹åŒ–é€šçŸ¥[m[41m[m
[32m+[m[32m      expect(mockPlatformServices.notifications, contains('ä¸–ç•Œæ—¶é’Ÿ æ’ä»¶å·²æˆåŠŸåˆå§‹åŒ–'));[m[41m[m
[32m+[m[32m    });[m[41m[m
[32m+[m[41m[m
[32m+[m[32m    test('Plugin should handle state changes', () async {[m[41m[m
[32m+[m[32m      await plugin.initialize(context);[m[41m[m
[32m+[m[41m      [m
[32m+[m[32m      // æµ‹è¯•çŠ¶æ€å˜åŒ–[m[41m[m
[32m+[m[32m      await plugin.onStateChanged(PluginState.active);[m[41m[m
[32m+[m[32m      await plugin.onStateChanged(PluginState.paused);[m[41m[m
[32m+[m[32m      await plugin.onStateChanged(PluginState.inactive);[m[41m[m
[32m+[m[32m    });[m[41m[m
[32m+[m[41m[m
[32m+[m[32m    test('Plugin should save and restore state', () async {[m[41m[m
[32m+[m[32m      await plugin.initialize(context);[m[41m[m
[32m+[m[41m      [m
[32m+[m[32m      // èŽ·å–åˆå§‹çŠ¶æ€[m[41m[m
[32m+[m[32m      final initialState = await plugin.getState();[m[41m[m
[32m+[m[32m      expect(initialState, isA<Map<String, dynamic>>());[m[41m[m
[32m+[m[32m      expect(initialState['version'], '1.0.0');[m[41m[m
[32m+[m[32m      expect(initialState['isInitialized'], true);[m[41m[m
[32m+[m[32m    });[m[41m[m
[32m+[m[41m[m
[32m+[m[32m    test('Plugin should dispose cleanly', () async {[m[41m[m
[32m+[m[32m      await plugin.initialize(context);[m[41m[m
[32m+[m[32m      await plugin.dispose();[m[41m[m
[32m+[m[41m      [m
[32m+[m[32m      // éªŒè¯æ²¡æœ‰æŠ›å‡ºå¼‚å¸¸[m[41m[m
[32m+[m[32m    });[m[41m[m
[32m+[m[32m  });[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  group('WorldClockItem Tests', () {[m[41m[m
[32m+[m[32m    test('WorldClockItem should create correctly', () {[m[41m[m
[32m+[m[32m      final clock = WorldClockItem([m[41m[m
[32m+[m[32m        id: 'test',[m[41m[m
[32m+[m[32m        cityName: 'åŒ—äº¬',[m[41m[m
[32m+[m[32m        timeZone: 'Asia/Shanghai',[m[41m[m
[32m+[m[32m        isDefault: true,[m[41m[m
[32m+[m[32m      );[m[41m[m
[32m+[m[41m[m
[32m+[m[32m      expect(clock.id, 'test');[m[41m[m
[32m+[m[32m      expect(clock.cityName, 'åŒ—äº¬');[m[41m[m
[32m+[m[32m      expect(clock.timeZone, 'Asia/Shanghai');[m[41m[m
[32m+[m[32m      expect(clock.isDefault, true);[m[41m[m
[32m+[m[32m    });[m[41m[m
[32m+[m[41m[m
[32m+[m[32m    test('WorldClockItem should format time correctly', () {[m[41m[m
[32m+[m[32m      final clock = WorldClockItem([m[41m[m
[32m+[m[32m        id: 'test',[m[41m[m
[32m+[m[32m        cityName: 'åŒ—äº¬',[m[41m[m
[32m+[m[32m        timeZone: 'Asia/Shanghai',[m[41m[m
[32m+[m[32m        isDefault: true,[m[41m[m
[32m+[m[32m      );[m[41m[m
[32m+[m[41m[m
[32m+[m[32m      // éªŒè¯æ—¶é—´æ ¼å¼[m[41m[m
[32m+[m[32m      expect(clock.formattedTime, matches(r'^\d{2}:\d{2}:\d{2}$'));[m[41m[m
[32m+[m[32m      expect(clock.formattedDate, isNotEmpty);[m[41m[m
[32m+[m[32m    });[m[41m[m
[32m+[m[41m[m
[32m+[m[32m    test('WorldClockItem should serialize/deserialize correctly', () {[m[41m[m
[32m+[m[32m      final original = WorldClockItem([m[41m[m
[32m+[m[32m        id: 'test',[m[41m[m
[32m+[m[32m        cityName: 'åŒ—äº¬',[m[41m[m
[32m+[m[32m        timeZone: 'Asia/Shanghai',[m[41m[m
[32m+[m[32m        isDefault: true,[m[41m[m
[32m+[m[32m      );[m[41m[m
[32m+[m[41m[m
[32m+[m[32m      final json = original.toJson();[m[41m[m
[32m+[m[32m      final restored = WorldClockItem.fromJson(json);[m[41m[m
[32m+[m[41m[m
[32m+[m[32m      expect(restored.id, original.id);[m[41m[m
[32m+[m[32m      expect(restored.cityName, original.cityName);[m[41m[m
[32m+[m[32m      expect(restored.timeZone, original.timeZone);[m[41m[m
[32m+[m[32m      expect(restored.isDefault, original.isDefault);[m[41m[m
[32m+[m[32m    });[m[41m[m
[32m+[m[32m  });[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  group('CountdownTimer Tests', () {[m[41m[m
[32m+[m[32m    test('CountdownTimer should create correctly', () {[m[41m[m
[32m+[m[32m      final endTime = DateTime.now().add(const Duration(minutes: 5));[m[41m[m
[32m+[m[32m      final timer = CountdownTimer([m[41m[m
[32m+[m[32m        id: 'test',[m[41m[m
[32m+[m[32m        title: 'æµ‹è¯•å€’è®¡æ—¶',[m[41m[m
[32m+[m[32m        endTime: endTime,[m[41m[m
[32m+[m[32m        isCompleted: false,[m[41m[m
[32m+[m[32m      );[m[41m[m
[32m+[m[41m[m
[32m+[m[32m      expect(timer.id, 'test');[m[41m[m
[32m+[m[32m      expect(timer.title, 'æµ‹è¯•å€’è®¡æ—¶');[m[41m[m
[32m+[m[32m      expect(timer.endTime, endTime);[m[41m[m
[32m+[m[32m      expect(timer.isCompleted, false);[m[41m[m
[32m+[m[32m    });[m[41m[m
[32m+[m[41m[m
[32m+[m[32m    test('CountdownTimer should calculate remaining time correctly', () {[m[41m[m
[32m+[m[32m      final endTime = DateTime.now().add(const Duration(minutes: 5));[m[41m[m
[32m+[m[32m      final timer = CountdownTimer([m[41m[m
[32m+[m[32m        id: 'test',[m[41m[m
[32m+[m[32m        title: 'æµ‹è¯•å€’è®¡æ—¶',[m[41m[m
[32m+[m[32m        endTime: endTime,[m[41m[m
[32m+[m[32m        isCompleted: false,[m[41m[m
[32m+[m[32m      );[m[41m[m
[32m+[m[41m[m
[32m+[m[32m      final remaining = timer.remainingTime;[m[41m[m
[32m+[m[32m      expect(remaining.inMinutes, greaterThanOrEqualTo(4));[m[41m[m
[32m+[m[32m      expect(remaining.inMinutes, lessThanOrEqualTo(5));[m[41m[m
[32m+[m[32m    });[m[41m[m
[32m+[m[41m[m
[32m+[m[32m    test('CountdownTimer should format remaining time correctly', () {[m[41m[m
[32m+[m[32m      final endTime = DateTime.now().add(const Duration(hours: 1, minutes: 30, seconds: 45));[m[41m[m
[32m+[m[32m      final timer = CountdownTimer([m[41m[m
[32m+[m[32m        id: 'test',[m[41m[m
[32m+[m[32m        title: 'æµ‹è¯•å€’è®¡æ—¶',[m[41m[m
[32m+[m[32m        endTime: endTime,[m[41m[m
[32m+[m[32m        isCompleted: false,[m[41m[m
[32m+[m[32m      );[m[41m[m
[32m+[m[41m[m
[32m+[m[32m      expect(timer.formattedRemainingTime, matches(r'^\d{2}:\d{2}:\d{2}$'));[m[41m[m
[32m+[m[32m    });[m[41m[m
[32m+[m[41m[m
[32m+[m[32m    test('CountdownTimer should handle completed state', () {[m[41m[m
[32m+[m[32m      final endTime = DateTime.now().subtract(const Duration(minutes: 1));[m[41m[m
[32m+[m[32m      final timer = CountdownTimer([m[41m[m
[32m+[m[32m        id: 'test',[m[41m[m
[32m+[m[32m        title: 'æµ‹è¯•å€’è®¡æ—¶',[m[41m[m
[32m+[m[32m        endTime: endTime,[m[41m[m
[32m+[m[32m        isCompleted: true,[m[41m[m
[32m+[m[32m      );[m[41m[m
[32m+[m[41m[m
[32m+[m[32m      expect(timer.remainingTime, Duration.zero);[m[41m[m
[32m+[m[32m      expect(timer.formattedRemainingTime, '00:00:00');[m[41m[m
[32m+[m[32m    });[m[41m[m
[32m+[m[41m[m
[32m+[m[32m    test('CountdownTimer should serialize/deserialize correctly', () {[m[41m[m
[32m+[m[32m      final endTime = DateTime.now().add(const Duration(minutes: 5));[m[41m[m
[32m+[m[32m      final original = CountdownTimer([m[41m[m
[32m+[m[32m        id: 'test',[m[41m[m
[32m+[m[32m        title: 'æµ‹è¯•å€’è®¡æ—¶',[m[41m[m
[32m+[m[32m        endTime: endTime,[m[41m[m
[32m+[m[32m        isCompleted: false,[m[41m[m
[32m+[m[32m      );[m[41m[m
[32m+[m[41m[m
[32m+[m[32m      final json = original.toJson();[m[41m[m
[32m+[m[32m      final restored = CountdownTimer.fromJson(json);[m[41m[m
[32m+[m[41m[m
[32m+[m[32m      expect(restored.id, original.id);[m[41m[m
[32m+[m[32m      expect(restored.title, original.title);[m[41m[m
[32m+[m[32m      expect(restored.endTime, original.endTime);[m[41m[m
[32m+[m[32m      expect(restored.isCompleted, original.isCompleted);[m[41m[m
[32m+[m[32m    });[m[41m[m
[32m+[m[32m  });[m[41m[m
[32m+[m[41m[m
[32m+[m[32m  group('TimeZoneInfo Tests', () {[m[41m[m
[32m+[m[32m    test('TimeZoneInfo should find predefined timezones', () {[m[41m[m
[32m+[m[32m      final beijing = TimeZoneInfo.findByTimeZoneId('Asia/Shanghai');[m[41m[m
[32m+[m[32m      expect(beijing, isNotNull);[m[41m[m
[32m+[m[32m      expect(beijing!.displayName, 'åŒ—äº¬');[m[41m[m
[32m+[m[32m      expect(beijing.offsetHours, 8);[m[41m[m
[32m+[m[41m[m
[32m+[m[32m      final tokyo = TimeZoneInfo.findByTimeZoneId('Asia/Tokyo');[m[41m[m
[32m+[m[32m      expect(tokyo, isNotNull);[m[41m[m
[32m+[m[32m      expect(tokyo!.displayName, 'ä¸œäº¬');[m[41m[m
[32m+[m[32m      expect(tokyo.offsetHours, 9);[m[41m[m
[32m+[m[32m    });[m[41m[m
[32m+[m[41m[m
[32m+[m[32m    test('TimeZoneInfo should return null for unknown timezone', () {[m[41m[m
[32m+[m[32m      final unknown = TimeZoneInfo.findByTimeZoneId('Unknown/Timezone');[m[41m[m
[32m+[m[32m      expect(unknown, isNull);[m[41m[m
[32m+[m[32m    });[m[41m[m
[32m+[m[41m[m
[32m+[m[32m    test('TimeZoneInfo should have predefined timezones', () {[m[41m[m
[32m+[m[32m      expect(TimeZoneInfo.predefinedTimeZones, isNotEmpty);[m[41m[m
[32m+[m[32m      expect(TimeZoneInfo.predefinedTimeZones.length, greaterThanOrEqualTo(10));[m[41m[m
[32m+[m[32m    });[m[41m[m
[32m+[m[32m  });[m[41m[m
[32m+[m[32m}[m
\ No newline at end of file[m
