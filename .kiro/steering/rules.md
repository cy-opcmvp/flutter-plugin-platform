# Kiro ç¼–ç è§„åˆ™

> ğŸ¤– æœ¬é¡¹ç›®éµå¾ªçš„ç¼–ç è§„èŒƒå’Œæ–‡ä»¶ç»„ç»‡è§„åˆ™

## ğŸ“š é¡¹ç›®ç†è§£

**å¼€å§‹ä»»ä½•ä»»åŠ¡å‰ï¼Œè¯·å…ˆé˜…è¯»**:
- [äº§å“æ¦‚è¿°](product.md) - é¡¹ç›®å®šä½å’Œæ ¸å¿ƒç‰¹æ€§
- [é¡¹ç›®ç»“æ„](structure.md) - ä»£ç ç»„ç»‡å’Œç›®å½•ç»“æ„
- [æŠ€æœ¯æ ˆ](tech.md) - æŠ€æœ¯é€‰å‹å’Œå¼€å‘è§„èŒƒ
- [.kiro/specs/](../specs/) - æŠ€æœ¯è§„èŒƒç›®å½•

## ğŸª Kiro Hooksï¼ˆé’©å­ï¼‰

Kiro æ”¯æŒåˆ›å»º Agent Hooksï¼Œå…è®¸åœ¨ç‰¹å®šäº‹ä»¶å‘ç”Ÿæ—¶è‡ªåŠ¨è§¦å‘ AI æ‰§è¡Œã€‚

### é’©å­ç±»å‹

**è§¦å‘äº‹ä»¶**:
- å‘é€æ¶ˆæ¯ç»™ Agent æ—¶
- Agent æ‰§è¡Œå®Œæˆæ—¶
- åˆ›å»ºæ–°ä¼šè¯æ—¶ï¼ˆé¦–æ¬¡å‘é€æ¶ˆæ¯ï¼‰
- ä¿å­˜ä»£ç æ–‡ä»¶æ—¶
- æ›´æ–°ç¿»è¯‘å­—ç¬¦ä¸²æ—¶
- æ‰‹åŠ¨ç‚¹å‡»é’©å­æŒ‰é’®æ—¶

**é’©å­åŠ¨ä½œ**:
- å‘é€æ–°æ¶ˆæ¯ç»™ Agentï¼ˆæé†’æˆ–æŒ‡ä»¤ï¼‰
- æ‰§è¡Œ Shell å‘½ä»¤ï¼ˆå¯é€‰æä¾›æ¶ˆæ¯ä½œä¸ºè¾“å…¥ï¼‰

### ä½¿ç”¨åœºæ™¯ç¤ºä¾‹

```yaml
# ä¿å­˜æ–‡ä»¶æ—¶è‡ªåŠ¨è¿è¡Œæµ‹è¯•
on: file_save
pattern: "**/*.dart"
action: run_command
command: "flutter test"

# æ›´æ–°ç¿»è¯‘æ—¶ç¡®ä¿å…¶ä»–è¯­è¨€åŒæ­¥
on: file_save
pattern: "lib/l10n/*.arb"
action: send_message
message: "è¯·æ£€æŸ¥å¹¶æ›´æ–°æ‰€æœ‰è¯­è¨€çš„ç¿»è¯‘æ–‡ä»¶"

# æ‰‹åŠ¨è§¦å‘æ‹¼å†™æ£€æŸ¥
on: manual
name: "æ‹¼å†™æ£€æŸ¥"
action: send_message
message: "è¯·æ£€æŸ¥ README.md ä¸­çš„è¯­æ³•å’Œæ‹¼å†™é”™è¯¯"
```

### ç®¡ç†é’©å­

**æŸ¥çœ‹å’Œåˆ›å»ºé’©å­**:
1. åœ¨ Explorer è§†å›¾ä¸­æ‰¾åˆ° "Agent Hooks" éƒ¨åˆ†
2. æˆ–ä½¿ç”¨å‘½ä»¤é¢æ¿ï¼š`Open Kiro Hook UI`

**é’©å­é…ç½®ä½ç½®**: `.kiro/hooks/` ç›®å½•

## ğŸ“‹ æ ¸å¿ƒè§„åˆ™

### 1. æ–‡ä»¶ç»„ç»‡è§„èŒƒ

**æ ¸å¿ƒåŸåˆ™**:
- âœ… æ ¹ç›®å½•ä¿æŒç®€æ´ï¼Œåªä¿ç•™æœ€æ ¸å¿ƒçš„æ–‡ä»¶
- âœ… æ‰€æœ‰è„šæœ¬æ”¾å…¥ `scripts/` ç›®å½•
- âœ… æ‰€æœ‰è¯¦ç»†æ–‡æ¡£æ”¾å…¥ `docs/` ç›®å½•
- âœ… æ‰€æœ‰æŠ€æœ¯è§„èŒƒæ”¾å…¥ `.kiro/specs/` ç›®å½•

**æ ¹ç›®å½•åªå…è®¸**:
- `README.md` - é¡¹ç›®ä¸»æ–‡æ¡£
- `CHANGELOG.md` - ç‰ˆæœ¬å˜æ›´æ—¥å¿—
- `pubspec.yaml` - Flutter é…ç½®
- ç”¨æˆ·ç›´æ¥è¿è¡Œçš„è®¾ç½®è„šæœ¬ï¼ˆå¦‚ `setup-cli.bat`ï¼‰

**ç¦æ­¢åœ¨æ ¹ç›®å½•**:
- âŒ ä¸´æ—¶è„šæœ¬ï¼ˆ`fix-xxx.ps1`ï¼‰
- âŒ ä¸´æ—¶æ–‡æ¡£ï¼ˆ`*_FIX.md`ï¼‰
- âŒ å®æ–½æŠ¥å‘Šï¼ˆ`FIXES_SUMMARY.md`ï¼‰
- âŒ æ’ä»¶è¯¦ç»†æ–‡æ¡£

### 2. ä»£ç è§„èŒƒ

#### Dart/Flutter ä»£ç 

- éµå¾ª [Effective Dart](https://dart.dev/guides/language/effective-dart) æŒ‡å—
- ä½¿ç”¨ `flutter_lints` åŒ…è¿›è¡Œä»£ç æ£€æŸ¥
- æ‰€æœ‰å…¬å…± API å¿…é¡»æœ‰æ–‡æ¡£æ³¨é‡Š
- ä½¿ç”¨ç±»å‹æ³¨è§£ï¼Œé¿å… `var` å’Œ `dynamic`
- ä¼˜å…ˆä½¿ç”¨ `const` æ„é€ å‡½æ•°
- ä½¿ç”¨ `async/await` è€Œé `.then()`

#### æ–‡ä»¶å’Œç›®å½•å‘½å

- **æ–‡ä»¶å**: `snake_case.dart` (å¦‚ `audio_service.dart`)
- **ç±»å**: `PascalCase` (å¦‚ `AudioServiceImpl`)
- **å˜é‡/æ–¹æ³•**: `camelCase` (å¦‚ `getNotification()`)
- **å¸¸é‡**: `lowerCamelCase` æˆ– `UPPER_SNAKE_CASE`
- **ç§æœ‰æˆå‘˜**: å‰ç¼€ä¸‹åˆ’çº¿ `_privateMethod`

### 3. æ’ä»¶å¼€å‘è§„èŒƒ

#### æ’ä»¶ ID å‘½å

**æ ¼å¼**: `{domain}.{category}.{plugin-name}`

**è§„åˆ™**:
- ä½¿ç”¨**å°å†™å­—æ¯**å’Œ**ç‚¹å·**
- **ç¦æ­¢ä½¿ç”¨ä¸‹åˆ’çº¿**å’Œè¿å­—ç¬¦
- åå‘åŸŸåæ ¼å¼

**ç¤ºä¾‹**:
```
âœ… com.example.calculator
âœ… org.company.tools.texteditor
âŒ com.example.text_editor (æœ‰ä¸‹åˆ’çº¿)
âŒ com.example.world-clock (æœ‰è¿å­—ç¬¦)
```

#### æ’ä»¶æ–‡æ¡£ç»“æ„

æ¯ä¸ªæ’ä»¶çš„æ–‡æ¡£å¿…é¡»æ”¾åœ¨ï¼š
```
docs/plugins/{plugin-name}/
â”œâ”€â”€ README.md              # æ’ä»¶æ¦‚è¿°
â”œâ”€â”€ implementation.md      # å®ç°æ–‡æ¡£
â””â”€â”€ UPDATE_v{version}.md  # ç‰ˆæœ¬æ›´æ–°è¯´æ˜
```

### 4. æœåŠ¡å¼€å‘è§„èŒƒ

#### æœåŠ¡æ¥å£å®šä¹‰

- æ‰€æœ‰æœåŠ¡å¿…é¡»å…ˆå®šä¹‰æ¥å£ (`I{ServiceName}`)
- æ¥å£æ”¾åœ¨ `lib/core/interfaces/services/`
- å®ç°æ”¾åœ¨ `lib/core/services/{service-name}/`

#### æœåŠ¡ç”Ÿå‘½å‘¨æœŸ

```dart
abstract class I{ServiceName} {
  Future<bool> initialize();
  bool get isInitialized;
  Future<void> dispose();
}
```

### 5. å›½é™…åŒ–è§„èŒƒï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰

**âš ï¸ é‡è¦ï¼šå›½é™…åŒ–ä¼˜å…ˆçº§é«˜äºæ‰€æœ‰å…¶ä»–å¼€å‘ä»»åŠ¡**

#### åŸºæœ¬è§„åˆ™
1. **æ‰€æœ‰é¢å‘ç”¨æˆ·çš„æ–‡æœ¬å¿…é¡»å›½é™…åŒ–**
2. **ç¦æ­¢ç¡¬ç¼–ç æ–‡æœ¬**

```dart
// âŒ é”™è¯¯ï¼šç¡¬ç¼–ç æ–‡æœ¬
Text('Screenshot Plugin Config')

// âœ… æ­£ç¡®ï¼šä½¿ç”¨å›½é™…åŒ–
Text(l10n.screenshot_config_title)
```

#### å¼€å‘æµç¨‹
1. åœ¨ `lib/l10n/app_zh.arb` å’Œ `lib/l10n/app_en.arb` æ·»åŠ ç¿»è¯‘é”®
2. è¿è¡Œ `flutter gen-l10n` ç”Ÿæˆæœ¬åœ°åŒ–ä»£ç 
3. ä½¿ç”¨ `AppLocalizations.of(context)!` è·å– `l10n` å®ä¾‹
4. ä½¿ç”¨ `l10n.xxx` è®¿é—®ç¿»è¯‘æ–‡æœ¬

#### ç¿»è¯‘é”®å‘½åè§„èŒƒ
- ä½¿ç”¨ä¸‹åˆ’çº¿åˆ†éš”çš„å°å†™å­—æ¯ï¼š`settings_save_path`
- æŒ‰åŠŸèƒ½åˆ†ç»„ï¼š`screenshot_config_title`
- é€šç”¨å‘½åï¼š`common_save`, `common_cancel`
- é”™è¯¯æ¶ˆæ¯ï¼š`error_network`, `error_load_failed`

### 6. Git æäº¤è§„èŒƒ

#### æäº¤ä¿¡æ¯æ ¼å¼

```
<type>(<scope>): <subject>

<body>

Co-Authored-By: Kiro <noreply@kiro.dev>
```

**ç±»å‹**:
- `feat`: æ–°åŠŸèƒ½
- `fix`: ä¿®å¤ bug
- `docs`: æ–‡æ¡£å˜æ›´
- `style`: ä»£ç æ ¼å¼
- `refactor`: é‡æ„
- `test`: æ·»åŠ æµ‹è¯•
- `chore`: æ„å»º/å·¥å…·å˜æ›´

### 7. ç‰ˆæœ¬æ§åˆ¶è§„èŒƒ

#### æ¯æ¬¡å¯¹è¯ç»“æŸæ—¶å¿…é¡»
- âœ… è®°å½•æ‰€æœ‰ä¿®æ”¹çš„æ–‡ä»¶
- âœ… è®°å½•æ‰€æœ‰åˆ›å»ºçš„æ–‡ä»¶
- âœ… è®°å½•æ‰€æœ‰åˆ é™¤çš„æ–‡ä»¶
- âœ… æ›´æ–° CHANGELOG.md
- âœ… è¾“å‡ºå®Œæ•´çš„å¯¹è¯æ€»ç»“

#### å¯¹è¯æ€»ç»“æ¨¡æ¿

```markdown
## ğŸ“Š æœ¬æ¬¡å¯¹è¯æ€»ç»“

### ä¿®æ”¹çš„æ–‡ä»¶
- [file-path-1]: {ä¿®æ”¹åŸå› å’Œå†…å®¹}
- [file-path-2]: {ä¿®æ”¹åŸå› å’Œå†…å®¹}

### åˆ›å»ºçš„æ–‡ä»¶
- [new-file-path-1]: {æ–‡ä»¶ç”¨é€”}
- [new-file-path-2]: {æ–‡ä»¶ç”¨é€”}

### åˆ é™¤çš„æ–‡ä»¶
- [deleted-file-path-1]: {åˆ é™¤åŸå› }

### Git æäº¤ä¿¡æ¯
```
{type}({scope}): {subject}

{body}

Co-Authored-By: Kiro <noreply@kiro.dev>
```

### å˜æ›´æ—¥å¿—æ›´æ–°
å·²æ›´æ–° CHANGELOG.md
```

#### Tag å‘½åæ ¼å¼
`v{major}.{minor}.{patch}`

- **Major**: æ¶æ„é‡å¤§å˜æ›´ã€ä¸å…¼å®¹çš„ API å˜æ›´
- **Minor**: æ–°å¢åŠŸèƒ½ã€é‡è¦ç‰¹æ€§
- **Patch**: Bug ä¿®å¤ã€å°æ”¹è¿›ã€æ–‡æ¡£æ›´æ–°

#### Push å‰æ£€æŸ¥æ¸…å•
- [ ] ç¡®è®¤æ‰€æœ‰å˜æ›´å·²æäº¤
- [ ] ç¡®è®¤æäº¤ä¿¡æ¯ç¬¦åˆè§„èŒƒ
- [ ] ç¡®è®¤ CHANGELOG.md å·²æ›´æ–°
- [ ] è¿è¡Œ `flutter test` ç¡®ä¿æµ‹è¯•é€šè¿‡
- [ ] è¿è¡Œ `flutter format .` æ ¼å¼åŒ–ä»£ç 
- [ ] è¿è¡Œ `flutter analyze` é™æ€åˆ†æ
- [ ] è¯„ä¼°æ˜¯å¦éœ€è¦åˆ›å»º tag

### 8. æµ‹è¯•è§„èŒƒ

#### æµ‹è¯•è¦†ç›–ç‡è¦æ±‚

| ç±»å‹ | æœ€ä½è¦†ç›–ç‡ | æ¨èè¦†ç›–ç‡ |
|------|-----------|-----------|
| **æ ¸å¿ƒä¸šåŠ¡é€»è¾‘** | 90% | 95% |
| **å·¥å…·ç±»/Utils** | 100% | 100% |
| **æ•°æ®æ¨¡å‹** | 100% | 100% |
| **æœåŠ¡å±‚** | 85% | 90% |
| **Widget** | 80% | 85% |
| **æ’ä»¶ä»£ç ** | 80% | 85% |

#### æµ‹è¯•æ–‡ä»¶ç»„ç»‡

```
test/
â”œâ”€â”€ unit/                      # å•å…ƒæµ‹è¯•
â”‚   â”œâ”€â”€ core/
â”‚   â””â”€â”€ plugins/
â”œâ”€â”€ widget/                    # Widget æµ‹è¯•
â””â”€â”€ integration/               # é›†æˆæµ‹è¯•
```

#### æµ‹è¯•å‘½åè§„èŒƒ
- æ–‡ä»¶å: `{filename}_test.dart`
- æµ‹è¯•ç»„: `group('{ClassName}', () {`
- æµ‹è¯•ç”¨ä¾‹: `test('should {expected behavior}', () {`

### 9. é”™è¯¯å¤„ç†è§„èŒƒ

#### å¼‚å¸¸ç±»å‹ä½¿ç”¨

| å¼‚å¸¸ç±»å‹ | ä½¿ç”¨åœºæ™¯ |
|---------|---------|
| **ArgumentError** | å‚æ•°éªŒè¯å¤±è´¥ |
| **StateError** | å¯¹è±¡çŠ¶æ€é”™è¯¯ |
| **FormatException** | æ ¼å¼é”™è¯¯ |
| **è‡ªå®šä¹‰å¼‚å¸¸** | ä¸šåŠ¡é€»è¾‘é”™è¯¯ |

#### é”™è¯¯å¤„ç†åŸåˆ™
1. **ç”¨æˆ·å‹å¥½**: é”™è¯¯ä¿¡æ¯æ¸…æ™°ã€æœ‰ç”¨ã€å¯æ“ä½œ
2. **æ—©æœŸå‘ç°**: å°½å¯èƒ½åœ¨æ—©æœŸå‘ç°å’Œå¤„ç†é”™è¯¯
3. **é€‚å½“å¤„ç†**: æ ¹æ®é”™è¯¯ç±»å‹é‡‡å–é€‚å½“ç­–ç•¥
4. **è®°å½•å®Œæ•´**: é”™è¯¯æ—¥å¿—åŒ…å«è¶³å¤Ÿä¸Šä¸‹æ–‡

### 10. æ€§èƒ½ä¼˜åŒ–è§„èŒƒ â­ **æœ€é«˜ä¼˜å…ˆçº§**

#### æ ¸å¿ƒåŸåˆ™
**æ€§èƒ½ä¼˜å…ˆäºå¤æ‚åº¦** - å®å¯ä»£ç å¤æ‚ä¸€ç‚¹ï¼Œä¹Ÿè¦ä¿è¯æ€§èƒ½æœ€ä¼˜

#### Widget æ€§èƒ½ä¼˜åŒ–
- âœ… ä½¿ç”¨ `Listener` æ›¿ä»£ `GestureDetector`ï¼ˆåŸå§‹æŒ‡é’ˆäº‹ä»¶ï¼‰
- âœ… é«˜é¢‘çŠ¶æ€ä½¿ç”¨ `ValueNotifier` è€Œé `setState`
- âœ… ä½¿ç”¨ `const` æ„é€ å‡½æ•°
- âœ… ä½¿ç”¨ `RepaintBoundary` éš”ç¦»é¢‘ç¹é‡ç»˜

#### çŠ¶æ€ç®¡ç†é€‰æ‹©

| æ–¹æ¡ˆ | æ€§èƒ½ | é€‚ç”¨åœºæ™¯ |
|------|------|---------|
| **setState** | â­â­â­ | ç®€å•ã€ä½é¢‘æ›´æ–° |
| **ValueNotifier** | â­â­â­â­â­ | é«˜é¢‘æ›´æ–°ã€ç‹¬ç«‹çŠ¶æ€ |
| **Stream** | â­â­â­â­ | å¼‚æ­¥äº‹ä»¶ã€è·¨ç»„ä»¶ |

**å†³ç­–æ ‘**:
```
çŠ¶æ€æ›´æ–°é¢‘ç‡ > 10æ¬¡/ç§’ï¼Ÿ
â”œâ”€ æ˜¯ â†’ ä½¿ç”¨ ValueNotifier âœ…
â””â”€ å¦ â†’ éœ€è¦å¼‚æ­¥å¤„ç†ï¼Ÿ
    â”œâ”€ æ˜¯ â†’ ä½¿ç”¨ Stream
    â””â”€ å¦ â†’ ä½¿ç”¨ setState
```

## ğŸš€ å¼€å‘æŒ‡å—

### å¸¸ç”¨å‘½ä»¤

```bash
# è¿è¡Œåº”ç”¨
flutter run -d windows

# è¿è¡Œæµ‹è¯•
flutter test

# æµ‹è¯•è¦†ç›–ç‡
flutter test --coverage

# æ„å»ºå‘å¸ƒç‰ˆæœ¬
flutter build windows --release

# ä»£ç æ ¼å¼åŒ–
flutter format .

# é™æ€åˆ†æ
flutter analyze

# å›½é™…åŒ–ç”Ÿæˆ
flutter gen-l10n

# åˆ›å»ºå†…éƒ¨æ’ä»¶
dart tools/plugin_cli.dart create-internal --name "Plugin Name" --type tool
```

### å…³é”®æ–‡ä»¶ä½ç½®

| æ–‡ä»¶ | ç”¨é€” |
|------|------|
| `lib/main.dart` | åº”ç”¨å…¥å£ |
| `lib/core/` | æ ¸å¿ƒç³»ç»Ÿä»£ç  |
| `lib/plugins/` | æ’ä»¶ç›®å½• |
| `docs/` | å®Œæ•´æ–‡æ¡£ |
| `.kiro/specs/` | æŠ€æœ¯è§„èŒƒ |

### è¯¦ç»†è§„åˆ™æ–‡æ¡£

æ›´å¤šè¯¦ç»†è§„åˆ™è¯·å‚è€ƒï¼š
- **æ–‡ä»¶ç»„ç»‡**: æ ¹ç›®å½•ä¿æŒç®€æ´ï¼Œè„šæœ¬æ”¾ `scripts/`ï¼Œæ–‡æ¡£æ”¾ `docs/`
- **ä»£ç é£æ ¼**: éµå¾ª Effective Dartï¼Œä½¿ç”¨ç±»å‹æ³¨è§£ï¼Œä¼˜å…ˆ `const`
- **æµ‹è¯•è§„èŒƒ**: AAA æ¨¡å¼ï¼Œæœ€ä½ 80% è¦†ç›–ç‡
- **é”™è¯¯å¤„ç†**: ç”¨æˆ·å‹å¥½ï¼Œæ—©æœŸå‘ç°ï¼Œè®°å½•å®Œæ•´
- **æ€§èƒ½ä¼˜åŒ–**: æ€§èƒ½ä¼˜å…ˆåŸåˆ™ï¼ŒValueNotifier ä¼˜åŒ–é«˜é¢‘çŠ¶æ€
- **Git æäº¤**: çº¦å®šå¼æäº¤ï¼Œæ¸…æ™°çš„æäº¤ä¿¡æ¯

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [æ–‡æ¡£ä¸»ç´¢å¼•](../../docs/MASTER_INDEX.md)
- [æ’ä»¶å¼€å‘æŒ‡å—](../../docs/guides/internal-plugin-development.md)
- [å¹³å°æœåŠ¡æŒ‡å—](../../docs/guides/PLATFORM_SERVICES_USER_GUIDE.md)

## ğŸ”— æ‰©å±•é˜…è¯»

### è¯¦ç»†è§„èŒƒï¼ˆ.claude/rules/ï¼‰
- [æ–‡ä»¶ç»„ç»‡è§„èŒƒ](.claude/rules/FILE_ORGANIZATION_RULES.md)
- [ä»£ç é£æ ¼è§„èŒƒ](.claude/rules/CODE_STYLE_RULES.md)
- [æµ‹è¯•è§„èŒƒ](.claude/rules/TESTING_RULES.md)
- [é”™è¯¯å¤„ç†è§„èŒƒ](.claude/rules/ERROR_HANDLING_RULES.md)
- [æ€§èƒ½ä¼˜åŒ–è§„èŒƒ](.claude/rules/PERFORMANCE_OPTIMIZATION_RULES.md)
- [Git æäº¤è§„èŒƒ](.claude/rules/GIT_COMMIT_RULES.md)
- [ç‰ˆæœ¬æ§åˆ¶è§„èŒƒ](.claude/rules/VERSION_CONTROL_RULES.md)

---

**ç‰ˆæœ¬**: v2.0.0
**æœ€åæ›´æ–°**: 2026-01-23
**ç»´æŠ¤è€…**: Flutter Plugin Platform Team

---

ğŸ’¡ **æç¤º**: æœ¬æ–‡æ¡£æ˜¯ Kiro AI åŠ©æ‰‹çš„æ ¸å¿ƒè§„åˆ™ã€‚è¯¦ç»†è§„èŒƒè¯·å‚è€ƒ `.claude/rules/` ç›®å½•ã€‚
