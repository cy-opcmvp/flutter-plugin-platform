# Kiro Hooksï¼ˆé’©å­ï¼‰æŒ‡å—

> ğŸª Kiro Agent Hooks å…è®¸åœ¨ç‰¹å®šäº‹ä»¶å‘ç”Ÿæ—¶è‡ªåŠ¨è§¦å‘ AI æ‰§è¡Œ

**ç‰ˆæœ¬**: v1.0.0
**æœ€åæ›´æ–°**: 2026-01-23

---

## ğŸ“‹ ä»€ä¹ˆæ˜¯ Hooksï¼Ÿ

Hooksï¼ˆé’©å­ï¼‰æ˜¯ Kiro IDE çš„ä¸€ä¸ªå¼ºå¤§åŠŸèƒ½ï¼Œå…è®¸ä½ åœ¨ç‰¹å®šäº‹ä»¶å‘ç”Ÿæ—¶è‡ªåŠ¨è§¦å‘ Agent æ‰§è¡Œã€‚è¿™ä½¿å¾—å¼€å‘æµç¨‹æ›´åŠ è‡ªåŠ¨åŒ–å’Œé«˜æ•ˆã€‚

---

## ğŸ¯ è§¦å‘äº‹ä»¶ç±»å‹

### 1. æ¶ˆæ¯å‘é€æ—¶ï¼ˆon_message_sendï¼‰
å½“ç”¨æˆ·å‘ Agent å‘é€æ¶ˆæ¯æ—¶è§¦å‘

**ä½¿ç”¨åœºæ™¯**:
- æé†’ Agent éµå¾ªç‰¹å®šè§„åˆ™
- è‡ªåŠ¨æ·»åŠ ä¸Šä¸‹æ–‡ä¿¡æ¯

### 2. Agent æ‰§è¡Œå®Œæˆæ—¶ï¼ˆon_execution_completeï¼‰
å½“ Agent å®Œæˆä¸€æ¬¡æ‰§è¡Œåè§¦å‘

**ä½¿ç”¨åœºæ™¯**:
- è‡ªåŠ¨è¿è¡Œæµ‹è¯•
- è‡ªåŠ¨æ ¼å¼åŒ–ä»£ç 
- è‡ªåŠ¨æäº¤ä»£ç 

### 3. æ–°ä¼šè¯åˆ›å»ºæ—¶ï¼ˆon_session_createï¼‰
å½“ç”¨æˆ·é¦–æ¬¡å‘é€æ¶ˆæ¯åˆ›å»ºæ–°ä¼šè¯æ—¶è§¦å‘

**ä½¿ç”¨åœºæ™¯**:
- åˆå§‹åŒ–é¡¹ç›®ç¯å¢ƒ
- åŠ è½½é¡¹ç›®è§„åˆ™
- è®¾ç½®å·¥ä½œç›®å½•

### 4. æ–‡ä»¶ä¿å­˜æ—¶ï¼ˆon_file_saveï¼‰
å½“ç”¨æˆ·ä¿å­˜ä»£ç æ–‡ä»¶æ—¶è§¦å‘

**ä½¿ç”¨åœºæ™¯**:
- è‡ªåŠ¨è¿è¡Œç›¸å…³æµ‹è¯•
- è‡ªåŠ¨æ ¼å¼åŒ–ä»£ç 
- è‡ªåŠ¨æ›´æ–°æ–‡æ¡£

### 5. æ‰‹åŠ¨è§¦å‘ï¼ˆmanualï¼‰
ç”¨æˆ·æ‰‹åŠ¨ç‚¹å‡»é’©å­æŒ‰é’®æ—¶è§¦å‘

**ä½¿ç”¨åœºæ™¯**:
- æ‹¼å†™æ£€æŸ¥
- ä»£ç å®¡æŸ¥
- ç”Ÿæˆæ–‡æ¡£

---

## ğŸ”§ é’©å­åŠ¨ä½œç±»å‹

### 1. å‘é€æ¶ˆæ¯ï¼ˆsend_messageï¼‰
å‘ Agent å‘é€ä¸€æ¡æ–°æ¶ˆæ¯

```yaml
action: send_message
message: "è¯·æ£€æŸ¥ä»£ç æ˜¯å¦ç¬¦åˆé¡¹ç›®è§„èŒƒ"
```

### 2. æ‰§è¡Œå‘½ä»¤ï¼ˆrun_commandï¼‰
æ‰§è¡Œ Shell å‘½ä»¤

```yaml
action: run_command
command: "flutter test"
```

**å¯é€‰å‚æ•°**:
- `provide_message_as_input`: å°†è§¦å‘æ¶ˆæ¯ä½œä¸ºå‘½ä»¤è¾“å…¥ï¼ˆå¸ƒå°”å€¼ï¼‰

---

## ğŸ“ é’©å­é…ç½®ç¤ºä¾‹

### ç¤ºä¾‹ 1: ä¿å­˜æ–‡ä»¶æ—¶è‡ªåŠ¨è¿è¡Œæµ‹è¯•

```yaml
name: "è‡ªåŠ¨æµ‹è¯•"
description: "ä¿å­˜ Dart æ–‡ä»¶æ—¶è‡ªåŠ¨è¿è¡Œç›¸å…³æµ‹è¯•"
trigger:
  event: on_file_save
  pattern: "**/*.dart"
action:
  type: run_command
  command: "flutter test test/unit/${FILE_NAME}_test.dart"
enabled: true
```

### ç¤ºä¾‹ 2: æ›´æ–°ç¿»è¯‘æ—¶åŒæ­¥å…¶ä»–è¯­è¨€

```yaml
name: "åŒæ­¥ç¿»è¯‘"
description: "æ›´æ–°ç¿»è¯‘æ–‡ä»¶æ—¶æé†’ Agent åŒæ­¥å…¶ä»–è¯­è¨€"
trigger:
  event: on_file_save
  pattern: "lib/l10n/*.arb"
action:
  type: send_message
  message: "ç¿»è¯‘æ–‡ä»¶å·²æ›´æ–°ï¼Œè¯·æ£€æŸ¥å¹¶åŒæ­¥æ‰€æœ‰è¯­è¨€çš„ç¿»è¯‘ï¼ˆä¸­æ–‡å’Œè‹±æ–‡ï¼‰"
enabled: true
```

### ç¤ºä¾‹ 3: æ‰‹åŠ¨æ‹¼å†™æ£€æŸ¥

```yaml
name: "æ‹¼å†™æ£€æŸ¥"
description: "æ£€æŸ¥ README æ–‡ä»¶çš„è¯­æ³•å’Œæ‹¼å†™é”™è¯¯"
trigger:
  event: manual
action:
  type: send_message
  message: "è¯·æ£€æŸ¥ README.md ä¸­çš„è¯­æ³•å’Œæ‹¼å†™é”™è¯¯ï¼Œå¹¶ä¿®å¤å‘ç°çš„é—®é¢˜"
enabled: true
```

### ç¤ºä¾‹ 4: æäº¤å‰æ£€æŸ¥

```yaml
name: "æäº¤å‰æ£€æŸ¥"
description: "æ‰§è¡Œå®Œæˆåè‡ªåŠ¨è¿è¡Œæµ‹è¯•å’Œæ ¼å¼åŒ–"
trigger:
  event: on_execution_complete
action:
  type: run_command
  command: "flutter format . && flutter analyze && flutter test"
enabled: false  # é»˜è®¤ç¦ç”¨ï¼Œéœ€è¦æ—¶æ‰‹åŠ¨å¯ç”¨
```

### ç¤ºä¾‹ 5: æ–°ä¼šè¯åˆå§‹åŒ–

```yaml
name: "ä¼šè¯åˆå§‹åŒ–"
description: "æ–°ä¼šè¯æ—¶åŠ è½½é¡¹ç›®è§„åˆ™"
trigger:
  event: on_session_create
action:
  type: send_message
  message: "è¯·é˜…è¯» .kiro/steering/ ç›®å½•ä¸­çš„æ‰€æœ‰è§„åˆ™æ–‡ä»¶ï¼Œç¡®ä¿éµå¾ªé¡¹ç›®è§„èŒƒ"
enabled: true
```

---

## ğŸ—‚ï¸ é’©å­æ–‡ä»¶ç»„ç»‡

### ç›®å½•ç»“æ„

```
.kiro/hooks/
â”œâ”€â”€ auto-test.yaml           # è‡ªåŠ¨æµ‹è¯•é’©å­
â”œâ”€â”€ sync-translations.yaml   # åŒæ­¥ç¿»è¯‘é’©å­
â”œâ”€â”€ spell-check.yaml         # æ‹¼å†™æ£€æŸ¥é’©å­
â”œâ”€â”€ pre-commit.yaml          # æäº¤å‰æ£€æŸ¥é’©å­
â””â”€â”€ session-init.yaml        # ä¼šè¯åˆå§‹åŒ–é’©å­
```

### æ–‡ä»¶å‘½åè§„èŒƒ

- ä½¿ç”¨ kebab-case: `auto-test.yaml`
- æè¿°æ€§å‘½å: `sync-translations.yaml`
- é¿å…ç©ºæ ¼å’Œç‰¹æ®Šå­—ç¬¦

---

## ğŸ¨ ç®¡ç†é’©å­

### æ–¹æ³• 1: ä½¿ç”¨ Explorer è§†å›¾

1. æ‰“å¼€ VS Code çš„ Explorer é¢æ¿
2. æ‰¾åˆ° "Agent Hooks" éƒ¨åˆ†
3. ç‚¹å‡» "+" æŒ‰é’®åˆ›å»ºæ–°é’©å­
4. ç¼–è¾‘é’©å­é…ç½®

### æ–¹æ³• 2: ä½¿ç”¨å‘½ä»¤é¢æ¿

1. æŒ‰ `Ctrl+Shift+P` (Windows/Linux) æˆ– `Cmd+Shift+P` (macOS)
2. è¾“å…¥ "Open Kiro Hook UI"
3. åœ¨ UI ä¸­åˆ›å»ºå’Œç®¡ç†é’©å­

### æ–¹æ³• 3: æ‰‹åŠ¨ç¼–è¾‘é…ç½®æ–‡ä»¶

ç›´æ¥åœ¨ `.kiro/hooks/` ç›®å½•ä¸­åˆ›å»ºæˆ–ç¼–è¾‘ YAML æ–‡ä»¶ã€‚

---

## âš™ï¸ é’©å­é…ç½®å­—æ®µ

### å®Œæ•´é…ç½®ç¤ºä¾‹

```yaml
# é’©å­åç§°ï¼ˆå¿…éœ€ï¼‰
name: "è‡ªåŠ¨æµ‹è¯•"

# é’©å­æè¿°ï¼ˆå¯é€‰ï¼‰
description: "ä¿å­˜ Dart æ–‡ä»¶æ—¶è‡ªåŠ¨è¿è¡Œç›¸å…³æµ‹è¯•"

# è§¦å‘å™¨é…ç½®ï¼ˆå¿…éœ€ï¼‰
trigger:
  # è§¦å‘äº‹ä»¶ç±»å‹ï¼ˆå¿…éœ€ï¼‰
  event: on_file_save  # on_message_send | on_execution_complete | on_session_create | on_file_save | manual
  
  # æ–‡ä»¶åŒ¹é…æ¨¡å¼ï¼ˆä»… on_file_save éœ€è¦ï¼‰
  pattern: "**/*.dart"

# åŠ¨ä½œé…ç½®ï¼ˆå¿…éœ€ï¼‰
action:
  # åŠ¨ä½œç±»å‹ï¼ˆå¿…éœ€ï¼‰
  type: run_command  # send_message | run_command
  
  # æ¶ˆæ¯å†…å®¹ï¼ˆtype=send_message æ—¶å¿…éœ€ï¼‰
  message: "è¯·æ£€æŸ¥ä»£ç "
  
  # å‘½ä»¤ï¼ˆtype=run_command æ—¶å¿…éœ€ï¼‰
  command: "flutter test"
  
  # æ˜¯å¦å°†æ¶ˆæ¯ä½œä¸ºå‘½ä»¤è¾“å…¥ï¼ˆå¯é€‰ï¼Œé»˜è®¤ falseï¼‰
  provide_message_as_input: false

# æ˜¯å¦å¯ç”¨ï¼ˆå¯é€‰ï¼Œé»˜è®¤ trueï¼‰
enabled: true
```

---

## ğŸš€ æœ€ä½³å®è·µ

### 1. åˆç†ä½¿ç”¨è§¦å‘äº‹ä»¶

- âœ… **on_file_save**: é€‚åˆå¿«é€Ÿåé¦ˆï¼ˆæµ‹è¯•ã€æ ¼å¼åŒ–ï¼‰
- âœ… **on_execution_complete**: é€‚åˆåå¤„ç†ï¼ˆæäº¤ã€éƒ¨ç½²ï¼‰
- âœ… **manual**: é€‚åˆå¶å°”éœ€è¦çš„æ“ä½œï¼ˆæ‹¼å†™æ£€æŸ¥ã€ä»£ç å®¡æŸ¥ï¼‰
- âš ï¸ **on_message_send**: è°¨æ…ä½¿ç”¨ï¼Œé¿å…å¹²æ‰°æ­£å¸¸å¯¹è¯

### 2. é¿å…è¿‡åº¦è‡ªåŠ¨åŒ–

```yaml
# âŒ é”™è¯¯ï¼šæ¯æ¬¡ä¿å­˜éƒ½è¿è¡Œæ‰€æœ‰æµ‹è¯•ï¼ˆå¤ªæ…¢ï¼‰
trigger:
  event: on_file_save
  pattern: "**/*.dart"
action:
  type: run_command
  command: "flutter test"  # å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿ

# âœ… æ­£ç¡®ï¼šåªè¿è¡Œç›¸å…³æµ‹è¯•
trigger:
  event: on_file_save
  pattern: "**/*.dart"
action:
  type: run_command
  command: "flutter test test/unit/${FILE_NAME}_test.dart"
```

### 3. æä¾›æ¸…æ™°çš„æè¿°

```yaml
# âŒ é”™è¯¯ï¼šæè¿°ä¸æ¸…æ™°
name: "Hook 1"
description: "Do something"

# âœ… æ­£ç¡®ï¼šæ¸…æ™°çš„æè¿°
name: "è‡ªåŠ¨æµ‹è¯•"
description: "ä¿å­˜ Dart æ–‡ä»¶æ—¶è‡ªåŠ¨è¿è¡Œç›¸å…³å•å…ƒæµ‹è¯•ï¼Œç¡®ä¿ä»£ç è´¨é‡"
```

### 4. ä½¿ç”¨ enabled å­—æ®µæ§åˆ¶

```yaml
# å¼€å‘æ—¶å¯ç”¨
enabled: true

# ç”Ÿäº§ç¯å¢ƒæˆ–ä¸éœ€è¦æ—¶ç¦ç”¨
enabled: false
```

---

## ğŸ” è°ƒè¯•é’©å­

### æŸ¥çœ‹é’©å­æ‰§è¡Œæ—¥å¿—

1. æ‰“å¼€ Kiro è¾“å‡ºé¢æ¿
2. é€‰æ‹© "Kiro Hooks" é¢‘é“
3. æŸ¥çœ‹é’©å­è§¦å‘å’Œæ‰§è¡Œæ—¥å¿—

### å¸¸è§é—®é¢˜

#### é’©å­æ²¡æœ‰è§¦å‘

- æ£€æŸ¥ `enabled` å­—æ®µæ˜¯å¦ä¸º `true`
- æ£€æŸ¥è§¦å‘äº‹ä»¶ç±»å‹æ˜¯å¦æ­£ç¡®
- æ£€æŸ¥æ–‡ä»¶åŒ¹é…æ¨¡å¼æ˜¯å¦æ­£ç¡®ï¼ˆon_file_saveï¼‰

#### å‘½ä»¤æ‰§è¡Œå¤±è´¥

- æ£€æŸ¥å‘½ä»¤æ˜¯å¦æ­£ç¡®
- æ£€æŸ¥å‘½ä»¤æ˜¯å¦åœ¨ PATH ä¸­
- æ£€æŸ¥å·¥ä½œç›®å½•æ˜¯å¦æ­£ç¡®

#### æ¶ˆæ¯æ²¡æœ‰å‘é€

- æ£€æŸ¥ Agent æ˜¯å¦æ­£åœ¨è¿è¡Œ
- æ£€æŸ¥æ¶ˆæ¯å†…å®¹æ˜¯å¦æ­£ç¡®

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [Kiro ç¼–ç è§„åˆ™](rules.md)
- [é¡¹ç›®æ¦‚è§ˆ](overview.md)
- [æŠ€æœ¯æ ˆ](tech.md)

---

## ğŸ¯ å¿«é€Ÿå‚è€ƒ

| è§¦å‘äº‹ä»¶ | ä½¿ç”¨åœºæ™¯ | ç¤ºä¾‹ |
|---------|---------|------|
| **on_file_save** | è‡ªåŠ¨æµ‹è¯•ã€æ ¼å¼åŒ– | ä¿å­˜ Dart æ–‡ä»¶æ—¶è¿è¡Œæµ‹è¯• |
| **on_execution_complete** | åå¤„ç†ã€æäº¤ | æ‰§è¡Œå®Œæˆåè¿è¡Œæµ‹è¯• |
| **on_session_create** | åˆå§‹åŒ–ã€åŠ è½½è§„åˆ™ | æ–°ä¼šè¯æ—¶åŠ è½½é¡¹ç›®è§„èŒƒ |
| **on_message_send** | æé†’ã€æ·»åŠ ä¸Šä¸‹æ–‡ | å‘é€æ¶ˆæ¯æ—¶æé†’è§„åˆ™ |
| **manual** | å¶å°”éœ€è¦çš„æ“ä½œ | æ‰‹åŠ¨è§¦å‘æ‹¼å†™æ£€æŸ¥ |

---

**ç‰ˆæœ¬**: v1.0.0
**æœ€åæ›´æ–°**: 2026-01-23
**ç»´æŠ¤è€…**: Flutter Plugin Platform Team

---

ğŸ’¡ **æç¤º**: åˆç†ä½¿ç”¨ Hooks å¯ä»¥å¤§å¤§æé«˜å¼€å‘æ•ˆç‡ï¼Œä½†é¿å…è¿‡åº¦è‡ªåŠ¨åŒ–ï¼
